(self.webpackChunkmp2=self.webpackChunkmp2||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},7716:(t,e,n)=>{"use strict";n.d(e,{deG:()=>Qe,tb:()=>da,AFp:()=>aa,ip1:()=>oa,CZH:()=>sa,hGG:()=>ou,z2F:()=>Ya,sBO:()=>gs,Sil:()=>xa,_Vd:()=>Fo,EJc:()=>ga,SBq:()=>Bo,qLn:()=>ar,vpe:()=>Bs,gxx:()=>Mi,tBr:()=>fn,XFs:()=>I,OlP:()=>Ye,zs3:()=>Yi,ZZ4:()=>us,aQg:()=>ls,soG:()=>pa,YKP:()=>Ss,v3s:()=>$a,h0i:()=>Ts,PXZ:()=>za,R0b:()=>Ea,FiY:()=>pn,Lbi:()=>ha,g9A:()=>la,Qsj:()=>Go,FYo:()=>Ho,JOm:()=>lr,Tiy:()=>Ko,q3G:()=>er,tp0:()=>gn,EAV:()=>tu,Rgc:()=>bs,dDg:()=>Ra,DyG:()=>$e,q4F:()=>Qo,GfV:()=>Yo,s_b:()=>Is,ifc:()=>R,eFA:()=>Ha,G48:()=>Va,X6Q:()=>Za,_c5:()=>ru,VLi:()=>La,c2e:()=>fa,zSh:()=>Ui,wAp:()=>Ro,vHH:()=>p,EiD:()=>Xn,mCW:()=>Ln,qzn:()=>Sn,JVY:()=>In,pB0:()=>Pn,eBb:()=>An,L6k:()=>kn,LAX:()=>On,cg1:()=>Oo,Tjo:()=>nu,kL8:()=>Po,yhl:()=>En,dqk:()=>q,sIi:()=>Xi,CqO:()=>mo,QGY:()=>po,F4k:()=>go,RDi:()=>Tt,AaK:()=>c,z3N:()=>Tn,TTD:()=>yt,xp6:()=>Wr,uIk:()=>no,Suo:()=>na,Xpm:()=>Y,lG2:()=>rt,Yz7:()=>v,cJS:()=>_,oAB:()=>tt,Yjl:()=>it,Y36:()=>so,_UZ:()=>ho,qZA:()=>lo,TgZ:()=>co,EpF:()=>fo,Ikx:()=>Eo,LFG:()=>ln,$8M:()=>Ge,NdJ:()=>yo,CRH:()=>ra,kcU:()=>le,O4$:()=>ce,oxw:()=>bo,Q6J:()=>ao,s9C:()=>wo,iGM:()=>ea,MAs:()=>oo,CHM:()=>jt,LSH:()=>nr,B6R:()=>Q,kYT:()=>et,YNc:()=>io,_uU:()=>xo,Oqu:()=>To,hij:()=>So});var r=n(9765),i=n(5319),o=n(7574),s=n(6682),a=n(8819);function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(c).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function l(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const h=u({__forward_ref__:u});function d(t){return t.__forward_ref__=d,t.toString=function(){return c(this())},t}function f(t){return"function"==typeof(e=t)&&e.hasOwnProperty(h)&&e.__forward_ref__===d?t():t;var e}class p extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function g(t){return"string"==typeof t?t:null==t?"":String(t)}function m(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():g(t)}function y(t,e){const n=e?` in ${e}`:"";throw new p("201",`No provider for ${m(t)} found${n}`)}function v(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _(t){return{providers:t.providers||[],imports:t.imports||[]}}function b(t){return w(t,x)||w(t,S)}function w(t,e){return t.hasOwnProperty(e)?t[e]:null}function C(t){return t&&(t.hasOwnProperty(T)||t.hasOwnProperty(E))?t[T]:null}const x=u({"\u0275prov":u}),T=u({"\u0275inj":u}),S=u({ngInjectableDef:u}),E=u({ngInjectorDef:u});var I=(()=>((I=I||{})[I.Default=0]="Default",I[I.Host=1]="Host",I[I.Self=2]="Self",I[I.SkipSelf=4]="SkipSelf",I[I.Optional=8]="Optional",I))();let k;function A(t){const e=k;return k=t,e}function O(t,e,n){const r=b(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&I.Optional?null:void 0!==e?e:void y(c(t),"Injector")}function P(t){return{toString:t}.toString()}var N=(()=>((N=N||{})[N.OnPush=0]="OnPush",N[N.Default=1]="Default",N))(),R=(()=>((R=R||{})[R.Emulated=0]="Emulated",R[R.None=2]="None",R[R.ShadowDom=3]="ShadowDom",R))();const D="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,L="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,q=D||U||M||L,F={},j=[],Z=u({"\u0275cmp":u}),V=u({"\u0275dir":u}),B=u({"\u0275pipe":u}),z=u({"\u0275mod":u}),H=u({"\u0275loc":u}),G=u({"\u0275fac":u}),W=u({__NG_ELEMENT_ID__:u});let K=0;function Y(t){return P(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===N.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||j,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||R.Emulated,id:"c",styles:t.styles||j,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=K++,n.inputs=nt(t.inputs,e),n.outputs=nt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map($):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(J):null,n})}function Q(t,e,n){const r=t.\u0275cmp;r.directiveDefs=()=>e.map($),r.pipeDefs=()=>n.map(J)}function $(t){return ot(t)||function(t){return t[V]||null}(t)}function J(t){return function(t){return t[B]||null}(t)}const X={};function tt(t){return P(()=>{const e={type:t.type,bootstrap:t.bootstrap||j,declarations:t.declarations||j,imports:t.imports||j,exports:t.exports||j,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(X[t.id]=t.type),e})}function et(t,e){return P(()=>{const n=st(t,!0);n.declarations=e.declarations||j,n.imports=e.imports||j,n.exports=e.exports||j})}function nt(t,e){if(null==t)return F;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const rt=Y;function it(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function ot(t){return t[Z]||null}function st(t,e){const n=t[z]||null;if(!n&&!0===e)throw new Error(`Type ${c(t)} does not have '\u0275mod' property.`);return n}const at=20,ut=10;function ct(t){return Array.isArray(t)&&"object"==typeof t[1]}function lt(t){return Array.isArray(t)&&!0===t[1]}function ht(t){return 0!=(8&t.flags)}function dt(t){return 2==(2&t.flags)}function ft(t){return 1==(1&t.flags)}function pt(t){return null!==t.template}function gt(t,e){return t.hasOwnProperty(G)?t[G]:null}class mt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function yt(){return vt}function vt(t){return t.type.prototype.ngOnChanges&&(t.setInput=bt),_t}function _t(){const t=wt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===F)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function bt(t,e,n,r){const i=wt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:F,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new mt(u&&u.currentValue,e,s===F),t[r]=e}function wt(t){return t.__ngSimpleChanges__||null}yt.ngInherit=!0;const Ct="http://www.w3.org/2000/svg";let xt;function Tt(t){xt=t}function St(t){return!!t.listen}const Et={createRenderer:(t,e)=>void 0!==xt?xt:"undefined"!=typeof document?document:void 0};function It(t){for(;Array.isArray(t);)t=t[0];return t}function kt(t,e){return It(e[t.index])}function At(t,e){return t.data[e]}function Ot(t,e){const n=e[t];return ct(n)?n:n[0]}function Pt(t){return 4==(4&t[2])}function Nt(t){return 128==(128&t[2])}function Rt(t,e){return null==e?null:t[e]}function Dt(t){t[18]=0}function Mt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Lt={lFrame:ne(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ut(){return Lt.bindingsEnabled}function qt(){return Lt.lFrame.lView}function Ft(){return Lt.lFrame.tView}function jt(t){return Lt.lFrame.contextLView=t,t[8]}function Zt(){let t=Vt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Vt(){return Lt.lFrame.currentTNode}function Bt(t,e){const n=Lt.lFrame;n.currentTNode=t,n.isParent=e}function zt(){return Lt.lFrame.isParent}function Ht(){return Lt.isInCheckNoChangesMode}function Gt(t){Lt.isInCheckNoChangesMode=t}function Wt(){return Lt.lFrame.bindingIndex++}function Kt(t,e){const n=Lt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Yt(e)}function Yt(t){Lt.lFrame.currentDirectiveIndex=t}function Qt(){return Lt.lFrame.currentQueryIndex}function $t(t){Lt.lFrame.currentQueryIndex=t}function Jt(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Xt(t,e,n){if(n&I.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&I.Host||(r=Jt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Lt.lFrame=ee();return r.currentTNode=e,r.lView=t,!0}function te(t){const e=ee(),n=t[1];Lt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ee(){const t=Lt.lFrame,e=null===t?null:t.child;return null===e?ne(t):e}function ne(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function re(){const t=Lt.lFrame;return Lt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const ie=re;function oe(){const t=re();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function se(){return Lt.lFrame.selectedIndex}function ae(t){Lt.lFrame.selectedIndex=t}function ue(){const t=Lt.lFrame;return At(t.tView,t.selectedIndex)}function ce(){Lt.lFrame.currentNamespace=Ct}function le(){Lt.lFrame.currentNamespace=null}function he(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function de(t,e,n){ge(t,e,3,n)}function fe(t,e,n,r){(3&t[2])===n&&ge(t,e,n,r)}function pe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ge(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(me(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function me(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const ye=-1;class ve{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function _e(t,e,n){const r=St(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];we(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function be(t){return 3===t||4===t||6===t}function we(t){return 64===t.charCodeAt(0)}function Ce(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||xe(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function xe(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Te(t){return t!==ye}function Se(t){return 32767&t}function Ee(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Ie=!0;function ke(t){const e=Ie;return Ie=t,e}let Ae=0;function Oe(t,e){const n=Ne(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Pe(r.data,t),Pe(e,null),Pe(r.blueprint,null));const i=Re(t,e),o=t.injectorIndex;if(Te(i)){const t=Se(i),n=Ee(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Pe(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ne(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Re(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return ye;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return ye}function De(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(r=n[W]),null==r&&(r=n[W]=Ae++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Me(t,e,n){if(n&I.Optional)return t;y(e,"NodeInjector")}function Le(t,e,n,r){if(n&I.Optional&&void 0===r&&(r=null),0==(n&(I.Self|I.Host))){const i=t[9],o=A(void 0);try{return i?i.get(e,r,n&I.Optional):O(e,r,n&I.Optional)}finally{A(o)}}return Me(r,e,n)}function Ue(t,e,n,r=I.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(W)?t[W]:void 0;return"number"==typeof e?e>=0?255&e:Fe:e}(n);if("function"==typeof o){if(!Xt(e,t,r))return r&I.Host?Me(i,n,r):Le(e,n,r,i);try{const t=o(r);if(null!=t||r&I.Optional)return t;y(n)}finally{ie()}}else if("number"==typeof o){let i=null,s=Ne(t,e),a=ye,u=r&I.Host?e[16][6]:null;for((-1===s||r&I.SkipSelf)&&(a=-1===s?Re(t,e):e[s+8],a!==ye&&ze(r,!1)?(i=e[1],s=Se(a),e=Ee(a,e)):s=-1);-1!==s;){const t=e[1];if(Be(o,s,t.data)){const t=je(s,e,n,i,r,u);if(t!==qe)return t}a=e[s+8],a!==ye&&ze(r,e[1].data[s+8]===u)&&Be(o,s,e)?(i=t,s=Se(a),e=Ee(a,e)):s=-1}}}return Le(e,n,r,i)}const qe={};function Fe(){return new He(Zt(),qt())}function je(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ze(a,s,n,null==r?dt(a)&&Ie:r!=s&&0!=(3&a.type),i&I.Host&&o===a);return null!==u?Ve(e,s,u,a):qe}function Ze(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&pt(t)&&t.type===n)return u}return null}function Ve(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof ve){const s=i;s.resolving&&function(t,e){throw new p("200",`Circular dependency in DI detected for ${t}`)}(m(o[n]));const a=ke(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?A(s.injectImpl):null;Xt(t,r,I.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=vt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&A(u),ke(a),s.resolving=!1,ie()}}return i}function Be(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function ze(t,e){return!(t&I.Self||t&I.Host&&e)}class He{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ue(this._tNode,this._lView,t,void 0,e)}}function Ge(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(be(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Zt(),t)}const We="__parameters__";function Ke(t,e,n){return P(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(We)?t[We]:Object.defineProperty(t,We,{value:[]})[We];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class Ye{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=v({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Qe=new Ye("AnalyzeForEntryComponents"),$e=Function;function Je(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Je(r,e)):e!==t&&e.push(r)}return e}function Xe(t,e){t.forEach(t=>Array.isArray(t)?Xe(t,e):e(t))}function tn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function en(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const nn={},rn=/\n/gm,on="__source",sn=u({provide:String,useValue:u});let an;function un(t){const e=an;return an=t,e}function cn(t,e=I.Default){if(void 0===an)throw new Error("inject() must be called from an injection context");return null===an?O(t,void 0,e):an.get(t,e&I.Optional?null:void 0,e)}function ln(t,e=I.Default){return(k||cn)(f(t),e)}function hn(t){const e=[];for(let n=0;n<t.length;n++){const r=f(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=I.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(ln(t,n))}else e.push(ln(r))}return e}function dn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const fn=dn(Ke("Inject",t=>({token:t})),-1),pn=dn(Ke("Optional"),8),gn=dn(Ke("SkipSelf"),4);let mn;function yn(t){var e;return(null===(e=function(){if(void 0===mn&&(mn=null,q.trustedTypes))try{mn=q.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return mn}())||void 0===e?void 0:e.createHTML(t))||t}class vn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class _n extends vn{getTypeName(){return"HTML"}}class bn extends vn{getTypeName(){return"Style"}}class wn extends vn{getTypeName(){return"Script"}}class Cn extends vn{getTypeName(){return"URL"}}class xn extends vn{getTypeName(){return"ResourceURL"}}function Tn(t){return t instanceof vn?t.changingThisBreaksApplicationSecurity:t}function Sn(t,e){const n=En(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function En(t){return t instanceof vn&&t.getTypeName()||null}function In(t){return new _n(t)}function kn(t){return new bn(t)}function An(t){return new wn(t)}function On(t){return new Cn(t)}function Pn(t){return new xn(t)}class Nn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(yn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Rn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=yn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=yn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Dn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Mn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ln(t){return(t=String(t)).match(Dn)||t.match(Mn)?t:"unsafe:"+t}function Un(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function qn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Fn=Un("area,br,col,hr,img,wbr"),jn=Un("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zn=Un("rp,rt"),Vn=qn(Zn,jn),Bn=qn(Fn,qn(jn,Un("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qn(Zn,Un("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vn),zn=Un("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Hn=Un("srcset"),Gn=qn(zn,Hn,Un("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Un("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Wn=Un("script,style,template");class Kn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Bn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Wn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Gn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;zn[o]&&(s=Ln(s)),Hn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Ln(t.trim())).join(", ")),this.buf.push(" ",e,'="',$n(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Bn.hasOwnProperty(e)&&!Fn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push($n(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Yn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qn=/([^\#-~ |!])/g;function $n(t){return t.replace(/&/g,"&amp;").replace(Yn,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Qn,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jn;function Xn(t,e){let n=null;try{Jn=Jn||function(t){const e=new Rn(t);return function(){try{return!!(new window.DOMParser).parseFromString(yn(""),"text/html")}catch(t){return!1}}()?new Nn(e):e}(t);let r=e?String(e):"";n=Jn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Jn.getInertBodyElement(r)}while(r!==o);return yn((new Kn).sanitizeChildren(tr(n)||n))}finally{if(n){const t=tr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function tr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var er=(()=>((er=er||{})[er.NONE=0]="NONE",er[er.HTML=1]="HTML",er[er.STYLE=2]="STYLE",er[er.SCRIPT=3]="SCRIPT",er[er.URL=4]="URL",er[er.RESOURCE_URL=5]="RESOURCE_URL",er))();function nr(t){const e=function(){const t=qt();return t&&t[12]}();return e?e.sanitize(er.URL,t)||"":Sn(t,"URL")?Tn(t):Ln(g(t))}function rr(t,e){t.__ngContext__=e}function ir(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function or(t){return t.ngOriginalError}function sr(t,...e){t.error(...e)}class ar{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||sr}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(t){return t.ngDebugContext}(t)||this._findContext(or(t)):null}_findOriginalError(t){let e=or(t);for(;e&&or(e);)e=or(e);return e}}const ur=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(q))();function cr(t){return t instanceof Function?t():t}var lr=(()=>((lr=lr||{})[lr.Important=1]="Important",lr[lr.DashCase=2]="DashCase",lr))();function hr(t,e){return(void 0)(t,e)}function dr(t){const e=t[3];return lt(e)?e[3]:e}function fr(t){return gr(t[13])}function pr(t){return gr(t[4])}function gr(t){for(;null!==t&&!lt(t);)t=t[4];return t}function mr(t,e,n,r,i){if(null!=r){let o,s=!1;lt(r)?o=r:ct(r)&&(s=!0,r=r[0]);const a=It(r);0===t&&null!==n?null==i?xr(e,n,a):Cr(e,n,a,i||null,!0):1===t&&null!==n?Cr(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Sr(t,e);r&&function(t,e,n,r){St(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==It(n)&&mr(e,t,r,o,i);for(let s=ut;s<n.length;s++){const i=n[s];Pr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function yr(t,e,n){return St(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function vr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Mt(i,-1)),n.splice(r,1)}function _r(t,e){if(t.length<=ut)return;const n=ut+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&vr(o,r),e>0&&(t[n-1][4]=r[4]);const s=en(t,ut+e);Pr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function br(t,e){if(!(256&e[2])){const n=e[11];St(n)&&n.destroyNode&&Pr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return wr(t[1],t);for(;e;){let n=null;if(ct(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ct(e)&&wr(e[1],e),e=e[3];null===e&&(e=t),ct(e)&&wr(e[1],e),n=e&&e[4]}e=n}}(e)}}function wr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ve)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const r=t[e[n]],i=e[n+1];try{i.call(r)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):It(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&St(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&lt(e[3])){n!==e[3]&&vr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Cr(t,e,n,r,i){St(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function xr(t,e,n){St(t)?t.appendChild(e,n):e.appendChild(n)}function Tr(t,e,n,r,i){null!==r?Cr(t,e,n,r,i):xr(t,e,n)}function Sr(t,e){return St(t)?t.parentNode(e):e.parentNode}function Er(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===R.None||e===R.Emulated)return null}return kt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?kt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Tr(o,i,n[a],s,!1);else Tr(o,i,n,s,!1)}function Ir(t,e){if(null!==e){const n=e.type;if(3&n)return kt(e,t);if(4&n)return Ar(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Ir(t,n);{const n=t[e.index];return lt(n)?Ar(-1,n):It(n)}}if(32&n)return hr(e,t)()||It(t[e.index]);{const n=kr(t,e);return null!==n?Array.isArray(n)?n[0]:Ir(dr(t[16]),n):Ir(t,e.next)}}return null}function kr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ar(t,e){const n=ut+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Ir(t,r)}return e[7]}function Or(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&rr(It(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Or(t,e,n.child,r,i,o,!1),mr(e,t,i,a,o);else if(32&u){const s=hr(n,r);let u;for(;u=s();)mr(e,t,i,u,o);mr(e,t,i,a,o)}else 16&u?Nr(t,e,r,n,i,o):mr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Pr(t,e,n,r,i,o){Or(n,r,t.firstChild,e,i,o,!1)}function Nr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)mr(e,t,i,a[u],o);else Or(t,e,a,s[3],i,o,!0)}function Rr(t,e,n){St(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Dr(t,e,n){St(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Mr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Lr="ng-template";function Ur(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Mr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function qr(t){return 4===t.type&&t.value!==Lr}function Fr(t,e,n){return e===(4!==t.type||n?t.value:Lr)}function jr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(be(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Fr(t,u,n)||""===u&&1===e.length){if(Zr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Ur(t.attrs,c,n)){if(Zr(r))return!1;s=!0}continue}const l=Vr(8&r?"class":u,i,qr(t),n);if(-1===l){if(Zr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Mr(e,c,0)||2&r&&c!==t){if(Zr(r))return!1;s=!0}}}}else{if(!s&&!Zr(r)&&!Zr(u))return!1;if(s&&Zr(u))continue;s=!1,r=u|1&r}}return Zr(r)||s}function Zr(t){return 0==(1&t)}function Vr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Br(t,e,n=!1){for(let r=0;r<e.length;r++)if(jr(t,e[r],n))return!0;return!1}function zr(t,e){return t?":not("+e.trim()+")":e}function Hr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Zr(s)||(e+=zr(o,i),i=""),r=s,o=o||!Zr(r);n++}return""!==i&&(e+=zr(o,i)),e}const Gr={};function Wr(t){Kr(Ft(),qt(),se()+t,Ht())}function Kr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&de(e,r,n)}else{const r=t.preOrderHooks;null!==r&&fe(e,r,0,n)}ae(n)}function Yr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];$t(i),n.contentQueries(2,e[o],o)}}}function Qr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Dt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function $r(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Vt(),s=zt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Lt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Lt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return Bt(o,!0),o}function Jr(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Xr(t,e,n){te(e);try{const r=t.viewQuery;null!==r&&ki(1,r,n);const i=t.template;null!==i&&ni(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Yr(t,e),t.staticViewQueries&&ki(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)xi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,oe()}}function ti(t,e,n,r){const i=e[2];if(256==(256&i))return;te(e);const o=Ht();try{Dt(e),Lt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&ni(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&de(e,n,null)}else{const n=t.preOrderHooks;null!==n&&fe(e,n,0,null),pe(e,0)}if(function(t){for(let e=fr(t);null!==e;e=pr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Mt(r,1),n[2]|=1024}}}(e),function(t){for(let e=fr(t);null!==e;e=pr(e))for(let t=ut;t<e.length;t++){const n=e[t],r=n[1];Nt(n)&&ti(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&Yr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&de(e,n)}else{const n=t.contentHooks;null!==n&&fe(e,n,1),pe(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ae(~r);else{const i=r,o=n[++t],s=n[++t];Kt(o,i),s(2,e[i])}}}finally{ae(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)wi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&ki(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&de(e,n)}else{const n=t.viewHooks;null!==n&&fe(e,n,2),pe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Mt(e[3],-1))}finally{oe()}}function ei(t,e,n,r){const i=e[10],o=!Ht(),s=Pt(e);try{o&&!s&&i.begin&&i.begin(),s&&Xr(t,e,r),ti(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function ni(t,e,n,r,i){const o=se(),s=2&r;try{ae(-1),s&&e.length>at&&Kr(t,e,at,Ht()),n(r,i)}finally{ae(o)}}function ri(t,e,n){Ut()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Oe(n,e),rr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=pt(r);o&&yi(e,n,r);const u=Ve(e,t,a,n);rr(u,e),null!==s&&vi(0,a-i,u,r,0,s),o&&(Ot(n.index,e)[8]=u)}}(t,e,n,kt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Lt.lFrame.currentDirectiveIndex;try{ae(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Yt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||di(r,i)}}finally{ae(-1),Yt(s)}}(t,e,n))}function ii(t,e,n=kt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function oi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=si(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function si(t,e,n,r,i,o,s,a,u,c){const l=at+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Gr);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function ai(t,e,n,r){const i=Oi(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&Pi(t).push(r,i.length-1))}function ui(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ci(t,e,n,r,i,o,s,a){const u=kt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Ri(t,n,c,r,i),dt(e)&&function(t,e){const n=Ot(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,St(o)?o.setProperty(u,r,i):we(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function li(t,e,n,r){let i=!1;if(Ut()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Br(n,s.selectors,!1)&&(i||(i=[]),De(Oe(n,e),t,s.type),pt(s)?(fi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,gi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Jr(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Ce(n.mergedAttrs,c.hostAttrs),mi(t,n,e,u,c),pi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||qr(e)?null:_i(n,i);o.push(c),s=ui(n,u,s),a=ui(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new p("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Ce(n.mergedAttrs,n.attrs),i}function hi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function di(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function fi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function pi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;pt(e)&&(n[""]=t)}}function gi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function mi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=gt(i.type)),s=new ve(o,pt(i),null);t.blueprint[r]=s,n[r]=s,hi(t,e,0,r,Jr(t,n,i.hostVars,Gr),i)}function yi(t,e,n){const r=kt(e,t),i=oi(n),o=t[10],s=Ti(t,Qr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function vi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function _i(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function bi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function wi(t,e){const n=Ot(e,t);if(Nt(n)){const t=n[1];80&n[2]?ti(t,n,t.template,n[8]):n[5]>0&&Ci(n)}}function Ci(t){for(let n=fr(t);null!==n;n=pr(n))for(let t=ut;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];ti(t,e,t.template,e[8])}else e[5]>0&&Ci(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Ot(e[n],t);Nt(r)&&r[5]>0&&Ci(r)}}function xi(t,e){const n=Ot(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Xr(r,n,n[8])}function Ti(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Si(t){for(;t;){t[2]|=64;const e=dr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ei(t,e,n){const r=e[10];r.begin&&r.begin();try{ti(t,e,t.template,n)}catch(i){throw Ni(e,i),i}finally{r.end&&r.end()}}function Ii(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=ir(n),i=r[1];ei(i,r,i.template,n)}}(t[8])}function ki(t,e,n){$t(0),e(t,n)}const Ai=(()=>Promise.resolve(null))();function Oi(t){return t[7]||(t[7]=[])}function Pi(t){return t.cleanup||(t.cleanup=[])}function Ni(t,e){const n=t[9],r=n?n.get(ar,null):null;r&&r.handleError(e)}function Ri(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Di(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=l(i,t):2==o&&(r=l(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Mi=new Ye("INJECTOR",-1);class Li{get(t,e=nn){if(e===nn){const e=new Error(`NullInjectorError: No provider for ${c(t)}!`);throw e.name="NullInjectorError",e}return e}}const Ui=new Ye("Set Injector scope."),qi={},Fi={};let ji;function Zi(){return void 0===ji&&(ji=new Li),ji}function Vi(t,e=null,n=null,r){return new Bi(t,n,e||Zi(),r)}class Bi{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Xe(e,n=>this.processProvider(n,t,e)),Xe([t],t=>this.processInjectorType(t,[],i)),this.records.set(Mi,Hi(void 0,this));const o=this.records.get(Ui);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:c(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=nn,n=I.Default){this.assertNotDestroyed();const r=un(this),i=A(void 0);try{if(!(n&I.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(o=t)||"object"==typeof o&&o instanceof Ye)&&b(t);e=n&&this.injectableDefInScope(n)?Hi(zi(t),qi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&I.Self?Zi():this.parent).get(t,e=n&I.Optional&&e===nn?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(c(t)),r)throw s;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[on]&&i.unshift(e[on]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=c(e);if(Array.isArray(e))i=e.map(c).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):c(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(rn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{A(i),un(r)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(c(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=f(t)))return!1;let r=C(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=C(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Xe(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Xe(r,t=>this.processProvider(t,n,r||j))}}this.injectorDefTypes.add(o);const a=gt(o)||(()=>new o);this.records.set(o,Hi(a,qi));const u=r.providers;if(null!=u&&!s){const e=t;Xe(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Wi(t=f(t))?t:f(t&&t.provide);const i=function(t,e,n){return Gi(t)?Hi(void 0,t.useValue):Hi(function(t,e,n){let r;if(Wi(t)){const e=f(t);return gt(e)||zi(e)}if(Gi(t))r=()=>f(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...hn(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>ln(f(t.useExisting));else{const e=f(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return gt(e)||zi(e);r=()=>new e(...hn(t.deps))}var i;return r}(t),qi)}(t);if(Wi(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Hi(void 0,qi,!0),e.factory=()=>hn(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===qi&&(e.value=Fi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=f(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function zi(t){const e=b(t),n=null!==e?e.factory:gt(t);if(null!==n)return n;if(t instanceof Ye)throw new Error(`Token ${c(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${c(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[x]||t[S]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Hi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Gi(t){return null!==t&&"object"==typeof t&&sn in t}function Wi(t){return"function"==typeof t}const Ki=function(t,e,n){return function(t,e=null,n=null,r){const i=Vi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};class Yi{static create(t,e){return Array.isArray(t)?Ki(t,e,""):Ki(t.providers,t.parent,t.name||"")}}function Qi(t,e){he(ir(t)[1],Zt())}Yi.THROW_IF_NOT_FOUND=nn,Yi.NULL=new Li,Yi.\u0275prov=v({token:Yi,providedIn:"any",factory:()=>ln(Mi)}),Yi.__NG_ELEMENT_ID__=-1;let $i=null;function Ji(){if(!$i){const t=q.Symbol;if(t&&t.iterator)$i=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&($i=n)}}}return $i}function Xi(t){return!!to(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ji()in t)}function to(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function eo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function no(t,e,n,r){const i=qt();return eo(i,Wt(),e)&&(Ft(),function(t,e,n,r,i,o){const s=kt(t,e);!function(t,e,n,r,i,o,s){if(null==o)St(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?g(o):s(o,r||"",i);St(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ue(),i,t,e,n,r)),no}function ro(t,e,n,r){return eo(t,Wt(),n)?e+g(n)+r:Gr}function io(t,e,n,r,i,o,s,a){const u=qt(),c=Ft(),l=t+at,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=$r(e,t,4,s||null,Rt(c,a));li(e,n,l,Rt(c,u)),he(e,l);const h=l.tViews=si(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];Bt(h,!1);const d=u[11].createComment("");Er(c,u,d,h),rr(d,u),Ti(u,u[l]=bi(d,u,d,h)),ft(h)&&ri(c,u,h),null!=s&&ii(u,h,a)}function oo(t){return function(t,e){return t[e]}(Lt.lFrame.contextLView,at+t)}function so(t,e=I.Default){const n=qt();return null===n?ln(t,e):Ue(Zt(),n,f(t),e)}function ao(t,e,n){const r=qt();return eo(r,Wt(),e)&&ci(Ft(),ue(),r,t,e,r[11],n,!1),ao}function uo(t,e,n,r,i){const o=i?"class":"style";Ri(t,n,e.inputs[o],o,r)}function co(t,e,n,r){const i=qt(),o=Ft(),s=at+t,a=i[11],u=i[s]=yr(a,e,Lt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=$r(e,t,2,i,Rt(a,o));return li(e,n,u,Rt(a,s)),null!==u.attrs&&Di(u,u.attrs,!1),null!==u.mergedAttrs&&Di(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];Bt(c,!0);const l=c.mergedAttrs;null!==l&&_e(a,u,l);const h=c.classes;null!==h&&Dr(a,u,h);const d=c.styles;null!==d&&Rr(a,u,d),64!=(64&c.flags)&&Er(o,i,u,c),0===Lt.lFrame.elementDepthCount&&rr(u,i),Lt.lFrame.elementDepthCount++,ft(c)&&(ri(o,i,c),function(t,e,n){if(ht(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&ii(i,c)}function lo(){let t=Zt();zt()?Lt.lFrame.isParent=!1:(t=t.parent,Bt(t,!1));const e=t;Lt.lFrame.elementDepthCount--;const n=Ft();n.firstCreatePass&&(he(n,t),ht(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&uo(n,e,qt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&uo(n,e,qt(),e.stylesWithoutHost,!1)}function ho(t,e,n,r){co(t,e,n,r),lo()}function fo(){return qt()}function po(t){return!!t&&"function"==typeof t.then}function go(t){return!!t&&"function"==typeof t.subscribe}const mo=go;function yo(t,e,n,r){const i=qt(),o=Ft(),s=Zt();return function(t,e,n,r,i,o,s,a){const u=ft(r),c=t.firstCreatePass&&Pi(t),l=Oi(e);let h=!0;if(3&r.type||a){const d=kt(r,e),f=a?a(d):d,p=l.length,g=a?t=>a(It(t[r.index])):r.index;if(St(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=_o(r,e,0,o,!1);const t=n.listen(f,i,o);l.push(o,t),c&&c.push(i,g,p,p+1)}}else o=_o(r,e,0,o,!0),f.addEventListener(i,o,s),l.push(o),c&&c.push(i,g,p,s)}else o=_o(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,!!n,r),yo}function vo(t,e,n,r){try{return!1!==n(r)}catch(i){return Ni(t,i),!1}}function _o(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Ot(t.index,e):e;0==(32&e[2])&&Si(s);let a=vo(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=vo(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function bo(t=1){return function(t){return(Lt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Lt.lFrame.contextLView))[8]}(t)}function wo(t,e,n){return Co(t,"",e,"",n),wo}function Co(t,e,n,r,i){const o=qt(),s=ro(o,e,n,r);return s!==Gr&&ci(Ft(),ue(),o,t,s,o[11],i,!1),Co}function xo(t,e=""){const n=qt(),r=Ft(),i=t+at,o=r.firstCreatePass?$r(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return St(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Er(r,n,s,o),Bt(o,!1)}function To(t){return So("",t,""),To}function So(t,e,n){const r=qt(),i=ro(r,t,e,n);return i!==Gr&&function(t,e,n){const r=function(t,e){return It(e[t])}(e,t);!function(t,e,n){St(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,se(),i),So}function Eo(t,e,n){const r=qt();return eo(r,Wt(),e)&&ci(Ft(),ue(),r,t,e,r[11],n,!0),Eo}const Io=void 0;var ko=["en",[["a","p"],["AM","PM"],Io],[["AM","PM"],Io,Io],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Io,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Io,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Io,"{1} 'at' {0}",Io],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Ao={};function Oo(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=No(e);if(n)return n;const r=e.split("-")[0];if(n=No(r),n)return n;if("en"===r)return ko;throw new Error(`Missing locale data for the locale "${t}".`)}function Po(t){return Oo(t)[Ro.PluralCase]}function No(t){return t in Ao||(Ao[t]=q.ng&&q.ng.common&&q.ng.common.locales&&q.ng.common.locales[t]),Ao[t]}var Ro=(()=>((Ro=Ro||{})[Ro.LocaleId=0]="LocaleId",Ro[Ro.DayPeriodsFormat=1]="DayPeriodsFormat",Ro[Ro.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ro[Ro.DaysFormat=3]="DaysFormat",Ro[Ro.DaysStandalone=4]="DaysStandalone",Ro[Ro.MonthsFormat=5]="MonthsFormat",Ro[Ro.MonthsStandalone=6]="MonthsStandalone",Ro[Ro.Eras=7]="Eras",Ro[Ro.FirstDayOfWeek=8]="FirstDayOfWeek",Ro[Ro.WeekendRange=9]="WeekendRange",Ro[Ro.DateFormat=10]="DateFormat",Ro[Ro.TimeFormat=11]="TimeFormat",Ro[Ro.DateTimeFormat=12]="DateTimeFormat",Ro[Ro.NumberSymbols=13]="NumberSymbols",Ro[Ro.NumberFormats=14]="NumberFormats",Ro[Ro.CurrencyCode=15]="CurrencyCode",Ro[Ro.CurrencySymbol=16]="CurrencySymbol",Ro[Ro.CurrencyName=17]="CurrencyName",Ro[Ro.Currencies=18]="Currencies",Ro[Ro.Directionality=19]="Directionality",Ro[Ro.PluralCase=20]="PluralCase",Ro[Ro.ExtraData=21]="ExtraData",Ro))();const Do="en-US";let Mo=Do;function Lo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Mo=t.toLowerCase().replace(/_/g,"-"))}class Uo{}class qo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${c(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class Fo{}function jo(...t){}function Zo(t,e){return new Bo(kt(t,e))}Fo.NULL=new qo;const Vo=function(){return Zo(Zt(),qt())};let Bo=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Vo,t})();function zo(t){return t instanceof Bo?t.nativeElement:t}class Ho{}let Go=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Wo(),t})();const Wo=function(){const t=qt(),e=Ot(Zt().index,t);return function(t){return t[11]}(ct(e)?e:t)};let Ko=(()=>{class t{}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>null}),t})();class Yo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Qo=new Yo("12.1.3");class $o{constructor(){}supports(t){return Xi(t)}create(t){return new Xo(t)}}const Jo=(t,e)=>e;class Xo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Jo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<rs(n,r,i)?e:n,s=rs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Xi(t))throw new Error(`Error trying to diff '${c(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ji()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new ts(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ns),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ns),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ts{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class es{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ns{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new es,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class is{constructor(){}supports(t){return t instanceof Map||to(t)}create(){return new os}}class os{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||to(t)))throw new Error(`Error trying to diff '${c(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ss(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ss{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function as(){return new us([new $o])}let us=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||as()),deps:[[t,new gn,new pn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=v({token:t,providedIn:"root",factory:as}),t})();function cs(){return new ls([new is])}let ls=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||cs()),deps:[[t,new gn,new pn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=v({token:t,providedIn:"root",factory:cs}),t})();function hs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(It(o)),lt(o))for(let t=ut;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&hs(e[1],e,n,r)}const s=n.type;if(8&s)hs(t,e,n.child,r);else if(32&s){const t=hr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=kr(e,n);if(Array.isArray(t))r.push(...t);else{const n=dr(e[16]);hs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ds{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return hs(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(lt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(_r(t,n),en(e,n))}this._attachedToViewContainer=!1}br(this._lView[1],this._lView)}onDestroy(t){ai(this._lView[1],this._lView,null,t)}markForCheck(){Si(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ei(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Gt(!0);try{Ei(t,e,n)}finally{Gt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Pr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class fs extends ds{constructor(t){super(t),this._view=t}detectChanges(){Ii(this._view)}checkNoChanges(){!function(t){Gt(!0);try{Ii(t)}finally{Gt(!1)}}(this._view)}get context(){return null}}const ps=function(t){return function(t,e,n){if(dt(t)&&!n){const n=Ot(t.index,e);return new ds(n,n)}return 47&t.type?new ds(e[16],e):null}(Zt(),qt(),16==(16&t))};let gs=(()=>{class t{}return t.__NG_ELEMENT_ID__=ps,t})();const ms=[new is],ys=new us([new $o]),vs=new ls(ms),_s=function(){return xs(Zt(),qt())};let bs=(()=>{class t{}return t.__NG_ELEMENT_ID__=_s,t})();const ws=bs,Cs=class extends ws{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Qr(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Xr(e,n,t),new ds(n)}};function xs(t,e){return 4&t.type?new Cs(e,t,Zo(t,e)):null}class Ts{}class Ss{}const Es=function(){return Ns(Zt(),qt())};let Is=(()=>{class t{}return t.__NG_ELEMENT_ID__=Es,t})();const ks=Is,As=class extends ks{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Zo(this._hostTNode,this._hostLView)}get injector(){return new He(this._hostTNode,this._hostLView)}get parentInjector(){const t=Re(this._hostTNode,this._hostLView);if(Te(t)){const e=Ee(t,this._hostLView),n=Se(t);return new He(e[1].data[n+8],e)}return new He(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Os(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ut}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Ts,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(lt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new As(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ut+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ut?(e[4]=n[i],tn(n,ut+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Ar(i,o),a=n[11],u=Sr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Pr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),tn(Ps(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Os(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=_r(this._lContainer,e);n&&(en(Ps(this._lContainer),e),br(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=_r(this._lContainer,e);return n&&null!=en(Ps(this._lContainer),e)?new ds(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Os(t){return t[8]}function Ps(t){return t[8]||(t[8]=[])}function Ns(t,e){let n;const r=e[t.index];if(lt(r))n=r;else{let i;if(8&t.type)i=It(r);else{const n=e[11];i=n.createComment("");const r=kt(t,e);Cr(n,Sr(n,r),i,function(t,e){return St(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=bi(r,e,i,t),Ti(e,n)}return new As(n,t,e)}const Rs={};class Ds extends Fo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=ot(t);return new Us(e,this.ngModule)}}function Ms(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ls=new Ye("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ur});class Us extends Uo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Hr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Ms(this.componentDef.inputs)}get outputs(){return Ms(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Rs,i);return o!==Rs||r===Rs?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ho,Et),s=i.get(Ko,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(St(t))return t.selectRootElement(e,n===R.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):yr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?Ct:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:ur,clean:Ai,playerHandler:null,flags:0},d=si(0,null,null,1,0,null,null,null,null,null),f=Qr(null,d,h,l,null,null,o,a,s,i);let p,g;te(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=$r(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Di(a,u,!0),null!==t&&(_e(i,t,u),null!==a.classes&&Dr(i,t,a.classes),null!==a.styles&&Rr(i,t,a.styles)));const c=r.createRenderer(t,e),l=Qr(n,oi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(De(Oe(a,n),s,e.type),fi(s,a),gi(a,n.length,1)),Ti(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)_e(a,c,["ng-version",Qo.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Zr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&_e(a,c,t),e&&e.length>0&&Dr(a,c,e.join(" "))}if(g=At(d,at),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Zt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),mi(t,r,e,Jr(t,e,1,null),n));const i=Ve(e,t,r.directiveStart,r);rr(i,e);const o=kt(r,e);return o&&rr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Zt();e.contentQueries(1,s,t.directiveStart)}const a=Zt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ae(a.index),hi(n[1],a,0,a.directiveStart,a.directiveEnd,e),di(e,s)),s}(t,this.componentDef,f,h,[Qi]),Xr(d,f,null)}finally{oe()}return new qs(this.componentType,p,Zo(g,f),f,g)}}class qs extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new fs(r),this.componentType=t}get injector(){return new He(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Fs=new Map;class js extends Ts{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ds(this);const n=st(t),r=t[H]||null;r&&Lo(r),this._bootstrapComponents=cr(n.bootstrap),this._r3Injector=Vi(t,e,[{provide:Ts,useValue:this},{provide:Fo,useValue:this.componentFactoryResolver}],c(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Yi.THROW_IF_NOT_FOUND,n=I.Default){return t===Yi||t===Ts||t===Mi?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Zs extends Ss{constructor(t){super(),this.moduleType=t,null!==st(t)&&function(t){const e=new Set;!function t(n){const r=st(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${c(e)} vs ${c(e.name)}`)}(i,Fs.get(i),n),Fs.set(i,n));const o=cr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new js(this.moduleType,t)}}function Vs(t){return e=>{setTimeout(t,void 0,e)}}const Bs=class extends r.xQ{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Vs(u),a&&(a=Vs(a)),c&&(c=Vs(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.w&&t.add(l),l}};function zs(){return this._results[Ji()]()}class Hs{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Ji(),n=Hs.prototype;n[e]||(n[e]=zs)}get changes(){return this._changes||(this._changes=new Bs)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Je(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Gs{constructor(t){this.queryList=t,this.matches=null}clone(){return new Gs(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ws{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Ws(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==ia(t,e).matches&&this.queries[e].setDirty()}}class Ks{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Ys{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ys(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Qs{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Qs(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,$s(e,i)),this.matchTNodeWithReadOption(t,e,Ze(e,t,i,!1,!1))}else n===bs?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ze(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Bo||r===Is||r===bs&&4&e.type)this.addMatch(e.index,-2);else{const n=Ze(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function $s(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Js(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Zo(t,e):4&t.type?xs(t,e):null}(e,t):-2===n?function(t,e,n){return n===Bo?Zo(e,t):n===bs?xs(e,t):n===Is?Ns(e,t):void 0}(t,e,r):Ve(t,t[1],n,e)}function Xs(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Js(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function ta(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Xs(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ut;t<s.length;t++){const e=s[t];e[17]===e[3]&&ta(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];ta(n[1],n,i,r)}}}}}return r}function ea(t){const e=qt(),n=Ft(),r=Qt();$t(r+1);const i=ia(n,r);if(t.dirty&&Pt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?ta(n,e,r,[]):Xs(n,e,i,r);t.reset(o,zo),t.notifyOnChanges()}return!0}return!1}function na(t,e,n,r){const i=Ft();if(i.firstCreatePass){const o=Zt();(function(t,e,n){null===t.queries&&(t.queries=new Ys),t.queries.track(new Qs(e,n))})(i,new Ks(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Hs(4==(4&n));ai(t,e,r,r.destroy),null===e[19]&&(e[19]=new Ws),e[19].queries.push(new Gs(r))}(i,qt(),n)}function ra(){return t=qt(),e=Qt(),t[19].queries[e].queryList;var t,e}function ia(t,e){return t.queries.getByIndex(e)}const oa=new Ye("Application Initializer");let sa=(()=>{class t{constructor(t){this.appInits=t,this.resolve=jo,this.reject=jo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(po(e))t.push(e);else if(mo(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(ln(oa,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const aa=new Ye("AppId"),ua={provide:aa,useFactory:function(){return`${ca()}${ca()}${ca()}`},deps:[]};function ca(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const la=new Ye("Platform Initializer"),ha=new Ye("Platform ID"),da=new Ye("appBootstrapListener");let fa=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const pa=new Ye("LocaleId"),ga=new Ye("DefaultCurrencyCode");class ma{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const ya=function(t){return new Zs(t)},va=ya,_a=function(t){return Promise.resolve(ya(t))},ba=function(t){const e=ya(t),n=cr(st(t).declarations).reduce((t,e)=>{const n=ot(e);return n&&t.push(new Us(n)),t},[]);return new ma(e,n)},wa=ba,Ca=function(t){return Promise.resolve(ba(t))};let xa=(()=>{class t{constructor(){this.compileModuleSync=va,this.compileModuleAsync=_a,this.compileModuleAndAllComponentsSync=wa,this.compileModuleAndAllComponentsAsync=Ca}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Ta=(()=>Promise.resolve(0))();function Sa(t){"undefined"==typeof Zone?Ta.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ea{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bs(!1),this.onMicrotaskEmpty=new Bs(!1),this.onStable=new Bs(!1),this.onError=new Bs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=q.requestAnimationFrame,e=q.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(q,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Aa(t),t.isCheckStableRunning=!0,ka(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Aa(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Oa(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Pa(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Oa(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Pa(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Aa(t),ka(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ea.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ea.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Ia,jo,jo);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Ia={};function ka(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Aa(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Oa(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Pa(t){t._nesting--,ka(t)}class Na{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bs,this.onMicrotaskEmpty=new Bs,this.onStable=new Bs,this.onError=new Bs}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Ra=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ea.assertNotInAngularZone(),Sa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Sa(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(ln(Ea))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),Da=(()=>{class t{constructor(){this._applications=new Map,qa.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return qa.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();class Ma{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function La(t){qa=t}let Ua,qa=new Ma,Fa=!0,ja=!1;function Za(){return ja=!0,Fa}function Va(){if(ja)throw new Error("Cannot enable prod mode after platform setup.");Fa=!1}const Ba=new Ye("AllowMultipleToken");class za{constructor(t,e){this.name=t,this.token=e}}function Ha(t,e,n=[]){const r=`Platform: ${e}`,i=new Ye(r);return(e=[])=>{let o=Ga();if(!o||o.injector.get(Ba,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ui,useValue:"platform"});!function(t){if(Ua&&!Ua.destroyed&&!Ua.injector.get(Ba,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ua=t.get(Wa);const e=t.get(la,null);e&&e.forEach(t=>t())}(Yi.create({providers:t,name:r}))}return function(t){const e=Ga();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Ga(){return Ua&&!Ua.destroyed?Ua:null}let Wa=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Na:("zone.js"===t?void 0:t)||new Ea({enableLongStackTrace:Za(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Ea,useValue:n}];return n.run(()=>{const e=Yi.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(ar,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Qa(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return po(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(sa);return t.runInitializers(),t.donePromise.then(()=>(Lo(i.injector.get(pa,Do)||Do),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Ka({},e);return function(t,e,n){const r=new Zs(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Ya);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${c(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(ln(Yi))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function Ka(t,e){return Array.isArray(e)?e.reduce(Ka,t):Object.assign(Object.assign({},t),e)}let Ya=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ea.assertNotInAngularZone(),Sa(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ea.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=(0,s.T)(u,c.pipe((0,a.B)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Uo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Ts),i=n.create(Yi.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Ra,null),a=s&&i.injector.get(Da);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Qa(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Qa(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(da,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(ln(Ea),ln(Yi),ln(ar),ln(Fo),ln(sa))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function Qa(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class $a{}class Ja{}const Xa={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let tu=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Xa}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n(8255)(e).then(t=>t[r]).then(t=>eu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>eu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(ln(xa),ln(Ja,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function eu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const nu=function(t){return null},ru=Ha(null,"core",[{provide:ha,useValue:"unknown"},{provide:Wa,deps:[Yi]},{provide:Da,deps:[]},{provide:fa,deps:[]}]),iu=[{provide:Ya,useClass:Ya,deps:[Ea,Yi,ar,Fo,sa]},{provide:Ls,deps:[Ea],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:sa,useClass:sa,deps:[[new pn,oa]]},{provide:xa,useClass:xa,deps:[]},ua,{provide:us,useFactory:function(){return ys},deps:[]},{provide:ls,useFactory:function(){return vs},deps:[]},{provide:pa,useFactory:function(t){return Lo(t=t||"undefined"!=typeof $localize&&$localize.locale||Do),t},deps:[[new fn(pa),new pn,new gn]]},{provide:ga,useValue:"USD"}];let ou=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(ln(Ya))},t.\u0275mod=tt({type:t}),t.\u0275inj=_({providers:iu}),t})()},57:(t,e,n)=>{"use strict";n.d(e,{hO:()=>E,xv:()=>_,Dh:()=>v,HU:()=>f,GT:()=>y,sI:()=>T,on:()=>w,ss:()=>p,pX:()=>m,yq:()=>C});var r=n(7771),i=n(3637),o=n(3342),s=n(3101),a=n(309),u=n(7716),c=n(2329);function l(){}t=n.hmd(t);class h{constructor(t,e=r.N){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe((0,o.b)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.z))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe((0,s.R)(t.outsideAngular),(0,a.QV)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.OlP("angularfire2.app.options"),_=new u.OlP("angularfire2.app.nameOrConfig"),b=new u.GfV("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.Z.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.Z.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&x("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const C=()=>{x("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},x=(t,...e)=>{(0,u.X6Q)()&&"undefined"!=typeof console&&console[t](...e)};function T(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&x("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:w,deps:[v,u.R0b,[new u.FiY,_]]};let E=(()=>{class t{constructor(t){c.Z.registerVersion("angularfire",b.full,t.toString()),c.Z.registerVersion("angular",u.q4F.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:_,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.LFG(u.Lbi))},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[S]}),t})()},6232:(t,e,n)=>{"use strict";n.d(e,{Z:()=>w});var r,i,o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=n(3701),a=n(8308),u=n(300),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.LL("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.wA(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.5.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!(0,s.r3)(e,t=t||d))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=o(o({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var _=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),_.apply(void 0,t)};var b=m;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.21",void 0),t.registerVersion("fire-js","")}(b);const w=b},8308:(t,e,n)=>{"use strict";n.d(e,{wA:()=>u,H0:()=>h,zt:()=>l});var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function s(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}var a=n(3701),u=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),c="[DEFAULT]",l=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=c);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new a.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r({identifier:c,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:c})}catch(d){}try{for(var r=i(this.instancesDeferred.entries()),s=r.next();!s.done;s=r.next()){var a=o(s.value,2),u=a[1],l=this.normalizeInstanceIdentifier(a[0]);try{var h=this.getOrInitializeService({instanceIdentifier:l});u.resolve(h)}catch(d){}}}catch(f){e={error:f}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=c),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return t=this,void 0,n=function(){var t;return function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(s(s([],o(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),o(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})},new((e=void 0)||(e=Promise))(function(r,i){function o(t){try{a(n.next(t))}catch(e){i(e)}}function s(t){try{a(n.throw(t))}catch(e){i(e)}}function a(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e(function(t){t(n)})).then(o,s)}a((n=n.apply(t,[])).next())});var t,e,n},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=c),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.instanceIdentifier,s=t.options,a=void 0===s?{}:s,u=this.normalizeInstanceIdentifier(void 0===r?c:r);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var h=i(this.instancesDeferred.entries()),d=h.next();!d.done;d=h.next()){var f=o(d.value,2),p=f[1];u===this.normalizeInstanceIdentifier(f[0])&&p.resolve(l)}}catch(g){e={error:g}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(l,u),l},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r;try{for(var o=i(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===c?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:c:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),h=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new l(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},514:(t,e,n)=>{"use strict";var r=n(6232),i=n(8308),o=n(3701),s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(O){i={error:O}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}var d=n(300);t=n.hmd(t);var f="";function p(t){f=t}var g,m=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,o.Pz)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,o.cI)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),y=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return(0,o.r3)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),v=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new m(e)}}catch(n){}return new y},_=v("localStorage"),b=v("sessionStorage"),w=new d.Yd("@firebase/database"),C=(g=1,function(){return g++}),x=function(t){var e=(0,o.dS)(t),n=new o.gQ;n.update(e);var r=n.digest();return o.US.encodeByteArray(r)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=T.apply(null,i):n+="object"==typeof i?(0,o.Pz)(i):i,n+=" "}return n},S=null,E=!0,I=function(t,e){(0,o.hu)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(w.logLevel=d.in.VERBOSE,S=w.log.bind(w),e&&b.set("logging_enabled",!0)):"function"==typeof t?S=t:(S=null,b.remove("logging_enabled"))},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===E&&(E=!1,null===S&&!0===b.get("logging_enabled")&&I(!0)),S){var n=T.apply(null,t);S(n)}},A=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];k.apply(void 0,h([t],l(e)))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+T.apply(void 0,h([],l(t)));w.error(n)},P=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+T.apply(void 0,h([],l(t)));throw w.error(n),new Error(n)},N=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+T.apply(void 0,h([],l(t)));w.warn(n)},R=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},D="[MIN_NAME]",M="[MAX_NAME]",L=function(t,e){if(t===e)return 0;if(t===D||e===M)return-1;if(e===D||t===M)return 1;var n=z(t),r=z(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},U=function(t,e){return t===e?0:t<e?-1:1},q=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+(0,o.Pz)(e))},F=function(t){if("object"!=typeof t||null===t)return(0,o.Pz)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=(0,o.Pz)(e[i]),r+=":",r+=F(t[e[i]]);return r+"}"},j=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function Z(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var V=function(t){var e,n,r,i,s;(0,o.hu)(!R(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},B=new RegExp("^-?(0*)\\d{1,10}$"),z=function(t){if(B.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},H=function(t){try{t()}catch(e){setTimeout(function(){throw N("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},G=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},W=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){return this.appCheck?this.appCheck.getToken(t):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){N('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),K=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(k("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';N(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Y=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),Q=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$="websocket",J="long_polling",X=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&_.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function tt(t,e,n){var r;if((0,o.hu)("string"==typeof e,"typeof type must == string"),(0,o.hu)("object"==typeof n,"typeof params must == object"),e===$)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==J)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return Z(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var et=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),(0,o.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return(0,o.p$)(this.counters_)},t}(),nt={},rt={};function it(t){var e=t.toString();return nt[e]||(nt[e]=new et),nt[e]}var ot=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&H(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),st="start",at="close",ut=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=A(t),this.stats_=it(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),tt(e,J,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ot(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if((0,o.Yr)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new ct(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=l(t,5),i=r[0],o=r[1],s=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===st)n.id=o,n.password=s;else{if(i!==at)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=l(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&Q.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!((0,o.Yr)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=(0,o.h$)(e),r=j(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!(0,o.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=(0,o.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),ct=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,o.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=C(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){k("frame writing exception"),u.stack&&k(u.stack),k(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||k("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;(0,o.Yr)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){k("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),lt=null;"undefined"!=typeof MozWebSocket?lt=MozWebSocket:"undefined"!=typeof WebSocket&&(lt=WebSocket);var ht=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=A(this.connId),this.stats_=it(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return!(0,o.Yr)()&&"undefined"!=typeof location&&location.hostname&&Q.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),tt(t,$,i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_.set("previous_websocket_failure",!0);try{if((0,o.Yr)()){var r={headers:{"User-Agent":"Firebase/5/"+f+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new lt(this.connURL,[],r)}else this.mySock=new lt(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==lt&&!t.forceDisallow_},t.previouslyFailed=function(){return _.isInMemoryStorage||!0===_.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){_.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=(0,o.cI)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if((0,o.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=(0,o.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=j(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),dt=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[ut,ht]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ht&&ht.isAvailable(),o=i&&!ht.previouslyFailed();if(e.webSocketOnly&&(i||N("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[ht];else{var s=this.transports_=[];try{for(var a=c(t.ALL_TRANSPORTS),u=a.next();!u.done;u=a.next()){var l=u.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ft=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=A("c:"+this.id+":"),this.transportManager_=new dt(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=G(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=q("t",t),n=q("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=q("t",t),n=q("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=q("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&N("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),G(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):G(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),pt=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),gt=function(){function t(t){this.allowedEvents_=t,this.listeners_={},(0,o.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=h([],l(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){(0,o.hu)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),mt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,o.uI)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return a(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(gt),yt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function vt(){return new yt("")}function _t(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function bt(t){return t.pieces_.length-t.pieceNum_}function wt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new yt(t.pieces_,e)}function Ct(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function xt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Tt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new yt(e,0)}function St(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof yt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new yt(n,0)}function Et(t){return t.pieceNum_>=t.pieces_.length}function It(t,e){var n=_t(t),r=_t(e);if(null===n)return e;if(n===r)return It(wt(t),wt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function kt(t,e){for(var n=xt(t,0),r=xt(e,0),i=0;i<n.length&&i<r.length;i++){var o=L(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function At(t,e){if(bt(t)!==bt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Ot(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(bt(t)>bt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Pt=function(t,e){this.errorPrefix_=e,this.parts_=xt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=(0,o.ug)(this.parts_[n]);Nt(this)};function Nt(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Rt(t))}function Rt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Dt,Mt,Lt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return a(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return(0,o.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(gt),Ut=1e3,qt=function(t){function e(n,r,i,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=A("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Ut,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!(0,o.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return h.scheduleConnect_(0),Lt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&mt.getInstance().on("online",h.onOnline_,h),h}return a(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_((0,o.Pz)(i)),(0,o.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.BH,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,o.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&(0,o.r3)(t,"w")){var n=(0,o.DV)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();N("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||(0,o.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=(0,o.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,o.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+(0,o.Pz)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+(0,o.Pz)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;(0,o.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ut,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ut,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ut),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return t=this,void 0,r=function(){var t,n,r,i,s,a,u,c,h,d,f,p,g,m=this;return function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,a=!1,u=null,this.realtime_={close:c=function(){u?u.close():(a=!0,r())},sendRequest:function(t){(0,o.hu)(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=l.apply(void 0,[y.sent(),2]),f=d[0],p=d[1],a?k("getToken() completed but was canceled"):(k("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,u=new ft(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){N(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")},s)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&N(g),c()),[3,4];case 4:return[2]}})},new((n=void 0)||(n=Promise))(function(e,i){function o(t){try{a(r.next(t))}catch(e){i(e)}}function s(t){try{a(r.throw(t))}catch(e){i(e)}}function a(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n(function(t){t(r)})).then(o,s)}a((r=r.apply(t,[])).next())});var t,n,r},e.prototype.interrupt=function(t){k("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){k("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,o.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ut,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return F(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new yt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){k("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){k("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=c(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,c(s.values())),u=a.next();!u.done;u=a.next())this.sendListen_(u.value)}catch(d){n={error:d}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";(0,o.Yr)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+f.replace(/\./g,"-")]=1,(0,o.uI)()?t["framework.cordova"]=1:(0,o.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=mt.getInstance().currentlyOnline();return(0,o.xb)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(pt),Ft=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),jt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Ft(D,t),r=new Ft(D,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Ft.MIN},t}(),Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Dt},set:function(t){Dt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return L(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw(0,o.g5)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Ft.MIN},e.prototype.maxPost=function(){return new Ft(M,Dt)},e.prototype.makePost=function(t,e){return(0,o.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Ft(t,Dt)},e.prototype.toString=function(){return".key"},e}(jt),Vt=new Zt,Bt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),zt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Gt.EMPTY_NODE,this.right=null!=o?o:Gt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Gt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Gt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ht=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new zt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Gt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,zt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,zt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Bt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Bt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Bt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Bt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ht,t}();function Wt(t,e){return L(t.name,e.name)}function Kt(t,e){return L(t,e)}var Yt,Qt,$t,Jt,Xt,te=function(t){return"number"==typeof t?"number:"+V(t):"string:"+t},ee=function(t){if(t.isLeafNode()){var e=t.val();(0,o.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,o.r3)(e,".sv"),"Priority must be a string or number.")}else(0,o.hu)(t===Mt||t.isEmpty(),"priority of unexpected type.");(0,o.hu)(t===Mt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ne=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,(0,o.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ee(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Yt},set:function(t){Yt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return Et(e)?this:".priority"===_t(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=_t(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,o.hu)(".priority"!==r||1===bt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(wt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+te(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?V(this.value_):this.value_,this.lazyHash_=x(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:((0,o.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return(0,o.hu)(i>=0,"Unknown leaf type: "+n),(0,o.hu)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),re=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?L(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Ft.MIN},e.prototype.maxPost=function(){return new Ft(M,new ne("[PRIORITY-POST]",$t))},e.prototype.makePost=function(t,e){var n=Qt(t);return new Ft(e,new ne("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(jt)),ie=Math.log(2),oe=function(){function t(t){this.count=parseInt(Math.log(t+1)/ie,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),se=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new zt(s,o.node,zt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new zt(s,o.node,zt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new zt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,zt.BLACK):(a(h,zt.BLACK),a(h,zt.RED))}return o}(new oe(t.length));return new Gt(r||e,o)},ae={},ue=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return(0,o.hu)(ae&&re,"ChildrenNode.ts has not been loaded"),Jt=Jt||new t({".priority":ae},{".priority":re})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=(0,o.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Gt?e:null},t.prototype.hasIndex=function(t){return(0,o.r3)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){(0,o.hu)(e!==Vt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],s=!1,a=n.getIterator(Ft.Wrap),c=a.getNext();c;)s=s||e.isDefinedOn(c.node),i.push(c),c=a.getNext();r=s?se(i,e.getCompare()):ae;var l=e.toString(),h=u({},this.indexSet_);h[l]=e;var d=u({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t((0,o.UI)(this.indexes_,function(t,i){var s=(0,o.DV)(r.indexSet_,i);if((0,o.hu)(s,"Missing index implementation for "+i),t===ae){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Ft.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),se(a,s.getCompare())}return ae}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Ft(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t((0,o.UI)(this.indexes_,function(t){if(t===ae)return t;var r=n.get(e.name);return r?t.remove(new Ft(e.name,r)):t}),this.indexSet_)},t}(),ce=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ee(this.priorityNode_),this.children_.isEmpty()&&(0,o.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Xt||(Xt=new t(new Gt(Kt),null,ue.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Xt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Xt:e},t.prototype.getChild=function(t){var e=_t(t);return null===e?this:this.getImmediateChild(e).getChild(wt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if((0,o.hu)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Ft(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Xt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=_t(t);if(null===n)return e;(0,o.hu)(".priority"!==_t(t)||1===bt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(wt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(re,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+te(this.getPriority().val())+":"),this.forEachChild(re,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":x(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Ft(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Ft(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Ft(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Ft.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Ft.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===le?-1:0},t.prototype.withIndex=function(e){if(e===Vt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Vt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(re),r=e.getIterator(re),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Vt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),le=new(function(t){function e(){return t.call(this,new Gt(Kt),ce.EMPTY_NODE,ue.Default)||this}return a(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ce.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ce));function he(t,e){if(void 0===e&&(e=null),null===t)return ce.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),(0,o.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new ne(t,he(e));if(t instanceof Array){var n=ce.EMPTY_NODE;return Z(t,function(e,r){if((0,o.r3)(t,e)&&"."!==e.substring(0,1)){var i=he(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(he(e))}var r=[],i=!1;if(Z(t,function(t,e){if("."!==t.substring(0,1)){var n=he(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Ft(t,n)))}}),0===r.length)return ce.EMPTY_NODE;var s=se(r,Wt,function(t){return t.name},Kt);if(i){var a=se(r,re.getCompare());return new ce(s,he(e),new ue({".priority":a},{".priority":re}))}return new ce(s,he(e),ue.Default)}Object.defineProperties(Ft,{MIN:{value:new Ft(D,ce.EMPTY_NODE)},MAX:{value:new Ft(M,le)}}),Zt.__EMPTY_NODE=ce.EMPTY_NODE,ne.__childrenNodeConstructor=ce,Mt=le,$t=le,Qt=he;var de,fe,pe=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,(0,o.hu)(!Et(e)&&".priority"!==_t(e),"Can't create PathIndex with empty path or .priority key"),n}return a(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?L(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=he(t),r=ce.EMPTY_NODE.updateChild(this.indexPath_,n);return new Ft(e,r)},e.prototype.maxPost=function(){var t=ce.EMPTY_NODE.updateChild(this.indexPath_,le);return new Ft(M,t)},e.prototype.toString=function(){return xt(this.indexPath_,0).join("/")},e}(jt),ge=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?L(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Ft.MIN},e.prototype.maxPost=function(){return Ft.MAX},e.prototype.makePost=function(t,e){var n=he(t);return new Ft(e,n)},e.prototype.toString=function(){return".value"},e}(jt)),me="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ye=(de=0,fe=[],function(t){var e,n=t===de;de=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=me.charAt(t%64),t=Math.floor(t/64);(0,o.hu)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===fe[e];e--)fe[e]=0;fe[e]++}else for(e=0;e<12;e++)fe[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=me.charAt(fe[e]);return(0,o.hu)(20===i.length,"nextPushId: Length should be 20."),i}),ve=function(t){if("2147483647"===t)return"-";var e=z(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return M;var o=me.charAt(me.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},_e=function(t){if("-2147483648"===t)return D;var e=z(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=me.charAt(me.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function be(t){return{type:"value",snapshotNode:t}}function we(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ce(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function xe(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Te=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){(0,o.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(Ce(e,a)):(0,o.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(we(e,n)):s.trackChildChange(xe(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(re,function(t,r){e.hasChild(t)||n.trackChildChange(Ce(t,r))}),e.isLeafNode()||e.forEachChild(re,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(xe(e,r,i))}else n.trackChildChange(we(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ce.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),Se=function(){function t(e){this.indexedFilter_=new Te(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Ft(e,n))||(n=ce.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ce.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ce.EMPTY_NODE);var i=this;return e.forEachChild(re,function(t,e){i.matches(new Ft(t,e))||(r=r.updateImmediateChild(t,ce.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Ee=function(){function t(t){this.rangedFilter_=new Se(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Ft(e,n))||(n=ce.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ce.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ce.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ce.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ce.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;(0,o.hu)(u.numChildren()===this.limit_,"");var c=new Ft(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(xe(e,n,d)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Ce(e,d));var g=u.updateImmediateChild(e,ce.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(we(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(Ce(l.name,l.node)),i.trackChildChange(we(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ce.EMPTY_NODE)):t},t}(),Ie=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=re}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return(0,o.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:D},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return(0,o.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:M},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return(0,o.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===re},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function ke(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ae(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Oe(t,e){var n=t.copy();return n.index_=e,n}function Pe(t){var e,n={};return t.isDefault()||(t.index_===re?e="$priority":t.index_===ge?e="$value":t.index_===Vt?e="$key":((0,o.hu)(t.index_ instanceof pe,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=(0,o.Pz)(e),t.startSet_&&(n.startAt=(0,o.Pz)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+(0,o.Pz)(t.indexStartName_))),t.endSet_&&(n.endAt=(0,o.Pz)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+(0,o.Pz)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Ne(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==re&&(e.i=t.index_.toString()),e}var Re=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=A("p:rest:"),o.listens_={},o}return a(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:((0,o.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Pe(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),(0,o.DV)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Pe(t._queryParams),r=t._path.toString(),i=new o.BH;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(i){var s=l(i,2),a=s[0],u=s[1];a&&a.accessToken&&(e.auth=a.accessToken),u&&u.token&&(e.ac=u.token);var c=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+(0,o.xO)(e);r.log_("Sending REST request for "+c);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+c+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=(0,o.cI)(h.responseText)}catch(e){N("Failed to parse JSON response for "+c+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&N("Got unsuccessful REST response for "+c+" Status: "+h.status),n(h.status);n=null}},h.open("GET",c,!0),h.send()})},e}(pt),De=function(){function t(){this.rootNode_=ce.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Me(){return{value:null,children:new Map}}function Le(t,e,n){if(Et(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=_t(e);t.children.has(r)||t.children.set(r,Me()),Le(t.children.get(r),e=wt(e),n)}}function Ue(t,e){if(Et(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(re,function(e,n){Le(t,new yt(e),n)}),Ue(t,e)}if(t.children.size>0){var r=_t(e);return e=wt(e),t.children.has(r)&&Ue(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function qe(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){qe(r,new yt(e.toString()+"/"+t),n)})}var Fe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=u({},t);return this.last_&&Z(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),je=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Fe(t);var n=1e4+2e4*Math.random();G(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Z(e,function(e,i){i>0&&(0,o.r3)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),G(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Ze=(()=>(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ze||(Ze={})),Ze))();function Ve(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Be,ze=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ze.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(Et(this.path)){if(null!=this.affectedTree.value)return(0,o.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new yt(e));return new t(vt(),n,this.revert)}return(0,o.hu)(_t(this.path)===e,"operationForChild called for unrelated child."),new t(wt(this.path),this.affectedTree,this.revert)},t}(),He=function(){function t(t,e){this.source=t,this.path=e,this.type=Ze.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return Et(this.path)?new t(this.source,vt()):new t(this.source,wt(this.path))},t}(),Ge=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ze.OVERWRITE}return t.prototype.operationForChild=function(e){return Et(this.path)?new t(this.source,vt(),this.snap.getImmediateChild(e)):new t(this.source,wt(this.path),this.snap)},t}(),We=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ze.MERGE}return t.prototype.operationForChild=function(e){if(Et(this.path)){var n=this.children.subtree(new yt(e));return n.isEmpty()?null:n.value?new Ge(this.source,vt(),n.value):new t(this.source,vt(),n)}return(0,o.hu)(_t(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,wt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ke=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(Et(t))return this.isFullyInitialized()&&!this.filtered_;var e=_t(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ye=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function Qe(t,e,n,r,i,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw(0,o.g5)("Should only compare child_ events.");var r=new Ft(e.childName,e.snapshotNode),i=new Ft(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function $e(t,e){return{eventCache:t,serverCache:e}}function Je(t,e,n,r){return $e(new Ke(e,n,r),t.serverCache)}function Xe(t,e,n,r){return $e(t.eventCache,new Ke(e,n,r))}function tn(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function en(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var nn=function(){function t(t,e){void 0===e&&(Be||(Be=new Gt(U)),e=Be),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return Z(e,function(t,e){n=n.set(new yt(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:vt(),value:this.value};if(Et(t))return null;var n=_t(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(wt(t),e);return null!=i?{path:St(new yt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(Et(e))return this;var n=_t(e),r=this.children.get(n);return null!==r?r.subtree(wt(e)):new t(null)},t.prototype.set=function(e,n){if(Et(e))return new t(n,this.children);var r=_t(e),i=(this.children.get(r)||new t(null)).set(wt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(Et(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=_t(e),r=this.children.get(n);if(r){var i=r.remove(wt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(Et(t))return this.value;var e=_t(t),n=this.children.get(e);return n?n.get(wt(t)):null},t.prototype.setTree=function(e,n){if(Et(e))return n;var r,i=_t(e),o=(this.children.get(i)||new t(null)).setTree(wt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(vt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(St(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,vt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(Et(t))return null;var i=_t(t),o=this.children.get(i);return o?o.findOnPath_(wt(t),St(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,vt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(Et(e))return this;this.value&&r(n,this.value);var i=_t(e),o=this.children.get(i);return o?o.foreachOnPath_(wt(e),St(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(vt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(St(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),rn=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new nn(null))},t}();function on(t,e,n){if(Et(e))return new rn(new nn(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=It(i,e);return o=o.updateChild(s,n),new rn(t.writeTree_.set(i,o))}var a=new nn(n),u=t.writeTree_.setTree(e,a);return new rn(u)}function sn(t,e,n){var r=t;return Z(n,function(t,n){r=on(r,St(e,t),n)}),r}function an(t,e){if(Et(e))return rn.empty();var n=t.writeTree_.setTree(e,new nn(null));return new rn(n)}function un(t,e){return null!=cn(t,e)}function cn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(It(n.path,e)):null}function ln(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(re,function(t,n){e.push(new Ft(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new Ft(t,n.value))}),e}function hn(t,e){if(Et(e))return t;var n=cn(t,e);return new rn(null!=n?new nn(n):t.writeTree_.subtree(e))}function dn(t){return t.writeTree_.isEmpty()}function fn(t,e){return pn(vt(),t.writeTree_,e)}function pn(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?((0,o.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=pn(St(t,e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(St(t,".priority"),r)),n}function gn(t,e){return En(e,t)}function mn(t,e){if(t.snap)return Ot(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Ot(St(t.path,n),e))return!0;return!1}function yn(t){return t.visible}function vn(t,e,n){for(var r=rn.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)Ot(n,a)?r=on(r,u=It(n,a),s.snap):Ot(a,n)&&(u=It(a,n),r=on(r,vt(),s.snap.getChild(u)));else{if(!s.children)throw(0,o.g5)("WriteRecord should have .snap or .children");if(Ot(n,a))r=sn(r,u=It(n,a),s.children);else if(Ot(a,n))if(Et(u=It(a,n)))r=sn(r,vt(),s.children);else{var c=(0,o.DV)(s.children,_t(u));if(c){var l=c.getChild(wt(u));r=on(r,vt(),l)}}}}}return r}function _n(t,e,n,r,i){if(r||i){var o=hn(t.visibleWrites,e);return!i&&dn(o)?n:i||null!=n||un(o,vt())?fn(vn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Ot(t.path,e)||Ot(e,t.path))},e),n||ce.EMPTY_NODE):null}var s=cn(t.visibleWrites,e);if(null!=s)return s;var a=hn(t.visibleWrites,e);return dn(a)?n:null!=n||un(a,vt())?fn(a,n||ce.EMPTY_NODE):null}function bn(t,e,n,r){return _n(t.writeTree,t.treePath,e,n,r)}function wn(t,e){return function(t,e,n){var r=ce.EMPTY_NODE,i=cn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(re,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=hn(t.visibleWrites,e);return n.forEachChild(re,function(t,e){var n=fn(hn(o,new yt(t)),e);r=r.updateImmediateChild(t,n)}),ln(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return ln(hn(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function Cn(t,e,n,r){return function(t,e,n,r,i){(0,o.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=St(e,n);if(un(t.visibleWrites,s))return null;var a=hn(t.visibleWrites,s);return dn(a)?i.getChild(n):fn(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function xn(t,e){return function(t,e){return cn(t.visibleWrites,e)}(t.writeTree,St(t.treePath,e))}function Tn(t,e,n){return function(t,e,n,r){var i=St(e,n),o=cn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?fn(hn(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function Sn(t,e){return En(St(t.treePath,e),t.writeTree)}function En(t,e){return{treePath:t,writeTree:e}}var In=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;(0,o.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,o.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,xe(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Ce(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,we(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw(0,o.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,xe(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),kn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),An=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ke(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:en(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=hn(t.visibleWrites,e),c=cn(u,vt());if(null!=c)a=c;else{if(null==n)return[];a=fn(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function On(t,e,n,r,i,s){var a=e.eventCache;if(null!=xn(r,n))return e;var u=void 0,c=void 0;if(Et(n))if((0,o.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=en(e),h=wn(r,l instanceof ce?l:ce.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=bn(r,en(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=_t(n);if(".priority"===f){(0,o.hu)(1===bt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=Cn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=wt(n),y=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=Cn(r,n,a.getNode(),c);y=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else y=Tn(r,f,e.serverCache);u=null!=y?t.filter.updateChild(a.getNode(),f,y,m,i,s):a.getNode()}}return Je(e,u,a.isFullyInitialized()||Et(n),t.filter.filtersNodes())}function Pn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(Et(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=_t(n);if(!c.isCompleteForPath(n)&&bt(n)>1)return e;var f=wt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,kn,null)}var g=Xe(e,u,c.isFullyInitialized()||Et(n),l.filtersNodes());return On(t,g,n,i,new An(i,g,o),a)}function Nn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new An(i,e,o);if(Et(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Je(e,u,!0,t.filter.filtersNodes());else{var h=_t(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Je(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=wt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(Et(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===Ct(d)&&g.getChild(Tt(d)).isEmpty()?g:g.updateChild(d,r):ce.EMPTY_NODE}a=f.equals(p)?e:Je(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Rn(t,e){return t.eventCache.isCompleteForChild(e)}function Dn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function Mn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=Et(n)?r:new nn(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=Dn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Pn(t,c,new yt(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Dn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Pn(t,c,new yt(n),h,i,o,s,a)}}),c}var Ln,Un=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new Te(r.getIndex()),o=(n=r).loadsAllData()?new Te(n.getIndex()):n.hasLimit()?new Ee(n):new Se(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ce.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ce.EMPTY_NODE,a.getNode(),null),l=new Ke(u,s.isFullyInitialized(),i.filtersNodes()),h=new Ke(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=$e(h,l),this.eventGenerator_=new Ye(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function qn(t,e){var n=en(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Et(e)&&!n.getImmediateChild(_t(e)).isEmpty())?n.getChild(e):null}function Fn(t){return 0===t.eventRegistrations_.length}function jn(t,e,n){var r=[];if(n){(0,o.hu)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Zn(t,e,n,r){e.type===Ze.MERGE&&null!==e.source.queryId&&((0,o.hu)(en(t.viewCache_),"We should always have a full cache before handling merges"),(0,o.hu)(tn(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=function(t,e,n,r,i){var s,a,u=new In;if(n.type===Ze.OVERWRITE){var c=n;c.source.fromUser?s=Nn(t,e,c.path,c.snap,r,i,u):((0,o.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Et(c.path),s=Pn(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===Ze.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=St(n,r);Rn(e,_t(c))&&(a=Nn(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=St(n,r);Rn(e,_t(c))||(a=Nn(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,i,u):((0,o.hu)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=Mn(t,e,l.path,l.children,r,i,a,u))}else if(n.type===Ze.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,i,s){var a;if(null!=xn(r,n))return e;var u=new An(r,e,i),c=e.eventCache.getNode(),l=void 0;if(Et(n)||".priority"===_t(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=bn(r,en(e));else{var d=e.serverCache.getNode();(0,o.hu)(d instanceof ce,"serverChildren would be complete if leaf node"),h=wn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=_t(n),p=Tn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,wt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,ce.EMPTY_NODE,wt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=bn(r,en(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=xn(r,vt()),Je(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=xn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(Et(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Pn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(Et(n)){var c=new nn(null);return u.getNode().forEachChild(Vt,function(t,e){c=c.set(new yt(t),e)}),Mn(t,e,n,c,i,o,a,s)}return e}var l=new nn(null);return r.foreach(function(t,e){var r=St(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),Mn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Ze.LISTEN_COMPLETE)throw(0,o.g5)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return On(t,Xe(e,o.getNode(),o.isFullyInitialized()||Et(n),o.isFiltered()),n,r,kn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=tn(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(be(tn(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return i=t.processor_,(0,o.hu)((s=u.viewCache).eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,o.hu)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),(0,o.hu)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Vn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Vn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),Qe(t,i,"child_removed",e,r,n),Qe(t,i,"child_added",e,r,n),Qe(t,i,"child_moved",o,r,n),Qe(t,i,"child_changed",e,r,n),Qe(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Bn,zn=function(){this.views=new Map};function Hn(t,e,n,r){var i,s,a=e.source.queryId;if(null!==a){var u=t.views.get(a);return(0,o.hu)(null!=u,"SyncTree gave us an op for an invalid query."),Zn(u,e,n,r)}var l=[];try{for(var h=c(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Zn(u=d.value,e,n,r))}catch(f){i={error:f}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}function Gn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=bn(n,i?r:null),a=!1;s?a=!0:r instanceof ce?(s=wn(n,r),a=!1):(s=ce.EMPTY_NODE,a=!1);var u=$e(new Ke(s,a,!1),new Ke(r,i,!1));return new Un(e,u)}return o}function Wn(t){var e,n,r=[];try{for(var i=c(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Kn(t,e){var n,r,i=null;try{for(var o=c(t.views.values()),s=o.next();!s.done;s=o.next())i=i||qn(s.value,e)}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Yn(t,e){return e._queryParams.loadsAllData()?Jn(t):t.views.get(e._queryIdentifier)}function Qn(t,e){return null!=Yn(t,e)}function $n(t){return null!=Jn(t)}function Jn(t){var e,n;try{for(var r=c(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Xn=1,tr=function(t){this.listenProvider_=t,this.syncPointTree_=new nn(null),this.pendingWriteTree_={visibleWrites:rn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function er(t,e,n,r,i){return function(t,e,n,r,i){(0,o.hu)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=on(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?ar(t,new Ge({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function nr(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});(0,o.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&mn(u,r.path)?i=!1:Ot(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(function(t){t.visibleWrites=vn(t.allWrites,yn,vt()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=an(t.visibleWrites,r.path):Z(r.children,function(e){t.visibleWrites=an(t.visibleWrites,St(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var i=new nn(null);return null!=r.snap?i=i.set(vt(),!0):Z(r.children,function(t){i=i.set(new yt(t),!0)}),ar(t,new ze(r.path,i,n))}return[]}function rr(t,e,n){return ar(t,new Ge({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function ir(t,e,n,r){var i=e._path,s=t.syncPointTree_.get(i),a=[];if(s&&("default"===e._queryIdentifier||Qn(s,e))){var u=function(t,e,n,r){var i,s,a=e._queryIdentifier,u=[],h=[],d=$n(t);if("default"===a)try{for(var f=c(t.views.entries()),p=f.next();!p.done;p=f.next()){var g,m=l(p.value,2),y=m[0];h=h.concat(jn(g=m[1],n,r)),Fn(g)&&(t.views.delete(y),g.query._queryParams.loadsAllData()||u.push(g.query))}}catch(v){i={error:v}}finally{try{p&&!p.done&&(s=f.return)&&s.call(f)}finally{if(i)throw i.error}}else(g=t.views.get(a))&&(h=h.concat(jn(g,n,r)),Fn(g)&&(t.views.delete(a),g.query._queryParams.loadsAllData()||u.push(g.query)));return d&&!$n(t)&&u.push(new((0,o.hu)(Ln,"Reference.ts has not been loaded"),Ln)(e._repo,e._path)),{removed:u,events:h}}(s,e,n,r);0===s.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var h=u.removed;a=u.events;var d=-1!==h.findIndex(function(t){return t._queryParams.loadsAllData()}),f=t.syncPointTree_.findOnPath(i,function(t,e){return $n(e)});if(d&&!f){var p=t.syncPointTree_.subtree(i);if(!p.isEmpty())for(var g=function(t){return t.fold(function(t,e,n){if(e&&$n(e))return[Jn(e)];var r=[];return e&&(r=Wn(e)),Z(n,function(t,e){r=r.concat(e)}),r})}(p),m=0;m<g.length;++m){var y=g[m],v=y.query,_=lr(t,y);t.listenProvider_.startListening(mr(v),hr(t,v),_.hashFn,_.onComplete)}}!f&&h.length>0&&!r&&(d?t.listenProvider_.stopListening(mr(e),null):h.forEach(function(e){var n=t.queryToTagMap.get(dr(e));t.listenProvider_.stopListening(mr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=dr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,h)}return a}function or(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=It(t,r);i=i||Kn(e,n),s=s||$n(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||$n(u),i=i||Kn(u,vt())):(u=new zn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ce.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Kn(e,vt());n&&(i=i.updateImmediateChild(t,n))}));var c=Qn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=dr(e);(0,o.hu)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Xn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Gn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(re,function(t,e){r.push(we(t,e))}),n.isFullyInitialized()&&r.push(be(n.getNode())),Vn(t,r,n.getNode(),e)}(s,n)}(u,e,n,gn(t.pendingWriteTree_,r),i,a);if(!c&&!s){var f=Yn(u,e);d=d.concat(function(t,e,n){var r=e._path,i=hr(t,e),s=lr(t,n),a=t.listenProvider_.startListening(mr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)(0,o.hu)(!$n(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!Et(t)&&e&&$n(e))return[Jn(e).query];var r=[];return e&&(r=r.concat(Wn(e).map(function(t){return t.query}))),Z(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(mr(h),hr(t,h))}return a}(t,e,f))}return d}function sr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Kn(n,It(t,e));if(r)return r});return _n(r,e,i,n,!0)}function ar(t,e){return ur(e,t.syncPointTree_,null,gn(t.pendingWriteTree_,vt()))}function ur(t,e,n,r){if(Et(t.path))return cr(t,e,n,r);var i=e.get(vt());null==n&&null!=i&&(n=Kn(i,vt()));var o=[],s=_t(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=Sn(r,s);o=o.concat(ur(a,u,c,l))}return i&&(o=o.concat(Hn(i,t,r,n))),o}function cr(t,e,n,r){var i=e.get(vt());null==n&&null!=i&&(n=Kn(i,vt()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=Sn(r,e),u=t.operationForChild(e);u&&(o=o.concat(cr(u,i,s,a)))}),i&&(o=o.concat(Hn(i,t,r,n))),o}function lr(t,e){var n=e.query,r=hr(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||ce.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=fr(t,n);if(r){var i=pr(r),o=i.path,s=i.queryId,a=It(o,e);return gr(t,o,new He(Ve(s),a))}return[]}(t,n._path,r):function(t,e){return ar(t,new He({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return ir(t,n,null,i)}}}function hr(t,e){var n=dr(e);return t.queryToTagMap.get(n)}function dr(t){return t._path.toString()+"$"+t._queryIdentifier}function fr(t,e){return t.tagToQueryMap.get(e)}function pr(t){var e=t.indexOf("$");return(0,o.hu)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new yt(t.substr(0,e))}}function gr(t,e,n){var r=t.syncPointTree_.get(e);return(0,o.hu)(r,"Missing sync point for query tag that we're tracking"),Hn(r,n,gn(t.pendingWriteTree_,e),null)}function mr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new((0,o.hu)(Bn,"Reference.ts has not been loaded"),Bn)(t._repo,t._path):t}var yr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),vr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=St(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return sr(this.syncTree_,this.path_)},t}(),_r=function(t,e,n){return t&&"object"==typeof t?((0,o.hu)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?br(t[".sv"],e,n):"object"==typeof t[".sv"]?wr(t[".sv"],e):void(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},br=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:(0,o.hu)(!1,"Unexpected server value: "+t)}},wr=function(t,e,n){t.hasOwnProperty("increment")||(0,o.hu)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&(0,o.hu)(!1,"Unexpected increment value: "+r);var i=e.node();if((0,o.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},Cr=function(t,e,n,r){return Tr(e,new vr(n,t),r)},xr=function(t,e,n){return Tr(t,new yr(e),n)};function Tr(t,e,n){var r,i=t.getPriority().val(),o=_r(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=_r(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new ne(a,he(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new ne(o))),u.forEachChild(re,function(t,i){var o=Tr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var Sr=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function Er(t,e){for(var n=e instanceof yt?e:new yt(e),r=t,i=_t(n);null!==i;){var s=(0,o.DV)(r.node.children,i)||{children:{},childCount:0};r=new Sr(i,r,s),i=_t(n=wt(n))}return r}function Ir(t){return t.node.value}function kr(t,e){t.node.value=e,Rr(t)}function Ar(t){return t.node.childCount>0}function Or(t,e){Z(t.node.children,function(n,r){e(new Sr(n,t,r))})}function Pr(t,e,n,r){n&&!r&&e(t),Or(t,function(t){Pr(t,e,!0,r)}),n&&r&&e(t)}function Nr(t){return new yt(null===t.parent?t.name:Nr(t.parent)+"/"+t.name)}function Rr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Ir(t)&&!Ar(t)}(n),i=(0,o.r3)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Rr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Rr(t))}(t.parent,t.name,t)}var Dr=/[\[\].#$\/\u0000-\u001F\u007F]/,Mr=/[\[\].#$\u0000-\u001F\u007F]/,Lr=10485760,Ur=function(t){return"string"==typeof t&&0!==t.length&&!Dr.test(t)},qr=function(t){return"string"==typeof t&&0!==t.length&&!Mr.test(t)},Fr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!R(t)||t&&"object"==typeof t&&(0,o.r3)(t,".sv")},jr=function(t,e,n,r){r&&void 0===e||Zr((0,o.gK)(t,"value"),e,n)},Zr=function(t,e,n){var r=n instanceof yt?new Pt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Rt(r));if("function"==typeof e)throw new Error(t+"contains a function "+Rt(r)+" with contents = "+e.toString());if(R(e))throw new Error(t+"contains "+e.toString()+" "+Rt(r));if("string"==typeof e&&e.length>Lr/3&&(0,o.ug)(e)>Lr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Rt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(Z(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!Ur(e)))throw new Error(t+" contains an invalid key ("+e+") "+Rt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=(0,o.ug)(e),Nt(t)}(r,e),Zr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=(0,o.ug)(u),a.parts_.length>0&&(a.byteLength_-=1)}),i&&s)throw new Error(t+' contains ".value" child '+Rt(r)+" in addition to actual children.")}},Vr=function(t,e,n,r){if(!r||void 0!==e){var i=(0,o.gK)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];Z(e,function(t,e){var r=new yt(t);if(Zr(i,e,St(n,r)),".priority"===Ct(r)&&!Fr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=xt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ur(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(kt);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Ot(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},Br=function(t,e,n){if(!n||void 0!==e){if(R(e))throw new Error((0,o.gK)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Fr(e))throw new Error((0,o.gK)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},zr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,o.gK)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Hr=function(t,e,n,r){if(!(r&&void 0===n||Ur(n)))throw new Error((0,o.gK)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Gr=function(t,e,n,r){if(!(r&&void 0===n||qr(n)))throw new Error((0,o.gK)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Wr=function(t,e){if(".info"===_t(e))throw new Error(t+" failed = Can't modify data under /.info/")},Kr=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ur(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),qr(t)}(n))throw new Error((0,o.gK)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Yr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error((0,o.gK)(t,e)+"must be a boolean.")},Qr=function(){this.eventLists_=[],this.recursionDepth_=0};function $r(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||At(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Jr(t,e,n){$r(t,n),ti(t,function(t){return At(t,e)})}function Xr(t,e,n){$r(t,n),ti(t,function(t){return Ot(t,e)||Ot(e,t)})}function ti(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(ei(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function ei(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();S&&k("event: "+n.toString()),H(r)}}}var ni="repo_interrupt",ri=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Qr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Me(),this.transactionQueueTree_=new Sr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function ii(t){var e=t.infoData_.getNode(new yt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function oi(t){return(e=(e={timestamp:ii(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function si(t,e,n,r,i){t.dataUpdateCount++;var s=new yt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=(0,o.UI)(n,function(t){return he(t)});a=function(t,e,n,r){var i=fr(t,r);if(i){var o=pr(i),s=o.path,a=o.queryId,u=It(s,e),c=nn.fromObject(n);return gr(t,s,new We(Ve(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=he(n);a=function(t,e,n,r){var i=fr(t,r);if(null!=i){var o=pr(i),s=o.path,a=o.queryId,u=It(s,e);return gr(t,s,new Ge(Ve(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var l=(0,o.UI)(n,function(t){return he(t)});a=function(t,e,n){var r=nn.fromObject(n);return ar(t,new We({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=he(n);a=rr(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=_i(t,s)),Xr(t.eventQueue_,d,a)}function ai(t,e){ui(t,"connected",e),!1===e&&function(t){gi(t,"onDisconnectEvents");var e=oi(t),n=Me();qe(t.onDisconnect_,vt(),function(r,i){var o=Cr(r,i,t.serverSyncTree_,e);Le(n,r,o)});var r=[];qe(n,vt(),function(e,n){r=r.concat(rr(t.serverSyncTree_,e,n));var i=Ti(t,e);_i(t,i)}),t.onDisconnect_=Me(),Xr(t.eventQueue_,vt(),r)}(t)}function ui(t,e,n){var r=new yt("/.info/"+e),i=he(n);t.infoData_.updateSnapshot(r,i);var o=rr(t.infoSyncTree_,r,i);Xr(t.eventQueue_,r,o)}function ci(t){return t.nextWriteId_++}function li(t,e,n,r,i){gi(t,"set",{path:e.toString(),value:n,priority:r});var o=oi(t),s=he(n,r),a=sr(t.serverSyncTree_,e),u=xr(s,a,o),c=ci(t),l=er(t.serverSyncTree_,e,u,c,!0);$r(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||N("set at "+e+" failed: "+n);var s=nr(t.serverSyncTree_,c,!o);Xr(t.eventQueue_,e,s),mi(0,i,n,r)});var h=Ti(t,e);_i(t,h),Xr(t.eventQueue_,h,[])}function hi(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&Ue(t.onDisconnect_,e),mi(0,n,r,i)})}function di(t,e,n,r){var i=he(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&Le(t.onDisconnect_,e,i),mi(0,r,n,o)})}function fi(t,e,n){var r;r=".info"===_t(e._path)?ir(t.infoSyncTree_,e,n):ir(t.serverSyncTree_,e,n),Jr(t.eventQueue_,e._path,r)}function pi(t){t.persistentConnection_&&t.persistentConnection_.interrupt(ni)}function gi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),k.apply(void 0,h([r],l(e)))}function mi(t,e,n,r){e&&H(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function yi(t,e,n){return sr(t.serverSyncTree_,e,n)||ce.EMPTY_NODE}function vi(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||xi(t,e),Ir(e)){var n=wi(t,e);(0,o.hu)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),i=yi(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];(0,o.hu)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=It(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){gi(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(nr(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(xi(t,Er(t.transactionQueueTree_,e)),vi(t,t.transactionQueueTree_),Xr(t.eventQueue_,e,i),a=0;a<o.length;a++)H(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(N("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;_i(t,e)}},a)}(t,Nr(e),n)}else Ar(e)&&Or(e,function(e){vi(t,e)})}function _i(t,e){var n=bi(t,e),r=Nr(n);return function(t,e,n){if(0!==e.length){for(var r=[],i=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=It(n,c.path),h=!1;if((0,o.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(nr(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(nr(t.serverSyncTree_,c.currentWriteId,!0));else{var d=yi(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Zr("transaction failed: Data returned ",f,c.path);var p=he(f);"object"==typeof f&&null!=f&&(0,o.r3)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,m=oi(t),y=xr(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=ci(t),s.splice(s.indexOf(g),1),i=(i=i.concat(er(t.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(nr(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(nr(t.serverSyncTree_,c.currentWriteId,!0))}Xr(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(xi(t,t.transactionQueueTree_),u=0;u<r.length;u++)H(r[u]);vi(t,t.transactionQueueTree_)}}(t,wi(t,n),r),r}function bi(t,e){var n,r=t.transactionQueueTree_;for(n=_t(e);null!==n&&void 0===Ir(r);)r=Er(r,n),n=_t(e=wt(e));return r}function wi(t,e){var n=[];return Ci(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function Ci(t,e,n){var r=Ir(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Or(e,function(e){Ci(t,e,n)})}function xi(t,e){var n=Ir(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,kr(e,n.length>0?n:void 0)}Or(e,function(e){xi(t,e)})}function Ti(t,e){var n=Nr(bi(t,e)),r=Er(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){Si(t,e)}),Si(t,r),Pr(r,function(e){Si(t,e)}),n}function Si(t,e){var n=Ir(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,o.hu)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):((0,o.hu)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(nr(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?kr(e,void 0):n.length=s+1,Xr(t.eventQueue_,Nr(e),i),a=0;a<r.length;a++)H(r[a])}}var Ei=function(t,e){var n=Ii(t),r=n.namespace;return"firebase.com"===n.domain&&P(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||P("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&N("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new X(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new yt(n.pathString)}},Ii=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=c(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):N("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(s="https"===a||"wss"===a,u=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},ki=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+(0,o.Pz)(this.snapshot.exportVal())},t}(),Ai=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Oi=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return(0,o.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Pi=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.BH;return hi(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){Wr("OnDisconnect.remove",this._path);var t=new o.BH;return di(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){Wr("OnDisconnect.set",this._path),jr("OnDisconnect.set",t,this._path,!1);var e=new o.BH;return di(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){Wr("OnDisconnect.setWithPriority",this._path),jr("OnDisconnect.setWithPriority",t,this._path,!1),Br("OnDisconnect.setWithPriority",e,!1);var n=new o.BH;return function(t,e,n,r,i){var o=he(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&Le(t.onDisconnect_,e,o),mi(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){Wr("OnDisconnect.update",this._path),Vr("OnDisconnect.update",t,this._path,!1);var e=new o.BH;return function(t,e,n,r){if((0,o.xb)(n))return k("onDisconnect().update() called with empty data.  Don't do anything."),void mi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&Z(n,function(n,r){var i=he(r);Le(t.onDisconnect_,St(e,n),i)}),mi(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Ni=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return Et(this._path)?null:Ct(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Li(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Ne(this._queryParams),e=F(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Ne(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=(0,o.m9)(e))instanceof t))return!1;var n=this._repo===e._repo,r=At(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ri(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Di(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Vt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==D)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==M)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===re){if(null!=e&&!Fr(e)||null!=n&&!Fr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,o.hu)(t.getIndex()instanceof pe||t.getIndex()===ge,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Mi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Li=function(t){function e(e,n){return t.call(this,e,n,new Ie,!1)||this}return a(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=Tt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ni),Ui=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new yt(e),r=ji(this.ref,e);return new t(this._node.getChild(n),r,re)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,ji(n.ref,r),re))})},t.prototype.hasChild=function(t){var e=new yt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function qi(t,e){return(t=(0,o.m9)(t))._checkNotDeleted("ref"),void 0!==e?ji(t._root,e):t._root}function Fi(t,e){(t=(0,o.m9)(t))._checkNotDeleted("refFromURL");var n=Ei(e,t._repo.repoInfo_.nodeAdmin);Kr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||P("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),qi(t,n.path.toString())}function ji(t,e){var n;return null===_t((t=(0,o.m9)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Gr("child","path",n,!1)):Gr("child","path",e,!1),new Li(t._repo,St(t._path,e))}function Zi(t,e){t=(0,o.m9)(t),Wr("push",t._path),jr("push",e,t._path,!0);var n,r=ii(t._repo),i=ye(r),s=ji(t,i),a=ji(t,i);return n=null!=e?Bi(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Vi(t){return Wr("remove",t._path),Bi(t,null)}function Bi(t,e){t=(0,o.m9)(t),Wr("set",t._path),jr("set",e,t._path,!1);var n=new o.BH;return li(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function zi(t,e){t=(0,o.m9)(t),Wr("setPriority",t._path),Br("setPriority",e,!1);var n=new o.BH;return li(t._repo,St(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Hi(t,e,n){if(Wr("setWithPriority",t._path),jr("setWithPriority",e,t._path,!1),Br("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.BH;return li(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Gi(t,e){Vr("update",e,t._path,!1);var n=new o.BH;return function(t,e,n,r){gi(t,"update",{path:e.toString(),value:n});var i=!0,s=oi(t),a={};if(Z(n,function(n,r){i=!1,a[n]=Cr(St(e,n),he(r),t.serverSyncTree_,s)}),i)k("update() called with empty data.  Don't do anything."),mi(0,r,"ok",void 0);else{var u=ci(t),c=function(t,e,n,r){!function(t,e,n,r){(0,o.hu)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=sn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=nn.fromObject(n);return ar(t,new We({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(t.serverSyncTree_,e,a,u);$r(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||N("update at "+e+" failed: "+n);var s=nr(t.serverSyncTree_,u,!o),a=s.length>0?_i(t,e):e;Xr(t.eventQueue_,a,s),mi(0,r,n,i)}),Z(n,function(n){var r=Ti(t,St(e,n));_i(t,r)}),Xr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var Wi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new ki("value",this,new Ui(t.snapshotNode,new Li(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ai(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Ki=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ai(this,t,e):null},t.prototype.createEvent=function(t,e){(0,o.hu)(null!=t.childName,"Child events should have a childName.");var n=ji(new Li(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new ki(t.type,this,new Ui(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Yi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){s(e,n),fi(t._repo,t,c)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Oi(n,o||void 0),c="value"===e?new Wi(u):new Ki(e,u);return function(t,e,n){var r;r=".info"===_t(e._path)?or(t.infoSyncTree_,e,n):or(t.serverSyncTree_,e,n),Jr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return fi(t._repo,t,c)}}function Qi(t,e,n,r){return Yi(t,"value",e,n,r)}function $i(t,e,n,r){return Yi(t,"child_added",e,n,r)}function Ji(t,e,n,r){return Yi(t,"child_changed",e,n,r)}function Xi(t,e,n,r){return Yi(t,"child_moved",e,n,r)}function to(t,e,n,r){return Yi(t,"child_removed",e,n,r)}function eo(t,e,n){var r=null,i=n?new Oi(n):null;"value"===e?r=new Wi(i):e&&(r=new Ki(e,i)),fi(t._repo,t,r)}var no=function(){},ro=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return a(e,t),e.prototype._apply=function(t){jr("endAt",this._value,t._path,!0);var e=Ae(t._queryParams,this._value,this._key);if(Mi(e),Di(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ni(t._repo,t._path,e,t._orderByCalled)},e}(no);function io(t,e){return Hr("endAt","key",e,!0),new ro(t,e)}var oo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return a(e,t),e.prototype._apply=function(t){jr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Vt?("string"==typeof n&&(n=_e(n)),i=Ae(e,n,r)):i=Ae(e,n,null==r?D:_e(r)),i.endBeforeSet_=!0,i);if(Mi(o),Di(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ni(t._repo,t._path,o,t._orderByCalled)},e}(no);function so(t,e){return Hr("endBefore","key",e,!0),new oo(t,e)}var ao=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return a(e,t),e.prototype._apply=function(t){jr("startAt",this._value,t._path,!0);var e=ke(t._queryParams,this._value,this._key);if(Mi(e),Di(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ni(t._repo,t._path,e,t._orderByCalled)},e}(no);function uo(t,e){return void 0===t&&(t=null),Hr("startAt","key",e,!0),new ao(t,e)}var co=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return a(e,t),e.prototype._apply=function(t){jr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Vt?("string"==typeof n&&(n=ve(n)),i=ke(e,n,r)):i=ke(e,n,null==r?M:ve(r)),i.startAfterSet_=!0,i);if(Mi(o),Di(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ni(t._repo,t._path,o,t._orderByCalled)},e}(no);function lo(t,e){return Hr("startAfter","key",e,!0),new co(t,e)}var ho=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return a(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ni(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(no);function fo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new ho(t)}var po=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return a(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ni(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(no);function go(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new po(t)}var mo=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return a(e,t),e.prototype._apply=function(t){Ri(t,"orderByChild");var e=new yt(this._path);if(Et(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new pe(e),r=Oe(t._queryParams,n);return Di(r),new Ni(t._repo,t._path,r,!0)},e}(no);function yo(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Gr("orderByChild","path",t,!1),new mo(t)}var vo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._apply=function(t){Ri(t,"orderByKey");var e=Oe(t._queryParams,Vt);return Di(e),new Ni(t._repo,t._path,e,!0)},e}(no);function _o(){return new vo}var bo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._apply=function(t){Ri(t,"orderByPriority");var e=Oe(t._queryParams,re);return Di(e),new Ni(t._repo,t._path,e,!0)},e}(no);function wo(){return new bo}var Co=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype._apply=function(t){Ri(t,"orderByValue");var e=Oe(t._queryParams,ge);return Di(e),new Ni(t._repo,t._path,e,!0)},e}(no);function xo(){return new Co}var To=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return a(e,t),e.prototype._apply=function(t){if(jr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ro(this._value,this._key)._apply(new ao(this._value,this._key)._apply(t))},e}(no);function So(t,e){return Hr("equalTo","key",e,!0),new To(t,e)}function Eo(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=(0,o.m9)(t);try{for(var a=c(r),u=a.next();!u.done;u=a.next()){var l=u.value;s=l._apply(s)}}catch(h){e={error:h}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s}!function(t){(0,o.hu)(!Ln,"__referenceConstructor has already been defined"),Ln=t}(Li),function(t){(0,o.hu)(!Bn,"__referenceConstructor has already been defined"),Bn=t}(Li);var Io={},ko=!1;function Ao(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||P("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),k("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=Ei(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=Ei(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new Y(Y.OWNER):new K(t.name,t.options,e);Kr("Invalid Firebase Database URL",a),Et(a.path)||P("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=Io[e.name];i||(Io[e.name]=i={});var o=i[t.toURLString()];return o&&P("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new ri(t,ko,n,r),i[t.toURLString()]=o,o}(u,t,l,new W(t.name,n));return new Oo(h,t)}var Oo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=it(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Re(t.repoInfo_,function(e,n,r,i){si(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ai(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,o.Pz)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new qt(t.repoInfo_,e,function(e,n,r,i){si(t,e,n,r,i)},function(e){ai(t,e)},function(e){!function(t,e){Z(e,function(e,n){ui(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new je(t.stats_,t.server_)},i=t.repoInfo_.toString(),rt[i]||(rt[i]=r()),rt[i]),t.infoData_=new De,t.infoSyncTree_=new tr({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=rr(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ui(t,"connected",!1),t.serverSyncTree_=new tr({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Xr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Li(this._repo,vt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=Io[e=this.app.name])&&n[t.key]===t||P("Database "+e+"("+t.repoInfo_+") has already been deleted."),pi(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&P("Cannot call "+t+" on a deleted database.")},t}();function Po(t){(t=(0,o.m9)(t))._checkNotDeleted("goOffline"),pi(t._repo)}function No(t){var e;(t=(0,o.m9)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(ni)}var Ro={".sv":"timestamp"},Do=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Mo(t,e,n){var r;if(t=(0,o.m9)(t),Wr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new o.BH,a=Qi(t,function(){});return function(e,n,r,i,a,u){gi(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new Ui(r,new Li(t._repo,t._path),re),s.resolve(new Do(n,i)))},status:null,order:C(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=yi(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Zr("transaction failed: Data returned ",h,c.path),c.status=0;var d=Er(e.transactionQueueTree_,n),f=Ir(d)||[];f.push(c),kr(d,f);var p=void 0;"object"==typeof h&&null!==h&&(0,o.r3)(h,".priority")?(p=(0,o.DV)(h,".priority"),(0,o.hu)(Fr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(sr(e.serverSyncTree_,n)||ce.EMPTY_NODE).getPriority().val();var g=oi(e),m=he(h,p),y=xr(m,l,g);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=y,c.currentWriteId=ci(e);var v=er(e.serverSyncTree_,n,y,c.currentWriteId,c.applyLocally);Xr(e.eventQueue_,n,v),vi(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,i),s.promise}var Lo=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){(0,o.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,o.Wj)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){(0,o.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,o.Wj)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){(0,o.Dv)("OnDisconnect.set",1,2,arguments.length),(0,o.Wj)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,o.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if((0,o.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,N("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,o.Wj)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},t}(),Uo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return(0,o.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),qo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return(0,o.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return(0,o.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return(0,o.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return(0,o.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return(0,o.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Gr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return(0,o.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Gr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return(0,o.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return(0,o.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,o.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return(0,o.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return(0,o.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return(0,o.Dv)("DataSnapshot.ref",0,0,arguments.length),new jo(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Fo=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;(0,o.Dv)("Query.on",2,4,arguments.length),(0,o.Wj)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new qo(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Qi(this._delegate,c,l),n;case"child_added":return $i(this._delegate,c,l),n;case"child_removed":return to(this._delegate,c,l),n;case"child_changed":return Ji(this._delegate,c,l),n;case"child_moved":return Xi(this._delegate,c,l),n;default:throw new Error((0,o.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if((0,o.Dv)("Query.off",0,3,arguments.length),zr("Query.off",t,!0),(0,o.Wj)("Query.off","callback",e,!0),(0,o.lb)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,eo(this._delegate,t,r)}else eo(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=It(t,n);r=r||Kn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Kn(i,vt()):(i=new zn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Ke(r,!0,!1):null;return tn(Gn(i,e,gn(t.pendingWriteTree_,e._path),o?s.getNode():ce.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=he(n),i=rr(t.serverSyncTree_,e._path,r);return Jr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return gi(t,"get for query "+(0,o.Pz)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=(0,o.m9)(t))._repo,t).then(function(e){return new Ui(e,new Li(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new qo(t.database,e)})},t.prototype.once=function(e,n,r,i){var s=this;(0,o.Dv)("Query.once",1,4,arguments.length),(0,o.Wj)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.on",r,i),u=new o.BH,c=function(t,e){var r=new qo(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Qi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":$i(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":to(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Ji(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Xi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error((0,o.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return(0,o.Dv)("Query.limitToFirst",1,1,arguments.length),new t(this.database,Eo(this._delegate,fo(e)))},t.prototype.limitToLast=function(e){return(0,o.Dv)("Query.limitToLast",1,1,arguments.length),new t(this.database,Eo(this._delegate,go(e)))},t.prototype.orderByChild=function(e){return(0,o.Dv)("Query.orderByChild",1,1,arguments.length),new t(this.database,Eo(this._delegate,yo(e)))},t.prototype.orderByKey=function(){return(0,o.Dv)("Query.orderByKey",0,0,arguments.length),new t(this.database,Eo(this._delegate,_o()))},t.prototype.orderByPriority=function(){return(0,o.Dv)("Query.orderByPriority",0,0,arguments.length),new t(this.database,Eo(this._delegate,wo()))},t.prototype.orderByValue=function(){return(0,o.Dv)("Query.orderByValue",0,0,arguments.length),new t(this.database,Eo(this._delegate,xo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAt",0,2,arguments.length),new t(this.database,Eo(this._delegate,uo(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.startAfter",0,2,arguments.length),new t(this.database,Eo(this._delegate,lo(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endAt",0,2,arguments.length),new t(this.database,Eo(this._delegate,io(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),(0,o.Dv)("Query.endBefore",0,2,arguments.length),new t(this.database,Eo(this._delegate,so(e,n)))},t.prototype.equalTo=function(e,n){return(0,o.Dv)("Query.equalTo",1,2,arguments.length),new t(this.database,Eo(this._delegate,So(e,n)))},t.prototype.toString=function(){return(0,o.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return(0,o.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if((0,o.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,(0,o.Wj)(t,"cancel",r.cancel,!0),r.context=n,(0,o.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,o.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new jo(this.database,new Li(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),jo=function(t){function e(e,n){var r=t.call(this,e,new Ni(n._repo,n._path,new Ie,!1))||this;return r.database=e,r._delegate=n,r}return a(e,t),e.prototype.getKey=function(){return(0,o.Dv)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return(0,o.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,ji(this._delegate,t))},e.prototype.getParent=function(){(0,o.Dv)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return(0,o.Dv)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){(0,o.Dv)("Reference.set",1,2,arguments.length),(0,o.Wj)("Reference.set","onComplete",e,!0);var n=Bi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if((0,o.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,N("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wr("Reference.update",this._delegate._path),(0,o.Wj)("Reference.update","onComplete",e,!0);var i=Gi(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},e.prototype.setWithPriority=function(t,e,n){(0,o.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,o.Wj)("Reference.setWithPriority","onComplete",n,!0);var r=Hi(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){(0,o.Dv)("Reference.remove",0,1,arguments.length),(0,o.Wj)("Reference.remove","onComplete",t,!0);var e=Vi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;(0,o.Dv)("Reference.transaction",1,3,arguments.length),(0,o.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,o.Wj)("Reference.transaction","onComplete",e,!0),Yr("Reference.transaction","applyLocally",n,!0);var i=Mo(this._delegate,t,{applyLocally:n}).then(function(t){return new Uo(t.committed,new qo(r.database,t.snapshot))});return e&&i.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),i},e.prototype.setPriority=function(t,e){(0,o.Dv)("Reference.setPriority",1,2,arguments.length),(0,o.Wj)("Reference.setPriority","onComplete",e,!0);var n=zi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;(0,o.Dv)("Reference.push",0,2,arguments.length),(0,o.Wj)("Reference.push","onComplete",n,!0);var i=Zi(this._delegate,t),s=i.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Wr("Reference.onDisconnect",this._delegate._path),new Lo(new Pi(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Fo),Zo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=(0,o.m9)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&P("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&P('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Y(Y.OWNER);else if(r.mockUserToken){var a=(0,o.Sg)(r.mockUserToken,t.app.options.projectId);s=new Y(a)}!function(t,e,n,r){t.repoInfo_=new X(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if((0,o.Dv)("database.ref",0,1,arguments.length),t instanceof jo){var e=Fi(this._delegate,t.toString());return new jo(this,e)}return e=qi(this._delegate,t),new jo(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";(0,o.Dv)(e,1,1,arguments.length);var n=Fi(this._delegate,t);return new jo(this,n)},t.prototype.goOffline=function(){return(0,o.Dv)("database.goOffline",0,0,arguments.length),Po(this._delegate)},t.prototype.goOnline=function(){return(0,o.Dv)("database.goOnline",0,0,arguments.length),No(this._delegate)},t.ServerValue={TIMESTAMP:Ro,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Vo=Object.freeze({__proto__:null,forceLongPolling:function(){ht.forceDisallow(),ut.forceAllow()},forceWebSockets:function(){ut.forceDisallow()},isWebSocketsAvailable:function(){return ht.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Fe(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);Z(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;p(t.version);var u=new i.zt("auth-internal",new i.H0("database-standalone"));return u.setComponent(new i.wA("auth-internal",function(){return r},"PRIVATE")),{instance:new Zo(Ao(e,u,void 0,n,a),e),namespace:o}}}),Bo=qt;qt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},qt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var zo=Object.freeze({__proto__:null,DataConnection:Bo,RealTimeConnection:ft,hijackHash:function(t){var e=qt.prototype.put;return qt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){qt.prototype.put=e}},ConnectionTarget:X,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){ko=t}(t)}}),Ho=Zo.ServerValue;!function(e){p(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i.wA("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Zo(Ao(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:jo,Query:Fo,Database:Zo,DataSnapshot:qo,enableLogging:I,INTERNAL:Vo,ServerValue:Ho,TEST_ACCESS:zo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.0"),(0,o.Yr)()&&(t.exports=n)}(r.Z)},300:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>s,Yd:()=>h,Ub:()=>d,Am:()=>f});var o=[],s=(()=>(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(s||(s={})),s))(),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},3701:(t,e,n)=>{"use strict";n.d(e,{BH:()=>f,LL:()=>E,gQ:()=>F,hu:()=>o,g5:()=>s,US:()=>u,h$:()=>c,r3:()=>D,Sg:()=>p,ne:()=>j,p$:()=>h,ZB:()=>d,gK:()=>z,m9:()=>Y,z$:()=>g,GJ:()=>R,jU:()=>v,ru:()=>_,d:()=>w,xb:()=>L,w1:()=>C,uI:()=>m,UG:()=>y,Yr:()=>T,b$:()=>b,Mn:()=>x,w9:()=>N,cI:()=>A,UI:()=>U,xO:()=>q,DV:()=>M,ug:()=>K,dS:()=>W,Pz:()=>O,Dv:()=>B,Wj:()=>H,lb:()=>G});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},i=function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=a(t);return u.encodeByteArray(e,!0)},l=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t){return d(void 0,t)}function d(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=d(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=i({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),u.encodeString(JSON.stringify(s),!1),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function v(){return"object"==typeof self&&self.self===self}function _(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function b(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return g().indexOf("Electron/")>=0}function C(){var t=g();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function x(){return g().indexOf("MSAppHost/")>=0}function T(){return!1}var S=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,E.prototype.create),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error),E=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?I(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new S(i,a,r);return u},t}();function I(t,e){return t.replace(k,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var k=/\{\$([^}]+)}/g;function A(t){return JSON.parse(t)}function O(t){return JSON.stringify(t)}var P=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=A(l(o[0])||""),n=A(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},N=function(t){var e=P(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},R=function(t){var e=P(t).claims;return"object"==typeof e&&!0===e.admin};function D(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function M(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function L(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function U(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function q(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var F=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function j(t,e){var n=new Z(t,e);return n.subscribe.bind(n)}var Z=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function V(){}var B=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function z(t,e){return t+" failed: "+e+" argument "}function H(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(z(t,e)+"must be a valid function.")}function G(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(z(t,e)+"must be a valid context object.")}var W=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},K=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function Y(t){return t&&t._delegate?t._delegate:t}},2329:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r.Z});var r=n(6232);r.Z.registerVersion("firebase","8.6.0","app")},7574:(t,e,n)=>{"use strict";n.d(e,{y:()=>c});var r=n(7393),i=n(9181),o=n(6490),s=n(6554),a=n(4487),u=n(2494);let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.L)return t;if(t[i.b])return t[i.b]()}return t||e||n?new r.L(t,e,n):new r.L(o.c)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.v.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.L?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.L](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.y:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.v.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},6490:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});var r=n(2494),i=n(4449);const o={closed:!0,next(t){},error(t){if(r.v.useDeprecatedSynchronousErrorHandling)throw t;(0,i.z)(t)},complete(){}}},9765:(t,e,n)=>{"use strict";n.d(e,{Yc:()=>c,xQ:()=>l});var r=n(7574),i=n(7393),o=n(5319),s=n(7971),a=n(8858),u=n(9181);class c extends i.L{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.b](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.N;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.N;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.N;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.N;return this.hasError?(t.error(this.thrownError),o.w.EMPTY):this.isStopped?(t.complete(),o.w.EMPTY):(this.observers.push(t),new a.W(this,t))}asObservable(){const t=new r.y;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.w.EMPTY}}},8858:(t,e,n)=>{"use strict";n.d(e,{W:()=>i});var r=n(5319);class i extends r.w{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},7393:(t,e,n)=>{"use strict";n.d(e,{L:()=>c});var r=n(9105),i=n(6490),o=n(5319),s=n(9181),a=n(2494),u=n(4449);class c extends o.w{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!t){this.destination=i.c;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.b](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;(0,r.m)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.c&&(a=Object.create(e),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):(0,u.z)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;(0,u.z)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,u.z)(n)}}__tryOrSetError(t,e,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):((0,u.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},5319:(t,e,n)=>{"use strict";n.d(e,{w:()=>a});var r=n(9796),i=n(1555),o=n(9105);const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class a{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:u,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof a)e.remove(this);else if(null!==e)for(let r=0;r<e.length;++r)e[r].remove(this);if((0,o.m)(u)){n&&(this._unsubscribe=void 0);try{u.call(this)}catch(h){t=h instanceof s?c(h.errors):[h]}}if((0,r.k)(l)){let e=-1,n=l.length;for(;++e<n;){const n=l[e];if((0,i.K)(n))try{n.unsubscribe()}catch(h){t=t||[],h instanceof s?t=t.concat(c(h.errors)):t.push(h)}}}if(t)throw new s(t)}add(t){let e=t;if(!t)return a.EMPTY;switch(typeof t){case"function":e=new a(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof a)){const t=e;e=new a,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof a){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[e]:r.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var u;function c(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}a.EMPTY=((u=new a).closed=!0,u)},2494:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:(t,e,n)=>{"use strict";n.d(e,{IY:()=>s,Ds:()=>a,ft:()=>u});var r=n(7393),i=n(7574),o=n(7444);class s extends r.L{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.y)return t.subscribe(e);let n;try{n=(0,o.s)(t)(e)}catch(r){e.error(r)}return n}},2441:(t,e,n)=>{"use strict";n.d(e,{c:()=>a,N:()=>u});var r=n(9765),i=n(7574),o=n(5319),s=n(1307);class a extends i.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.w,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.w.EMPTY)),t}refCount(){return(0,s.x)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.Yc{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},9193:(t,e,n)=>{"use strict";n.d(e,{E:()=>i,c:()=>o});var r=n(7574);const i=new r.y(t=>t.complete());function o(t){return t?function(t){return new r.y(e=>t.schedule(()=>e.complete()))}(t):i}},4402:(t,e,n)=>{"use strict";n.d(e,{D:()=>h});var r=n(7574),i=n(7444),o=n(5319),s=n(6554),a=n(4087),u=n(377),c=n(4072),l=n(9489);function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.L]}(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>{const i=t[s.L]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if((0,c.t)(t))return function(t,e){return new r.y(n=>{const r=new o.w;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if((0,l.z)(t))return(0,a.r)(t,e);if(function(t){return t&&"function"==typeof t[u.hZ]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new o.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.hZ](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.y?t:new r.y((0,i.s)(t))}},6693:(t,e,n)=>{"use strict";n.d(e,{n:()=>s});var r=n(7574),i=n(5015),o=n(4087);function s(t,e){return e?(0,o.r)(t,e):new r.y((0,i.V)(t))}},6682:(t,e,n)=>{"use strict";n.d(e,{T:()=>a});var r=n(7574),i=n(4869),o=n(3282),s=n(6693);function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return(0,i.K)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(e)((0,s.n)(t,n))}},5917:(t,e,n)=>{"use strict";n.d(e,{of:()=>s});var r=n(4869),i=n(6693),o=n(4087);function s(...t){let e=t[t.length-1];return(0,r.K)(e)?(t.pop(),(0,o.r)(t,e)):(0,i.n)(t)}},8002:(t,e,n)=>{"use strict";n.d(e,{U:()=>i});var r=n(7393);function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.L{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},3282:(t,e,n)=>{"use strict";n.d(e,{J:()=>o});var r=n(9773),i=n(4487);function o(t=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,t)}},9773:(t,e,n)=>{"use strict";n.d(e,{zg:()=>s});var r=n(8002),i=n(4402),o=n(5345);function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>(0,i.D)(t(n,o)).pipe((0,r.U)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.Ds{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.IY(this),n=this.destination;n.add(e);const r=(0,o.ft)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(t,e,n)=>{"use strict";n.d(e,{ht:()=>l,QV:()=>u});var r=n(7393),i=n(9193),o=n(5917),s=n(7574);class a{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return t=this.error,new s.y(e=>e.error(t));case"C":return(0,i.c)()}var t;throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new a("N",t):a.undefinedValueNotification}static createError(t){return new a("E",void 0,t)}static createComplete(){return a.completeNotification}}function u(t,e=0){return function(n){return n.lift(new c(t,e))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.L{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},1307:(t,e,n)=>{"use strict";n.d(e,{x:()=>i});var r=n(7393);function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.L{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},8819:(t,e,n)=>{"use strict";n.d(e,{B:()=>a});var r=n(2441),i=n(1307),o=n(9765);function s(){return new o.xQ}function a(){return t=>{return(0,i.x)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i})(t));var e}}},3101:(t,e,n)=>{"use strict";n.d(e,{R:()=>p});var r=n(7574);let i=1;const o=Promise.resolve(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n(6465),l=n(6102);const h=new class extends l.v{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends c.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}});var d=n(9796);class f extends r.y{constructor(t,e=0,n=h){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,((0,d.k)(r=e)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(t,e=0,n=h){return new f(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(f.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function p(t,e=0){return function(n){return n.lift(new g(t,e))}}class g{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new f(e,this.delay,this.scheduler).subscribe(t)}}},3342:(t,e,n)=>{"use strict";n.d(e,{b:()=>s});var r=n(7393);function i(){}var o=n(9105);function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.L{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,o.m)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},4087:(t,e,n)=>{"use strict";n.d(e,{r:()=>o});var r=n(7574),i=n(5319);function o(t,e){return new r.y(n=>{const r=new i.w;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:(t,e,n)=>{"use strict";n.d(e,{o:()=>o});var r=n(5319);class i extends r.w{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},6102:(t,e,n)=>{"use strict";n.d(e,{v:()=>i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},3637:(t,e,n)=>{"use strict";n.d(e,{z:()=>i});var r=n(6465);const i=new(n(6102).v)(r.o)},7771:(t,e,n)=>{"use strict";n.d(e,{c:()=>s,N:()=>o});var r=n(6465),i=n(6102);const o=new class extends i.v{}(class extends r.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),s=o},377:(t,e,n)=>{"use strict";n.d(e,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(t,e,n)=>{"use strict";n.d(e,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(t,e,n)=>{"use strict";n.d(e,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(t,e,n)=>{"use strict";n.d(e,{N:()=>r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},4449:(t,e,n)=>{"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,{z:()=>r})},4487:(t,e,n)=>{"use strict";function r(t){return t}n.d(e,{y:()=>r})},9796:(t,e,n)=>{"use strict";n.d(e,{k:()=>r});const r=Array.isArray||(t=>t&&"number"==typeof t.length)},9489:(t,e,n)=>{"use strict";n.d(e,{z:()=>r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},9105:(t,e,n)=>{"use strict";function r(t){return"function"==typeof t}n.d(e,{m:()=>r})},1555:(t,e,n)=>{"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,{K:()=>r})},4072:(t,e,n)=>{"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,{t:()=>r})},4869:(t,e,n)=>{"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,{K:()=>r})},7444:(t,e,n)=>{"use strict";n.d(e,{s:()=>l});var r=n(5015),i=n(4449),o=n(377),s=n(6554),a=n(9489),u=n(4072),c=n(1555);const l=t=>{if(t&&"function"==typeof t[s.L])return l=t,t=>{const e=l[s.L]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if((0,a.z)(t))return(0,r.V)(t);if((0,u.t)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t);if(t&&"function"==typeof t[o.hZ])return e=t,t=>{const n=e[o.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=(0,c.K)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},5015:(t,e,n)=>{"use strict";n.d(e,{V:()=>r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},9641:(t,e,n)=>{"use strict";var r=n(7716);let i=null;function o(){return i}const s=new r.OlP("DocumentToken");let a=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return(0,r.LFG)(l)}const c=new r.OlP("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=o().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=(0,r.Yz7)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=(0,r.Yz7)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=(0,r.LFG)(s).location;return new _((0,r.LFG)(a),e&&e.origin||"")}const v=new r.OlP("appBaseHref");let _=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),b=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(a),r.LFG(v,8))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(x(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,x(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(m),r.LFG(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=(0,r.Yz7)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w((0,r.LFG)(m),(0,r.LFG)(a))}function x(t){return t.replace(/\/index.html$/,"")}var T=(()=>((T=T||{})[T.Zero=0]="Zero",T[T.One=1]="One",T[T.Two=2]="Two",T[T.Few=3]="Few",T[T.Many=4]="Many",T[T.Other=5]="Other",T))();const S=r.kL8;class E{}let I=(()=>{class t extends E{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case T.Zero:return"zero";case T.One:return"one";case T.Two:return"two";case T.Few:return"few";case T.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.soG))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class k{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let A=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(_v){throw new Error(`Cannot find a differ supporting object '${e}' of type '${t=e,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new k(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new O(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new O(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class O{constructor(t,e){this.record=t,this.view=e}}let P=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new N,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){R("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){R("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(r.s_b),r.Y36(r.Rgc))},t.\u0275dir=r.lG2({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class N{constructor(){this.$implicit=null,this.ngIf=null}}function R(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${(0,r.AaK)(e)}'.`)}let D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[{provide:E,useClass:I}]}),t})();function M(t){return"server"===t}let L=(()=>{class t{}return t.\u0275prov=(0,r.Yz7)({token:t,providedIn:"root",factory:()=>new U((0,r.LFG)(s),window)}),t})();class U{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=q(this.window.history)||q(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(_v){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(_v){return!1}}}function q(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class F extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new F,i||(i=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Z=Z||document.querySelector("base"),Z?Z.getAttribute("href"):null);return null==e?null:function(t){j=j||document.createElement("a"),j.setAttribute("href",t);const e=j.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){Z=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let j,Z=null;const V=new r.OlP("TRANSITION_ID"),B=[{provide:r.ip1,useFactory:function(t,e,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[V,s,r.zs3],multi:!0}];class z{static init(){(0,r.VLi)(new z)}addToWindow(t){r.dqk.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(t=>{const e=r.dqk.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let H=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const G=new r.OlP("EventManagerPlugins");let W=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(G),r.LFG(r.R0b))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class K{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let Y=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Q=(()=>{class t extends Y{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const r=this._doc.createElement("style");r.textContent=t,n.push(e.appendChild(r))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach($),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach($))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function $(t){o().remove(t)}const J={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},X=/%COMP%/g;function tt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?tt(t,i,n):(i=i.replace(X,t),n.push(i))}return n}function et(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let nt=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new rt(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new it(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.ifc.ShadowDom:return new ot(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=tt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(W),r.LFG(Q),r.LFG(r.AFp))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();class rt{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(J[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=J[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=J[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.JOm.DashCase|r.JOm.Important)?t.style.setProperty(e,n,i&r.JOm.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,et(n)):this.eventManager.addEventListener(t,e,et(n))}}class it extends rt{constructor(t,e,n,r){super(t),this.component=n;const i=tt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(X,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(X,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ot extends rt{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=tt(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let st=(()=>{class t extends K{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const at=["alt","control","meta","shift"],ut={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ct={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},lt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let ht=(()=>{class t extends K{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(at.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ct.hasOwnProperty(e)&&(e=ct[e]))}return ut[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),at.forEach(r=>{r!=n&&(0,lt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(s))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const dt=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){F.makeCurrent(),z.init()},multi:!0},{provide:s,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),ft=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:G,useClass:st,multi:!0,deps:[s,r.R0b,r.Lbi]},{provide:G,useClass:ht,multi:!0,deps:[s]},[],{provide:nt,useClass:nt,deps:[W,Q,r.AFp]},{provide:r.FYo,useExisting:nt},{provide:Y,useExisting:Q},{provide:Q,useClass:Q,deps:[s]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:W,useClass:W,deps:[G,r.R0b]},{provide:class{},useClass:H,deps:[]},[]];let pt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.AFp,useValue:e.appId},{provide:V,useExisting:r.AFp},B]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(t,12))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:ft,imports:[D,r.hGG]}),t})();"undefined"!=typeof window&&window;var gt=n(4402),mt=n(5917),yt=n(9765),vt=n(7971);class _t extends yt.xQ{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new vt.N;return this._value}next(t){super.next(this._value=t)}}var bt=n(4869),wt=n(9796),Ct=n(7393);class xt extends Ct.L{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Tt extends Ct.L{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var St=n(7444),Et=n(7574);function It(t,e,n,r,i=new Tt(t,n,r)){if(!i.closed)return e instanceof Et.y?e.subscribe(i):(0,St.s)(e)(i)}var kt=n(6693);const At={};class Ot{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Pt(t,this.resultSelector))}}class Pt extends xt{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(At),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(It(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===At?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Nt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var Rt=n(3282);function Dt(...t){return(0,Rt.J)(1)((0,mt.of)(...t))}var Mt=n(9193);function Lt(t){return new Et.y(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?(0,gt.D)(n):(0,Mt.c)()).subscribe(e)})}var Ut=n(2441),qt=n(8002),Ft=n(5345);function jt(t,e){return"function"==typeof e?n=>n.pipe(jt((n,r)=>(0,gt.D)(t(n,r)).pipe((0,qt.U)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Zt(t))}class Zt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Vt(t,this.project))}}class Vt extends Ft.Ds{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Ft.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,Ft.ft)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Bt=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function zt(t){return e=>0===t?(0,Mt.c)():e.lift(new Ht(t))}class Ht{constructor(t){if(this.total=t,this.total<0)throw new Bt}call(t,e){return e.subscribe(new Gt(t,this.total))}}class Gt extends Ct.L{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Wt(...t){const e=t[t.length-1];return(0,bt.K)(e)?(t.pop(),n=>Dt(t,n,e)):e=>Dt(t,e)}function Kt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Yt(t,e,n))}}class Yt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Qt(t,this.accumulator,this.seed,this.hasSeed))}}class Qt extends Ct.L{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function $t(t,e){return function(n){return n.lift(new Jt(t,e))}}class Jt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Xt(t,this.predicate,this.thisArg))}}class Xt extends Ct.L{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function te(t){return function(e){const n=new ee(t),r=e.lift(n);return n.caught=r}}class ee{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ne(t,this.selector,this.caught))}}class ne extends Ft.Ds{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Ft.IY(this);this.add(r);const i=(0,Ft.ft)(n,r);i!==r&&this.add(i)}}}var re=n(9773);function ie(t,e){return(0,re.zg)(t,e,1)}function oe(t){return function(e){return 0===t?(0,Mt.c)():e.lift(new se(t))}}class se{constructor(t){if(this.total=t,this.total<0)throw new Bt}call(t,e){return e.subscribe(new ae(t,this.total))}}class ae extends Ct.L{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ue(t=he){return e=>e.lift(new ce(t))}class ce{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new le(t,this.errorFactory))}}class le extends Ct.L{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(N_){t=N_}this.destination.error(t)}}}function he(){return new Nt}function de(t=null){return e=>e.lift(new fe(t))}class fe{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new pe(t,this.defaultValue))}}class pe extends Ct.L{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var ge=n(4487);function me(t,e){const n=arguments.length>=2;return r=>r.pipe(t?$t((e,n)=>t(e,n,r)):ge.y,zt(1),n?de(e):ue(()=>new Nt))}var ye=n(3342),ve=n(1307),_e=n(5319);class be{constructor(t){this.callback=t}call(t,e){return e.subscribe(new we(t,this.callback))}}class we extends Ct.L{constructor(t,e){super(t),this.add(new _e.w(e))}}class Ce{constructor(t,e){this.id=t,this.url=e}}class xe extends Ce{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Te extends Ce{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Se extends Ce{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ee extends Ce{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ie extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ke extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ae extends Ce{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Oe extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pe extends Ce{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ne{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Re{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class De{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Me{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Le{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ue{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qe{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Fe="primary";class je{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Ze(t){return new je(t)}function Ve(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Be(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ze(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!He(t[i],e[i]))return!1;return!0}function He(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Ge(t){return Array.prototype.concat.apply([],t)}function We(t){return t.length>0?t[t.length-1]:null}function Ke(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ye(t){return(0,r.CqO)(t)?t:(0,r.QGY)(t)?(0,gt.D)(Promise.resolve(t)):(0,mt.of)(t)}const Qe={exact:function t(e,n,r){if(!sn(e.segments,n.segments))return!1;if(!en(e.segments,n.segments,r))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!e.children[i])return!1;if(!t(e.children[i],n.children[i],r))return!1}return!0},subset:Xe},$e={exact:function(t,e){return ze(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>He(t[n],e[n]))},ignored:()=>!0};function Je(t,e,n){return Qe[n.paths](t.root,e.root,n.matrixParams)&&$e[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function Xe(t,e,n){return tn(t,e,e.segments,n)}function tn(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!!sn(i,n)&&!e.hasChildren()&&!!en(i,n,r)}if(t.segments.length===n.length){if(!sn(t.segments,n))return!1;if(!en(t.segments,n,r))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Xe(t.children[n],e.children[n],r))return!1}return!0}{const i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!!sn(t.segments,i)&&!!en(t.segments,i,r)&&!!t.children.primary&&tn(t.children.primary,e,o,r)}}function en(t,e,n){return e.every((e,r)=>$e[n](t[r].parameters,e.parameters))}class nn{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ze(this.queryParams)),this._queryParamMap}toString(){return cn.serialize(this)}}class rn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Ke(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ln(this)}}class on{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Ze(this.parameters)),this._parameterMap}toString(){return yn(this)}}function sn(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class an{}class un{parse(t){const e=new Cn(t);return new nn(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${hn(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${fn(e)}=${fn(t)}`).join("&"):`${fn(e)}=${fn(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const cn=new un;function ln(t){return t.segments.map(t=>yn(t)).join("/")}function hn(t,e){if(!t.hasChildren())return ln(t);if(e){const e=t.children.primary?hn(t.children.primary,!1):"",n=[];return Ke(t.children,(t,e)=>{e!==Fe&&n.push(`${e}:${hn(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return Ke(t.children,(t,r)=>{r===Fe&&(n=n.concat(e(t,r)))}),Ke(t.children,(t,r)=>{r!==Fe&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Fe?[hn(t.children.primary,!1)]:[`${n}:${hn(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${ln(t)}/${e[0]}`:`${ln(t)}/(${e.join("//")})`}}function dn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fn(t){return dn(t).replace(/%3B/gi,";")}function pn(t){return dn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gn(t){return decodeURIComponent(t)}function mn(t){return gn(t.replace(/\+/g,"%20"))}function yn(t){return`${pn(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${pn(t)}=${pn(e[t])}`).join("")}`;var e}const vn=/^[^\/()?;=#]+/;function _n(t){const e=t.match(vn);return e?e[0]:""}const bn=/^[^=?&#]+/,wn=/^[^?&#]+/;class Cn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new rn(t,e)),n}parseSegment(){const t=_n(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new on(gn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=_n(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=_n(this.remaining);t&&(n=t,this.capture(n))}t[gn(e)]=gn(n)}parseQueryParam(t){const e=function(t){const e=t.match(bn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(wn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=mn(e),i=mn(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=_n(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Fe);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new rn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class xn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Tn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Tn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Sn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Sn(t,this._root).map(t=>t.value)}}function Tn(t,e){if(t===e.value)return e;for(const n of e.children){const e=Tn(t,n);if(e)return e}return null}function Sn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Sn(t,n);if(r.length)return r.unshift(e),r}return[]}class En{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function In(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class kn extends xn{constructor(t,e){super(t),this.snapshot=e,Dn(this,t)}toString(){return this.snapshot.toString()}}function An(t,e){const n=function(t,e){const n=new Nn([],{},{},"",{},Fe,e,null,t.root,-1,{});return new Rn("",new En(n,[]))}(t,e),r=new _t([new on("",{})]),i=new _t({}),o=new _t({}),s=new _t({}),a=new _t(""),u=new On(r,i,s,a,o,Fe,e,n.root);return u.snapshot=n.root,new kn(new En(u,[]),n)}class On{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,qt.U)(t=>Ze(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,qt.U)(t=>Ze(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pn(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Nn{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ze(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ze(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Rn extends xn{constructor(t,e){super(e),this.url=t,Dn(this,e)}toString(){return Mn(this._root)}}function Dn(t,e){e.value._routerState=t,e.children.forEach(e=>Dn(t,e))}function Mn(t){const e=t.children.length>0?` { ${t.children.map(Mn).join(", ")} } `:"";return`${t.value}${e}`}function Ln(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ze(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ze(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ze(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ze(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Un(t,e){return ze(t.params,e.params)&&function(t,e){return sn(t,e)&&t.every((t,n)=>ze(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Un(t.parent,e.parent))}function qn(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return qn(t,e,r);return qn(t,e)})}(t,e,n);return new En(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Fn(e,t),t}}const n=new On(new _t((r=e.value).url),new _t(r.params),new _t(r.queryParams),new _t(r.fragment),new _t(r.data),r.outlet,r.component,r),i=e.children.map(e=>qn(t,e));return new En(n,i)}var r}function Fn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Fn(t.children[n],e.children[n])}function jn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Zn(t){return"object"==typeof t&&null!=t&&t.outlets}function Vn(t,e,n,r,i){let o={};return r&&Ke(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new nn(n.root===t?e:Bn(n.root,t,e),o,i)}function Bn(t,e,n){const r={};return Ke(t.children,(t,i)=>{r[i]=t===e?n:Bn(t,e,n)}),new rn(t.segments,r)}class zn{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&jn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Zn);if(r&&r!==We(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Hn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Gn(t,e,n){if(t||(t=new rn([],{})),0===t.segments.length&&t.hasChildren())return Wn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Zn(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!$n(a,u,e))return o;r+=2}else{if(!$n(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new rn(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new rn(t.segments.slice(r.pathIndex),t.children),Wn(e,0,i)}return r.match&&0===i.length?new rn(t.segments,{}):r.match&&!t.hasChildren()?Kn(t,e,n):r.match?Wn(t,0,i):Kn(t,e,n)}function Wn(t,e,n){if(0===n.length)return new rn(t.segments,{});{const r=function(t){return Zn(t[0])?t[0].outlets:{[Fe]:t}}(n),i={};return Ke(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Gn(t.children[r],e,n))}),Ke(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new rn(t.segments,i)}}function Kn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Zn(o)){const t=Yn(o.outlets);return new rn(r,t)}if(0===i&&jn(n[0])){r.push(new on(t.segments[e].path,Qn(n[0]))),i++;continue}const s=Zn(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&jn(a)?(r.push(new on(s,Qn(a))),i+=2):(r.push(new on(s,{})),i++)}return new rn(r,{})}function Yn(t){const e={};return Ke(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Kn(new rn([],{}),0,t))}),e}function Qn(t){const e={};return Ke(t,(t,n)=>e[n]=`${t}`),e}function $n(t,e,n){return t==n.path&&ze(e,n.parameters)}class Jn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Ln(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=In(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),Ke(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=In(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=In(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new Ue(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Me(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Ln(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Xn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Xn(t){Ln(t.value),t.children.forEach(Xn)}class tr{constructor(t,e){this.routes=t,this.module=e}}function er(t){return"function"==typeof t}function nr(t){return t instanceof nn}const rr=Symbol("INITIAL_VALUE");function ir(){return jt(t=>function(...t){let e,n;return(0,bt.K)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&(0,wt.k)(t[0])&&(t=t[0]),(0,kt.n)(t,n).lift(new Ot(e))}(t.map(t=>t.pipe(zt(1),Wt(rr)))).pipe(Kt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==rr)return t;if(r===rr&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||nr(r))return r}return t},t)},rr),$t(t=>t!==rr),(0,qt.U)(t=>nr(t)?t:!0===t),zt(1)))}let or=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r._UZ(0,"router-outlet")},directives:function(){return[ni]},encapsulation:2}),t})();function sr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];ar(r,ur(e,r))}}function ar(t,e){t.children&&sr(t.children,e)}function ur(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function cr(t){const e=t.children&&t.children.map(cr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Fe&&(n.component=or),n}function lr(t){return t.outlet||Fe}function hr(t,e){const n=t.filter(t=>lr(t)===e);return n.push(...t.filter(t=>lr(t)!==e)),n}const dr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function fr(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},dr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Be)(n,t,e);if(!i)return Object.assign({},dr);const o={};Ke(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function pr(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>gr(t,e,n)&&lr(n)!==Fe)}(t,n,r)){const i=new rn(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&lr(o)!==Fe){const n=new rn([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[lr(o)]=n}return i}(t,e,r,new rn(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>gr(t,e,n))}(t,n,r)){const o=new rn(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(gr(t,n,a)&&!i[lr(a)]){const n=new rn([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[lr(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new rn(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function gr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function mr(t,e,n,r){return!!(lr(t)===r||r!==Fe&&gr(e,n,t))&&("**"===t.path||fr(e,t,n).matched)}function yr(t,e,n){return 0===e.length&&!t.children[n]}class vr{constructor(t){this.segmentGroup=t||null}}class _r{constructor(t){this.urlTree=t}}function br(t){return new Et.y(e=>e.error(new vr(t)))}function wr(t){return new Et.y(e=>e.error(new _r(t)))}function Cr(t){return new Et.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class xr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.h0i)}apply(){const t=pr(this.urlTree.root,[],[],this.config).segmentGroup,e=new rn(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Fe).pipe((0,qt.U)(t=>this.createUrlTree(Tr(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(te(t=>{if(t instanceof _r)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof vr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Fe).pipe((0,qt.U)(e=>this.createUrlTree(Tr(e),t.queryParams,t.fragment))).pipe(te(t=>{if(t instanceof vr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new rn([],{[Fe]:t}):t;return new nn(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe((0,qt.U)(t=>new rn([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,gt.D)(r).pipe(ie(r=>{const i=n.children[r],o=hr(e,r);return this.expandSegmentGroup(t,o,i,r).pipe((0,qt.U)(t=>({segment:t,outlet:r})))}),Kt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?$t((e,n)=>t(e,n,r)):ge.y,oe(1),n?de(e):ue(()=>new Nt))}())}expandSegment(t,e,n,r,i,o){return(0,gt.D)(n).pipe(ie(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(te(t=>{if(t instanceof vr)return(0,mt.of)(null);throw t}))),me(t=>!!t),te((t,n)=>{if(t instanceof Nt||"EmptyError"===t.name){if(yr(e,r,i))return(0,mt.of)(new rn([],{}));throw new vr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return mr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):br(e):br(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?wr(i):this.lineralizeSegments(n,i).pipe((0,re.zg)(n=>{const i=new rn(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=fr(e,r,i);if(!s)return br(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?wr(l):this.lineralizeSegments(r,l).pipe((0,re.zg)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,mt.of)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe((0,qt.U)(t=>(n._loadedConfig=t,new rn(r,{})))):(0,mt.of)(new rn(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=fr(e,n,r);if(!o)return br(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe((0,re.zg)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=pr(e,s,u,o),l=new rn(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe((0,qt.U)(t=>new rn(s,t)));if(0===o.length&&0===c.length)return(0,mt.of)(new rn(s,{}));const h=lr(n)===i;return this.expandSegment(r,l,o,c,h?Fe:i,!0).pipe((0,qt.U)(t=>new rn(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?(0,mt.of)(new tr(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?(0,mt.of)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe((0,re.zg)(n=>n?this.configLoader.load(t.injector,e).pipe((0,qt.U)(t=>(e._loadedConfig=t,t))):function(t){return new Et.y(e=>e.error(Ve(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):(0,mt.of)(new tr([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return(0,mt.of)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&er(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!er(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ye(o)});return(0,mt.of)(i).pipe(ir(),(0,ye.b)(t=>{if(!nr(t))return;const e=Ve(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(0,qt.U)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,mt.of)(n);if(r.numberOfChildren>1||!r.children.primary)return Cr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new nn(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return Ke(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return Ke(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new rn(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Tr(t){const e={};for(const n of Object.keys(t.children)){const r=Tr(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new rn(t.segments.concat(e.segments),e.children)}return t}(new rn(t.segments,e))}class Sr{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Er{constructor(t,e){this.component=t,this.route=e}}function Ir(t,e,n){const r=t._root;return Ar(r,e?e._root:null,n,[r.value])}function kr(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ar(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=In(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!sn(t.url,e.url);case"pathParamsOrQueryParamsChange":return!sn(t.url,e.url)||!ze(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Un(t,e)||!ze(t.queryParams,e.queryParams);case"paramsChange":default:return!Un(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Sr(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ar(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Er(a.outlet.component,s))}else s&&Or(e,a,i),i.canActivateChecks.push(new Sr(r)),Ar(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),Ke(o,(t,e)=>Or(t,n.getContext(e),i)),i}function Or(t,e,n){const r=In(t),i=t.value;Ke(r,(t,r)=>{Or(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Er(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Pr{}function Nr(t){return new Et.y(e=>e.error(t))}class Rr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=pr(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Fe);if(null===e)return null;const n=new Nn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Fe,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new En(n,e),i=new Rn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=Pn(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=hr(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=Mr(n);return r.sort((t,e)=>t.value.outlet===Fe?-1:e.value.outlet===Fe?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return yr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!mr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?We(n).parameters:{};i=new Nn(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qr(t),lr(t),t.component,t,Lr(e),Ur(e)+n.length,Fr(t))}else{const r=fr(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Nn(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qr(t),lr(t),t.component,t,Lr(e),Ur(e)+o.length,Fr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=pr(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new En(i,t)]}if(0===a.length&&0===c.length)return[new En(i,[])];const l=lr(t)===r,h=this.processSegment(a,u,c,l?Fe:r);return null===h?null:[new En(i,h)]}}function Dr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Mr(t){const e=[],n=new Set;for(const r of t){if(!Dr(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=Mr(r.children);e.push(new En(r.value,t))}return e.filter(t=>!n.has(t))}function Lr(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ur(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function qr(t){return t.data||{}}function Fr(t){return t.resolve||{}}function jr(t){return jt(e=>{const n=t(e);return n?(0,gt.D)(n).pipe((0,qt.U)(()=>e)):(0,mt.of)(e)})}class Zr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Vr=new r.OlP("ROUTES");class Br{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe((0,qt.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new tr(Ge(i.injector.get(Vr,void 0,r.XFs.Self|r.XFs.Optional)).map(cr),i)}),te(t=>{throw e._loader$=void 0,t}));return e._loader$=new Ut.c(n,()=>new yt.xQ).pipe((0,ve.x)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?(0,gt.D)(this.loader.load(t)):Ye(t()).pipe((0,re.zg)(t=>t instanceof r.YKP?(0,mt.of)(t):(0,gt.D)(this.compiler.compileModuleAsync(t))))}}class zr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hr,this.attachRef=null}}class Hr{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new zr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Gr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Wr(t){throw t}function Kr(t,e,n){return e.parse("/")}function Yr(t,e){return(0,mt.of)(null)}const Qr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$r={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jr=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new yt.xQ,this.errorHandler=Wr,this.malformedUriErrorHandler=Kr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Yr,afterPreactivation:Yr},this.urlHandlingStrategy=new Gr,this.routeReuseStrategy=new Zr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(r.h0i),this.console=o.get(r.c2e);const c=o.get(r.R0b);this.isNgZoneEnabled=c instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new nn(new rn([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Br(s,a,t=>this.triggerEvent(new Ne(t)),t=>this.triggerEvent(new Re(t))),this.routerState=An(this.currentUrlTree,this.rootComponentType),this.transitions=new _t({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const e=this.events;return t.pipe($t(t=>0!==t.id),(0,qt.U)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),jt(t=>{let n=!1,r=!1;return(0,mt.of)(t).pipe((0,ye.b)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),jt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return(0,mt.of)(t).pipe(jt(t=>{const n=this.transitions.getValue();return e.next(new xe(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Mt.E:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,jt(t=>function(t,e,n,r,i){return new xr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe((0,qt.U)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),(0,ye.b)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return(0,re.zg)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Rr(t,e,n,r,i,o).recognize();return null===s?Nr(new Pr):(0,mt.of)(s)}catch(N_){return Nr(N_)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe((0,qt.U)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ye.b)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new Ie(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new xe(n,this.serializeUrl(r),i,o);e.next(a);const u=An(r,this.rootComponentType).snapshot;return(0,mt.of)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Mt.E}),jr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,ye.b)(t=>{const e=new ke(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(0,qt.U)(t=>Object.assign(Object.assign({},t),{guards:Ir(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return(0,re.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?(0,mt.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return(0,gt.D)(t).pipe((0,re.zg)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,mt.of)(!0);const s=o.map(o=>{const s=kr(o,e,i);let a;if(function(t){return t&&er(t.canDeactivate)}(s))a=Ye(s.canDeactivate(t,e,n,r));else{if(!er(s))throw new Error("Invalid CanDeactivate guard");a=Ye(s(t,e,n,r))}return a.pipe(me())});return(0,mt.of)(s).pipe(ir())}(t.component,t.route,n,e,r)),me(t=>!0!==t,!0))}(s,r,i,t).pipe((0,re.zg)(n=>n&&function(t){return"boolean"==typeof t}(n)?function(t,e,n,r){return(0,gt.D)(e).pipe(ie(e=>Dt(function(t,e){return null!==t&&e&&e(new De(t)),(0,mt.of)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Le(t)),(0,mt.of)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Lt(()=>{const i=e.guards.map(i=>{const o=kr(i,e.node,n);let s;if(function(t){return t&&er(t.canActivateChild)}(o))s=Ye(o.canActivateChild(r,t));else{if(!er(o))throw new Error("Invalid CanActivateChild guard");s=Ye(o(r,t))}return s.pipe(me())});return(0,mt.of)(i).pipe(ir())}));return(0,mt.of)(i).pipe(ir())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,mt.of)(!0);const i=r.map(r=>Lt(()=>{const i=kr(r,e,n);let o;if(function(t){return t&&er(t.canActivate)}(i))o=Ye(i.canActivate(e,t));else{if(!er(i))throw new Error("Invalid CanActivate guard");o=Ye(i(e,t))}return o.pipe(me())}));return(0,mt.of)(i).pipe(ir())}(t,e.route,n))),me(t=>!0!==t,!0))}(r,o,t,e):(0,mt.of)(n)),(0,qt.U)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),(0,ye.b)(t=>{if(nr(t.guardsResult)){const e=Ve(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Ae(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),$t(t=>!!t.guardsResult||(this.cancelNavigationTransitionRestoreHistory(t,""),!1)),jr(t=>{if(t.guards.canActivateChecks.length)return(0,mt.of)(t).pipe((0,ye.b)(t=>{const e=new Oe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),jt(t=>{let e=!1;return(0,mt.of)(t).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,re.zg)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:i}}=t;if(!i.length)return(0,mt.of)(t);let o=0;return(0,gt.D)(i).pipe(ie(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return(0,mt.of)({});const o={};return(0,gt.D)(i).pipe((0,re.zg)(i=>function(t,e,n,r){const i=kr(t,e,r);return Ye(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe((0,ye.b)(t=>{o[i]=t}))),oe(1),(0,re.zg)(()=>Object.keys(o).length===i.length?(0,mt.of)(o):Mt.E))}(t._resolve,t,e,r).pipe((0,qt.U)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Pn(t,n).resolve),null)))}(t.route,e,n,r)),(0,ye.b)(()=>o++),oe(1),(0,re.zg)(e=>o===i.length?(0,mt.of)(t):Mt.E))})),(0,ye.b)({next:()=>e=!0,complete:()=>{e||this.cancelNavigationTransitionRestoreHistory(t,"At least one route resolver didn't emit any value.")}}));var n,r}),(0,ye.b)(t=>{const e=new Pe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),jr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),(0,qt.U)(t=>{const e=function(t,e,n){const r=qn(t,e._root,n?n._root:void 0);return new kn(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),(0,ye.b)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),(0,qt.U)(t=>(new Jn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),(0,ye.b)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){const e=`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?this.cancelNavigationTransitionRestoreHistory(t,e):this.cancelNavigationTransition(t,e)}this.currentNavigation=null},t=>t.lift(new be(i))),te(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=nr(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Se(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ee(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(ih){t.reject(ih)}}var i;return Mt.E}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){sr(t),this.config=t.map(cr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Vn(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new zn(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return Ke(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new zn(n,e,r)}(n);if(o.toRoot())return Vn(e.root,new rn([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Hn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Hn(t,t===e.root,0)}const r=jn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Hn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?Wn(s.segmentGroup,s.index,o.commands):Gn(s.segmentGroup,s.index,o.commands);return Vn(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,null!=u?u:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=nr(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(N_){e=this.malformedUriErrorHandler(N_,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},Qr):!1===e?Object.assign({},$r):e,nr(t))return Je(this.currentUrlTree,t,n);const r=this.parseUrl(t);return Je(this.currentUrlTree,r,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Te(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){var o,s;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),u="imperative"!==e&&"imperative"===(null==a?void 0:a.source),c=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===t.toString();if(u&&c)return Promise.resolve(!0);let l,h,d;i?(l=i.resolve,h=i.reject,d=i.promise):d=new Promise((t,e)=>{l=t,h=e});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(o=this.browserPageId)&&void 0!==o?o:0:(null!==(s=this.browserPageId)&&void 0!==s?s:0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:l,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),r=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransitionRestoreHistory(t,e){"computed"===this.canceledNavigationResolution?"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy||this.location.historyGo(this.currentPageId-t.targetPageId):this.resetUrlToCurrentUrlTree(),this.cancelNavigationTransition(t,e)}cancelNavigationTransition(t,e){const n=new Se(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.DyG),r.LFG(an),r.LFG(Hr),r.LFG(w),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),Xr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new yt.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:ei(this.skipLocationChange),replaceUrl:ei(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ei(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Jr),r.Y36(On),r.$8M("tabindex"),r.Y36(r.Qsj),r.Y36(r.SBq))},t.\u0275dir=r.lG2({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.NdJ("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})(),ti=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new yt.xQ,this.subscription=t.events.subscribe(t=>{t instanceof Te&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:ei(this.skipLocationChange),replaceUrl:ei(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ei(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Jr),r.Y36(On),r.Y36(m))},t.\u0275dir=r.lG2({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.NdJ("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Ikx("href",e.href,r.LSH),r.uIk("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.TTD]}),t})();function ei(t){return""===t||!!t}let ni=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||Fe,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ri(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Hr),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},t.\u0275dir=r.lG2({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class ri{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===On?this.route:t===Hr?this.childContexts:this.parent.get(t,e)}}class ii{}class oi{preload(t,e){return(0,mt.of)(null)}}let si=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Br(e,n,e=>t.triggerEvent(new Ne(e)),e=>t.triggerEvent(new Re(e)))}setUpPreloading(){this.subscription=this.router.events.pipe($t(t=>t instanceof Te),ie(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return(0,gt.D)(n).pipe((0,Rt.J)(),(0,qt.U)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?(0,mt.of)(e._loadedConfig):this.loader.load(t.injector,e)).pipe((0,re.zg)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Jr),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(ii))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),ai=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xe?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Te&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof qe&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new qe(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Jr),r.LFG(L),r.LFG(void 0))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();const ui=new r.OlP("ROUTER_CONFIGURATION"),ci=new r.OlP("ROUTER_FORROOT_GUARD"),li=[w,{provide:an,useClass:un},{provide:Jr,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const l=new Jr(null,t,e,n,r,i,o,Ge(s));return u&&(l.urlHandlingStrategy=u),c&&(l.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[an,Hr,w,r.zs3,r.v3s,r.Sil,Vr,ui,[class{},new r.FiY],[class{},new r.FiY]]},Hr,{provide:On,useFactory:function(t){return t.routerState.root},deps:[Jr]},{provide:r.v3s,useClass:r.EAV},si,oi,class{preload(t,e){return e().pipe(te(()=>(0,mt.of)(null)))}},{provide:ui,useValue:{enableTracing:!1}}];function hi(){return new r.PXZ("Router",Jr)}let di=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[li,mi(e),{provide:ci,useFactory:gi,deps:[[Jr,new r.FiY,new r.tp0]]},{provide:ui,useValue:n||{}},{provide:m,useFactory:pi,deps:[a,[new r.tBr(v),new r.FiY],ui]},{provide:ai,useFactory:fi,deps:[Jr,L,ui]},{provide:ii,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:oi},{provide:r.PXZ,multi:!0,useFactory:hi},[yi,{provide:r.ip1,multi:!0,useFactory:vi,deps:[yi]},{provide:bi,useFactory:_i,deps:[yi]},{provide:r.tb,multi:!0,useExisting:bi}]]}}static forChild(e){return{ngModule:t,providers:[mi(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(ci,8),r.LFG(Jr,8))},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({}),t})();function fi(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new ai(t,e,n)}function pi(t,e,n={}){return n.useHash?new b(t,e):new _(t,e)}function gi(t){return"guarded"}function mi(t){return[{provide:r.deG,multi:!0,useValue:t},{provide:Vr,multi:!0,useValue:t}]}let yi=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new yt.xQ}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Jr),r=this.injector.get(ui);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,mt.of)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(ui),n=this.injector.get(si),i=this.injector.get(ai),o=this.injector.get(Jr),s=this.injector.get(r.z2F);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(r.zs3))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})();function vi(t){return t.appInitializer.bind(t)}function _i(t){return t.bootstrapListener.bind(t)}const bi=new r.OlP("Router Initializer");var wi=n(3637),Ci=n(6682),xi=n(8819);function Ti(t,e){return n=>n.lift(new Si(t,e))}class Si{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ei(t,this.compare,this.keySelector))}}class Ei extends Ct.L{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class Ii{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new ki(t,this.observables,this.project))}}class ki extends xt{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(It(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Ai{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Oi(t,this.predicate))}}class Oi extends Ct.L{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}var Pi=n(57),Ni=(n(514),n(309)),Ri=n(7771),Di=n(8858);class Mi extends yt.xQ{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Li(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new vt.N;if(this.isStopped||this.hasError?o=_e.w.EMPTY:(this.observers.push(t),o=new Di.W(this,t)),r&&t.add(t=new Ni.ht(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Ri.c).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Li{constructor(t,e){this.time=t,this.value=e}}function Ui(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Mi(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function qi(t,e){return e?jt(()=>t,e):jt(()=>t)}var Fi=n(3101);const ji=new r.OlP("angularfire2.auth.use-emulator"),Zi=new r.OlP("angularfire2.auth.settings"),Vi=new r.OlP("angularfire2.auth.tenant-id"),Bi=new r.OlP("angularfire2.auth.langugage-code"),zi=new r.OlP("angularfire2.auth.use-device-language"),Hi=new r.OlP("angularfire.auth.persistence");let Gi=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Pi.HU(i),d=(0,Pi.ss)(h),f=new yt.xQ,p=(0,mt.of)(void 0).pipe((0,Ni.QV)(h.outsideAngular),jt(()=>i.runOutsideAngular(()=>n.e(336).then(n.bind(n,1336)))),(0,qt.U)(()=>(0,Pi.on)(t,i,e)),(0,qt.U)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return(0,Pi.sI)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Ui({bufferSize:1,refCount:!1}));if(M(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,mt.of)(null);else{p.pipe(me()).subscribe();const t=p.pipe(jt(t=>t.getRedirectResult().then(t=>t,()=>null)),d,Ui({bufferSize:1,refCount:!1})),e=t=>new Et.y(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(jt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(jt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(qi(n),(0,Fi.R)(h.outsideAngular),(0,Ni.QV)(h.insideAngular)),this.user=t.pipe(qi(r),(0,Fi.R)(h.outsideAngular),(0,Ni.QV)(h.insideAngular)),this.idToken=this.user.pipe(jt(t=>t?(0,gt.D)(t.getIdToken()):(0,mt.of)(null))),this.idTokenResult=this.user.pipe(jt(t=>t?(0,gt.D)(t.getIdTokenResult()):(0,mt.of)(null))),this.credential=(0,Ci.T)(t,f,this.authState.pipe($t(t=>!t))).pipe((0,qt.U)(t=>(null==t?void 0:t.user)?t:null),(0,Fi.R)(h.outsideAngular),(0,Ni.QV)(h.insideAngular))}return(0,Pi.pX)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Pi.Dh),r.LFG(Pi.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ji,8),r.LFG(Zi,8),r.LFG(Vi,8),r.LFG(Bi,8),r.LFG(zi,8),r.LFG(Hi,8))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(Pi.Dh),(0,r.LFG)(Pi.xv,8),(0,r.LFG)(r.Lbi),(0,r.LFG)(r.R0b),(0,r.LFG)(ji,8),(0,r.LFG)(Zi,8),(0,r.LFG)(Vi,8),(0,r.LFG)(Bi,8),(0,r.LFG)(zi,8),(0,r.LFG)(Hi,8))},token:t,providedIn:"any"}),t})();var Wi=n(2329);function Ki(t){return null==t}function Yi(t){return"function"==typeof t.set}function Qi(t,e){return Yi(e)?e:t.ref(e)}function $i(t,e){if("string"==typeof t)return e.stringCase();if(Yi(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Ji(t,e,n="on",r=wi.z){return new Et.y(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe((0,qt.U)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),(0,xi.B)())}function Xi(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function to(t,e){const{payload:n,prevKey:r,key:i}=e,o=Xi(t,i),s=function(t,e){if(Ki(e))return 0;{const n=Xi(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function eo(t){return(Ki(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function no(t,e,n){return function(t,e,n){return Ji(t,"value","once",n).pipe(jt(r=>{const i=[(0,mt.of)(r)];return e.forEach(e=>i.push(Ji(t,e,"on",n))),(0,Ci.T)(...i).pipe(Kt(to,[]))}),Ti())}(t,e=eo(e),n)}function ro(t,e,n){const r=(e=eo(e)).map(e=>Ji(t,e,"on",n));return(0,Ci.T)(...r)}function io(t,e){return function(n,r){return $i(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function oo(t,e){return function(){return Ji(t,"value","on",e)}}const so=new r.OlP("angularfire2.realtimeDatabaseURL"),ao=new r.OlP("angularfire2.database.use-emulator");let uo=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Pi.HU(i),this.keepUnstableUntilFirst=(0,Pi.ss)(this.schedulers);const a=o,u=(0,Pi.on)(t,i,e);!Wi.Z.auth&&s&&(0,Pi.yq)(),this.database=(0,Pi.sI)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Qi(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:io(r,"update"),set:io(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?$i(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>no(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>ro(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Ji(t,"value","on",e).pipe((0,qt.U)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Ii(t,n))}}(e),(0,qt.U)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Ai(r))),(0,qt.U)(t=>t.actions));var r}(t,ro(t,e).pipe(Kt((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>no(t,r,n).pipe((0,qt.U)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Qi(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>oo(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>oo(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,(0,qt.U)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Pi.Dh),r.LFG(Pi.xv,8),r.LFG(so,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(ao,8),r.LFG(ji,8))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(Pi.Dh),(0,r.LFG)(Pi.xv,8),(0,r.LFG)(so,8),(0,r.LFG)(r.Lbi),(0,r.LFG)(r.R0b),(0,r.LFG)(ao,8),(0,r.LFG)(ji,8))},token:t,providedIn:"any"}),t})(),co=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[uo]}),t})(),lo=(()=>{class t{constructor(t,e){this.firebase=t,this.firebaseAuth=e,this.count=0,this.cartitems=[],this.orderList=this.firebase.list("orders"),this.userList=this.firebase.list("users"),this.updateList=this.firebase.list("users"),this.contactList=this.firebase.list("contacts"),this.cartList=this.firebase.list("cart")}addcartitems(t){for(var e=0,n=0;n<this.cartitems.length;n++)t.imag.endsWith(this.cartitems[n].imag)&&(alert("item already added to cart"),e=1);0===e&&(this.cartitems.push(t),localStorage.setItem("cart",JSON.stringify(this.cartitems)),console.log(this.cartitems),console.log(localStorage.getItem("cart")),this.cartList.push(t),alert("Item added to cart"),location.reload())}getcartitems(t){var e=[];return this.cartList.snapshotChanges().subscribe(n=>{this.orderarray1=n.map(n=>{this.firebaseAuth.onAuthStateChanged(r=>{if(console.log(n.payload.val().email),t===n.payload.val().email){var i={imag:n.payload.val().imag,price:n.payload.val().price,name:n.payload.val().name,quantity:n.payload.val().quantity,uname:n.payload.val().uname,email:n.payload.val().email};e.push(i)}}),console.log(e)})}),e}removecartitems(t,e){this.cartList.snapshotChanges().subscribe(n=>{this.orderarray1=n.map(n=>{this.firebaseAuth.onAuthStateChanged(r=>{console.log(n.payload.val().email," next ",n.payload.val().imag),console.log(t),t.imag.endsWith(n.payload.val().imag)&&e===n.payload.val().email&&this.cartList.remove(String(n.key))})})}),alert("Item removed from cart")}getOrdersFromFirebase(){return this.orderList}addOrdersToFirebase(t){this.orderList.push(t),alert("order placed")}addUsersTOFirebase(t){this.userList.push(t),alert("profile created")}updateUsers(t,e,n,r,i){this.updateList.set(t,{0:{username:n,mobileno:r,emailadd:e,address:i}})}removeOrders(t){this.orderList.remove(t),alert("order removed")}contactAdd(t){this.contactList.push(t),alert("message sent successfully")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(uo),r.LFG(Gi))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ho(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function fo(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function s(t){ho(o,r,i,s,a,"next",t)}function a(t){ho(o,r,i,s,a,"throw",t)}s(void 0)})}}function po(){return t=>t.lift(new go)}class go{call(t,e){return e.subscribe(new mo(t))}}class mo extends Ct.L{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var yo=n(6232),vo=n(3701),_o=n(300),bo=function(t,e){return(bo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function wo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Co,xo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},To=To||{},So=xo||self;function Eo(){}function Io(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ko(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ao="closure_uid_"+(1e9*Math.random()>>>0),Oo=0;function Po(t,e,n){return t.call.apply(t.bind,arguments)}function No(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ro(t,e,n){return(Ro=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Po:No).apply(null,arguments)}function Do(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Mo(){return Date.now()}function Lo(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Uo(){this.j=this.j,this.i=this.i}Uo.prototype.j=!1,Uo.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Ao)&&t[Ao]||(t[Ao]=++Oo)}(this)},Uo.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var qo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Fo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function jo(t){return Array.prototype.concat.apply([],arguments)}function Zo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Vo(t){return/^[\s\xa0]*$/.test(t)}var Bo,zo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ho(t,e){return-1!=t.indexOf(e)}function Go(t,e){return t<e?-1:t>e?1:0}t:{var Wo=So.navigator;if(Wo){var Ko=Wo.userAgent;if(Ko){Bo=Ko;break t}}Bo=""}function Yo(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Qo(t){var e={};for(var n in t)e[n]=t[n];return e}var $o="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Jo(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<$o.length;o++)n=$o[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Xo(t){return Xo[" "](t),t}Xo[" "]=Eo;var ts,es,ns=Ho(Bo,"Opera"),rs=Ho(Bo,"Trident")||Ho(Bo,"MSIE"),is=Ho(Bo,"Edge"),os=is||rs,ss=Ho(Bo,"Gecko")&&!(Ho(Bo.toLowerCase(),"webkit")&&!Ho(Bo,"Edge"))&&!(Ho(Bo,"Trident")||Ho(Bo,"MSIE"))&&!Ho(Bo,"Edge"),as=Ho(Bo.toLowerCase(),"webkit")&&!Ho(Bo,"Edge");function us(){var t=So.document;return t?t.documentMode:void 0}t:{var cs="",ls=(es=Bo,ss?/rv:([^\);]+)(\)|;)/.exec(es):is?/Edge\/([\d\.]+)/.exec(es):rs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(es):as?/WebKit\/(\S+)/.exec(es):ns?/(?:Version)[ \/]?(\S+)/.exec(es):void 0);if(ls&&(cs=ls?ls[1]:""),rs){var hs=us();if(null!=hs&&hs>parseFloat(cs)){ts=String(hs);break t}}ts=cs}var ds={};function fs(t){return function(t,e){var n=ds;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=zo(String(ts)).split("."),r=zo(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Go(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Go(0==s[2].length,0==a[2].length)||Go(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var ps=So.document&&rs&&(us()||parseInt(ts,10))||void 0,gs=!rs||9<=Number(ps),ms=rs&&!fs("9"),ys=function(){if(!So.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{So.addEventListener("test",Eo,e),So.removeEventListener("test",Eo,e)}catch(n){}return t}();function vs(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function _s(t,e){if(vs.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ss){t:{try{Xo(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:bs[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}vs.prototype.b=function(){this.defaultPrevented=!0},Lo(_s,vs);var bs={2:"touch",3:"pen",4:"mouse"};_s.prototype.b=function(){_s.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,ms)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ws="closure_listenable_"+(1e6*Math.random()|0),Cs=0;function xs(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Cs,this.Y=this.Z=!1}function Ts(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ss(t){this.src=t,this.a={},this.b=0}function Es(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=qo(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ts(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function Is(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ss.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Is(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new xs(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ks="closure_lm_"+(1e6*Math.random()|0),As={};function Os(t,e,n,r,i){if(r&&r.once)return Ns(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Os(t,e[o],n,r,i);return null}return n=js(n),t&&t[ws]?t.va(e,n,ko(r)?!!r.capture:!!r,i):Ps(t,e,n,!1,r,i)}function Ps(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ko(i)?!!i.capture:!!i;if(s&&!gs)return null;var a=qs(t);if(a||(t[ks]=a=new Ss(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Us,e=gs?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ys||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ms(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Ns(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ns(t,e[o],n,r,i);return null}return n=js(n),t&&t[ws]?t.wa(e,n,ko(r)?!!r.capture:!!r,i):Ps(t,e,n,!0,r,i)}function Rs(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Rs(t,e[o],n,r,i);else r=ko(r)?!!r.capture:!!r,n=js(n),t&&t[ws]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=Is(o=t.a[e],n,r,i))&&(Ts(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=qs(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Is(e,n,r,i)),(n=-1<t?e[t]:null)&&Ds(n))}function Ds(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ws])Es(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ms(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=qs(e))?(Es(n,t),0==n.b&&(n.src=null,e[ks]=null)):Ts(t)}}}function Ms(t){return t in As?As[t]:As[t]="on"+t}function Ls(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ds(t),n.call(r,e)}function Us(t,e){if(t.Y)return!0;if(!gs){if(!e)t:{e=["window","event"];for(var n=So,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ls(t,e=new _s(e,this))}return Ls(t,new _s(e,this))}function qs(t){return(t=t[ks])instanceof Ss?t:null}var Fs="__closure_events_fn_"+(1e9*Math.random()>>>0);function js(t){return"function"==typeof t?t:(t[Fs]||(t[Fs]=function(e){return t.handleEvent(e)}),t[Fs])}function Zs(){Uo.call(this),this.c=new Ss(this),this.J=this,this.C=null}function Vs(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new vs(e,t);else if(e instanceof vs)e.target=e.target||t;else{var i=e;Jo(e=new vs(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Bs(s,r,!0,e)&&i}if(i=Bs(s=e.a=t,r,!0,e)&&i,i=Bs(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Bs(s=e.a=n[o],r,!1,e)&&i}function Bs(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Es(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Lo(Zs,Uo),Zs.prototype[ws]=!0,(Co=Zs.prototype).addEventListener=function(t,e,n,r){Os(this,t,e,n,r)},Co.removeEventListener=function(t,e,n,r){Rs(this,t,e,n,r)},Co.G=function(){if(Zs.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ts(n[r]);delete e.a[t],e.b--}}this.C=null},Co.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Co.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var zs=So.JSON.stringify;function Hs(){this.b=this.a=null}var Gs,Ws=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Ys},function(t){t.reset()});function Ks(){var t=Xs,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ys(){this.next=this.b=this.a=null}function Qs(t){So.setTimeout(function(){throw t},0)}function $s(t,e){Gs||function(){var t=So.Promise.resolve(void 0);Gs=function(){t.then(ta)}}(),Js||(Gs(),Js=!0),Xs.add(t,e)}Hs.prototype.add=function(t,e){var n=Ws.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ys.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ys.prototype.reset=function(){this.next=this.b=this.a=null};var Js=!1,Xs=new Hs;function ta(){for(var t;t=Ks();){try{t.a.call(t.b)}catch(n){Qs(n)}var e=Ws;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Js=!1}function ea(t,e){Zs.call(this),this.b=t||1,this.a=e||So,this.f=Ro(this.Za,this),this.g=Mo()}function na(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function ra(t,e,n){if("function"==typeof t)n&&(t=Ro(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ro(t.handleEvent,t)}return 2147483647<Number(e)?-1:So.setTimeout(t,e||0)}function ia(t){t.a=ra(function(){t.a=null,t.c&&(t.c=!1,ia(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Lo(ea,Zs),(Co=ea.prototype).aa=!1,Co.M=null,Co.Za=function(){if(this.aa){var t=Mo()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Vs(this,"tick"),this.aa&&(na(this),this.start()))}},Co.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Mo())},Co.G=function(){ea.X.G.call(this),na(this),delete this.a};var oa=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}bo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:ia(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(So.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(Uo);function sa(t){Uo.call(this),this.b=t,this.a={}}Lo(sa,Uo);var aa=[];function ua(t,e,n,r){Array.isArray(n)||(n&&(aa[0]=n.toString()),n=aa);for(var i=0;i<n.length;i++){var o=Os(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ca(t){Yo(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ds(t)},t),t.a={}}function la(){this.a=!0}function ha(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return zs(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}sa.prototype.G=function(){sa.X.G.call(this),ca(this)},sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},la.prototype.info=function(){};var da={},fa=null;function pa(){return fa=fa||new Zs}function ga(t){vs.call(this,da.Fa,t)}function ma(t){var e=pa();Vs(e,new ga(e,t))}function ya(t,e){vs.call(this,da.STAT_EVENT,t),this.stat=e}function va(t){var e=pa();Vs(e,new ya(e,t))}function _a(t){vs.call(this,da.Ga,t)}function ba(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return So.setTimeout(function(){t()},e)}da.Fa="serverreachability",Lo(ga,vs),da.STAT_EVENT="statevent",Lo(ya,vs),da.Ga="timingevent",Lo(_a,vs);var wa={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ca={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function xa(){}function Ta(){}xa.prototype.a=null;var Sa,Ea={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ia(){vs.call(this,"d")}function ka(){vs.call(this,"c")}function Aa(){}function Oa(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new sa(this),this.P=Pa,this.R=new ea(t=os?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Lo(Ia,vs),Lo(ka,vs),Lo(Aa,xa),Sa=new Aa;var Pa=45e3,Na={},Ra={};function Da(t,e,n){t.H=1,t.i=nu(Qa(e)),t.j=n,t.I=!0,Ma(t,null)}function Ma(t,e){t.u=Mo(),qa(t),t.l=Qa(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),gu(n.b,"t",r),t.D=0,t.a=cc(t.g,t.g.C?e:null),0<t.O&&(t.F=new oa(Ro(t.Ca,t,t.a),t.O)),ua(t.J,t.a,"readystatechange",t.Xa),e=t.B?Qo(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ma(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function La(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Ua(t,n);if(i==Ra){4==e&&(t.h=4,va(14),r=!1),ha(t.c,t.f,null,"[Incomplete Response]");break}if(i==Na){t.h=4,va(15),ha(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ha(t.c,t.f,i,null),Ba(t,i)}4==e&&0==n.length&&(t.h=1,va(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),ec(e),e.F=!0,va(11))):(ha(t.c,t.f,n,"[Invalid Chunked Response]"),Va(t),Za(t))}function Ua(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Ra:(n=Number(e.substring(n,r)),isNaN(n)?Na:(r+=1)+n>e.length?Ra:(e=e.substr(r,n),t.D=r+n,e))}function qa(t){t.T=Mo()+t.P,Fa(t,t.P)}function Fa(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ba(Ro(t.Va,t),e)}function ja(t){t.o&&(So.clearTimeout(t.o),t.o=null)}function Za(t){0==t.g.v||t.A||ic(t.g,t)}function Va(t){ja(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,na(t.R),ca(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ba(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Cu(n.b,t)))if(n.I=t.N,!t.C&&Cu(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Yv){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;rc(n),Gu(n)}tc(n),va(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ba(Ro(n.Sa,n),6e3));if(1>=wu(n.b)&&n.ea){try{n.ea()}catch(Yv){}n.ea=void 0}}else sc(n,11)}else if((t.C||n.a==t)&&rc(n),!Vo(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Ho(l,"spdy")||Ho(l,"quic")||Ho(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(xu(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,eu(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Mo()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=uc(u,u.C?u.ga:null,u.fa),f.C){Tu(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(ja(p),qa(p)),u.a=f}else Xu(u);0<n.g.length&&Yu(n)}else"stop"!=i[0]&&"close"!=i[0]||sc(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?sc(n,7):Hu(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);ma(4)}catch(Yv){}}function za(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Io(t)||"string"==typeof t)Fo(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Io(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Io(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ha(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ha)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ga(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Wa(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Wa(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Wa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Co=Oa.prototype).setTimeout=function(t){this.P=t},Co.Xa=function(t){t=t.target;var e=this.F;e&&3==Zu(t)?e.f():this.Ca(t)},Co.Ca=function(t){try{if(t==this.a)t:{var e=Zu(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!os&&!this.a.$())){this.A||4!=e||7==n||ma(8==n||0>=r?3:2),ja(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Vo(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,va(12),Va(this),Za(this);break t}ha(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ba(this,u)}this.I?(La(this,e,o),os&&this.b&&3==e&&(ua(this.J,this.R,"tick",this.Wa),this.R.start())):(ha(this.c,this.f,o,null),Ba(this,o)),4==e&&Va(this),this.b&&!this.A&&(4==e?ic(this.g,this):(this.b=!1,qa(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,va(12)):(this.h=0,va(13)),Va(this),Za(this)}}}catch(c){}},Co.Wa=function(){if(this.a){var t=Zu(this.a),e=this.a.$();this.D<e.length&&(ja(this),La(this,t,e),this.b&&4!=t&&qa(this))}},Co.cancel=function(){this.A=!0,Va(this)},Co.Va=function(){this.o=null;var t=Mo();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(ma(3),va(17)),Va(this),this.h=2,Za(this)):Fa(this,this.T-t)},(Co=Ha.prototype).K=function(){Ga(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Co.L=function(){return Ga(this),this.a.concat()},Co.get=function(t,e){return Wa(this.b,t)?this.b[t]:e},Co.set=function(t,e){Wa(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Co.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ka=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ya(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Ya){this.a=void 0!==e?e:t.a,$a(this,t.f),this.j=t.j,Ja(this,t.c),Xa(this,t.h),this.g=t.g,e=t.b;var n=new hu;n.c=e.c,e.a&&(n.a=new Ha(e.a),n.b=e.b),tu(this,n),this.i=t.i}else t&&(n=String(t).match(Ka))?(this.a=!!e,$a(this,n[1]||"",!0),this.j=ru(n[2]||""),Ja(this,n[3]||"",!0),Xa(this,n[4]),this.g=ru(n[5]||"",!0),tu(this,n[6]||"",!0),this.i=ru(n[7]||"")):(this.a=!!e,this.b=new hu(null,this.a))}function Qa(t){return new Ya(t)}function $a(t,e,n){t.f=n?ru(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ja(t,e,n){t.c=n?ru(e,!0):e}function Xa(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function tu(t,e,n){e instanceof hu?(t.b=e,function(t,e){e&&!t.f&&(du(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(fu(this,e),gu(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=iu(e,cu)),t.b=new hu(e,t.a))}function eu(t,e,n){t.b.set(e,n)}function nu(t){return eu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Mo()).toString(36)),t}function ru(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function iu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ou),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ou(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ya.prototype.toString=function(){var t=[],e=this.f;e&&t.push(iu(e,su,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(iu(e,su,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(iu(n,"/"==n.charAt(0)?uu:au,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",iu(n,lu)),t.join("")};var su=/[#\/\?@]/g,au=/[#\?:]/g,uu=/[#\?]/g,cu=/[#\?@]/g,lu=/#/g;function hu(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function du(t){t.a||(t.a=new Ha,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function fu(t,e){du(t),e=mu(t,e),Wa(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Wa((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ga(t)))}function pu(t,e){return du(t),e=mu(t,e),Wa(t.a.b,e)}function gu(t,e,n){fu(t,e),0<n.length&&(t.c=null,t.a.set(mu(t,e),Zo(n)),t.b+=n.length)}function mu(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Co=hu.prototype).add=function(t,e){du(this),this.c=null,t=mu(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Co.forEach=function(t,e){du(this),this.a.forEach(function(n,r){Fo(n,function(n){t.call(e,n,r,this)},this)},this)},Co.L=function(){du(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Co.K=function(t){du(this);var e=[];if("string"==typeof t)pu(this,t)&&(e=jo(e,this.a.get(mu(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=jo(e,t[n])}return e},Co.set=function(t,e){return du(this),this.c=null,pu(this,t=mu(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Co.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Co.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var yu=function(t,e){this.b=t,this.a=e};function vu(t){this.g=t||_u,t=So.PerformanceNavigationTiming?0<(t=So.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(So.ia&&So.ia.ya&&So.ia.ya()&&So.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var _u=10;function bu(t){return!!t.b||!!t.a&&t.a.size>=t.f}function wu(t){return t.b?1:t.a?t.a.size:0}function Cu(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function xu(t,e){t.a?t.a.add(e):t.b=e}function Tu(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Su(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=wo(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Zo(t.c)}function Eu(){}function Iu(){this.a=new Eu}function ku(t,e,n){var r=n||"";try{za(t,function(t,n){var i=t;ko(t)&&(i=zs(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(N_){throw e.push(r+"type="+encodeURIComponent("_badmap")),N_}}function Au(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}vu.prototype.cancel=function(){var t,e;if(this.c=Su(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=wo(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Eu.prototype.stringify=function(t){return So.JSON.stringify(t,void 0)},Eu.prototype.parse=function(t){return So.JSON.parse(t,void 0)};var Ou=So.JSON.parse;function Pu(t){Zs.call(this),this.headers=new Ha,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Nu,this.D=this.F=!1}Lo(Pu,Zs);var Nu="",Ru=/^https?$/i,Du=["POST","PUT"];function Mu(t){return"content-type"==t.toLowerCase()}function Lu(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Uu(t),Fu(t)}function Uu(t){t.u||(t.u=!0,Vs(t,"complete"),Vs(t,"error"))}function qu(t){if(t.b&&void 0!==To&&(!t.s[1]||4!=Zu(t)||2!=t.W()))if(t.l&&4==Zu(t))ra(t.za,0,t);else if(Vs(t,"readystatechange"),4==Zu(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Ka)[1]||null;if(!o&&So.self&&So.self.location){var s=So.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ru.test(o?o.toLowerCase():"")}e=i}if(e)Vs(t,"complete"),Vs(t,"success");else{t.h=6;try{var a=2<Zu(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Uu(t)}}finally{Fu(t)}}}function Fu(t,e){if(t.a){ju(t);var n=t.a,r=t.s[0]?Eo:null;t.a=null,t.s=null,e||Vs(t,"ready");try{n.onreadystatechange=r}catch(N_){}}}function ju(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(So.clearTimeout(t.m),t.m=null)}function Zu(t){return t.a?t.a.readyState:0}function Vu(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Yo(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):eu(t,e,n))}function Bu(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function zu(t){this.pa=0,this.g=[],this.c=new la,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Bu("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Bu("baseRetryDelayMs",5e3,t),this.Ra=Bu("retryDelaySeedMs",1e4,t),this.Ma=Bu("forwardChannelMaxRetries",2,t),this.ma=Bu("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new vu(t&&t.concurrentRequestLimit),this.ka=new Iu,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Hu(t){if(Wu(t),3==t.v){var e=t.R++,n=Qa(t.B);eu(n,"SID",t.J),eu(n,"RID",e),eu(n,"TYPE","terminate"),$u(t,n),(e=new Oa(t,t.c,e,void 0)).H=2,e.i=nu(Qa(n)),n=!1,So.navigator&&So.navigator.sendBeacon&&(n=So.navigator.sendBeacon(e.i.toString(),"")),!n&&So.Image&&((new Image).src=e.i,n=!0),n||(e.a=cc(e.g,null),e.a.ba(e.i)),e.u=Mo(),qa(e)}ac(t)}function Gu(t){t.a&&(ec(t),t.a.cancel(),t.a=null)}function Wu(t){Gu(t),t.j&&(So.clearTimeout(t.j),t.j=null),rc(t),t.b.cancel(),t.h&&("number"==typeof t.h&&So.clearTimeout(t.h),t.h=null)}function Ku(t,e){t.g.push(new yu(t.Oa++,e)),3==t.v&&Yu(t)}function Yu(t){bu(t.b)||t.h||(t.h=!0,$s(t.Ba,t),t.u=0)}function Qu(t,e){var n;n=e?e.f:t.R++;var r=Qa(t.B);eu(r,"SID",t.J),eu(r,"RID",n),eu(r,"AID",t.P),$u(t,r),t.i&&t.l&&Vu(r,t.i,t.l),n=new Oa(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ju(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),xu(t.b,n),Da(n,r,e)}function $u(t,e){t.f&&za({},function(t,n){eu(e,n,t)})}function Ju(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Ro(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{ku(l,s,"req"+c+"_")}catch(zc){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Xu(t){t.a||t.j||(t.T=1,$s(t.Aa,t),t.o=0)}function tc(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=ba(Ro(t.Aa,t),oc(t,t.o)),t.o++,0))}function ec(t){null!=t.s&&(So.clearTimeout(t.s),t.s=null)}function nc(t){t.a=new Oa(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Qa(t.la);eu(e,"RID","rpc"),eu(e,"SID",t.J),eu(e,"CI",t.H?"0":"1"),eu(e,"AID",t.P),$u(t,e),eu(e,"TYPE","xmlhttp"),t.i&&t.l&&Vu(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=nu(Qa(e)),n.j=null,n.I=!0,Ma(n,t)}function rc(t){null!=t.m&&(So.clearTimeout(t.m),t.m=null)}function ic(t,e){var n=null;if(t.a==e){rc(t),ec(t),t.a=null;var r=2}else{if(!Cu(t.b,e))return;n=e.s,Tu(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Mo()-e.u;var i=t.u;Vs(r=pa(),new _a(r,n,e,i)),Yu(t)}else Xu(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(wu(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ba(Ro(t.Ba,t,e),oc(t,t.u)),t.u++,0)))}(t,e)||2==r&&tc(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:sc(t,5);break;case 4:sc(t,10);break;case 3:sc(t,6);break;default:sc(t,2)}}function oc(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function sc(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Ro(t.Ya,t);n||(n=new Ya("//www.google.com/images/cleardot.gif"),So.location&&"http"==So.location.protocol||$a(n,"https"),nu(n)),function(t,e){var n=new la;if(So.Image){var r=new Image;r.onload=Do(Au,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Do(Au,n,r,"TestLoadImage: error",!1,e),r.onabort=Do(Au,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Do(Au,n,r,"TestLoadImage: timeout",!1,e),So.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else va(2);t.v=0,t.f&&t.f.ra(e),ac(t),Wu(t)}function ac(t){t.v=0,t.I=-1,t.f&&(0==Su(t.b).length&&0==t.g.length||(t.b.c.length=0,Zo(t.g),t.g.length=0),t.f.qa())}function uc(t,e,n){var r=function(t){return t instanceof Ya?Qa(t):new Ya(t,void 0)}(n);if(""!=r.c)e&&Ja(r,e+"."+r.c),Xa(r,r.h);else{var i=So.location;r=function(t,e,n,r){var i=new Ya(null,void 0);return t&&$a(i,t),e&&Ja(i,e),n&&Xa(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Yo(t.V,function(t,e){eu(r,e,t)}),n=t.na,(e=t.A)&&n&&eu(r,e,n),eu(r,"VER",t.ha),$u(t,r),r}function cc(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pu(t.Na)).F=t.C,e}function lc(){}function hc(){if(rs&&!(10<=Number(ps)))throw Error("Environmental error: no available transport.")}function dc(t,e){Zs.call(this),this.a=new zu(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Vo(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Vo(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new gc(this)}function fc(t){Ia.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function pc(){ka.call(this),this.status=1}function gc(t){this.a=t}(Co=Pu.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Sa),this.a.onreadystatechange=Ro(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void Lu(this,o)}t=n||"";var i=new Ha(this.headers);r&&za(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Mu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=So.FormData&&t instanceof So.FormData,!(0<=qo(Du,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ju(this),0<this.o&&((this.D=function(t){return rs&&fs(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Ro(this.xa,this)):this.m=ra(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Lu(this,o)}},Co.xa=function(){void 0!==To&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Vs(this,"timeout"),this.abort(8))},Co.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Vs(this,"complete"),Vs(this,"abort"),Fu(this))},Co.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Fu(this,!0)),Pu.X.G.call(this)},Co.za=function(){this.j||(this.A||this.l||this.g?qu(this):this.Ua())},Co.Ua=function(){qu(this)},Co.W=function(){try{return 2<Zu(this)?this.a.status:-1}catch(es){return-1}},Co.$=function(){try{return this.a?this.a.responseText:""}catch(es){return""}},Co.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Ou(e)}},Co.ua=function(){return this.h},Co.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Co=zu.prototype).ha=8,Co.v=1,Co.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Oa(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Jo(r=Qo(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ju(this,n,e),eu(i=Qa(this.B),"RID",t),eu(i,"CVER",22),this.A&&eu(i,"X-HTTP-Session-Id",this.A),$u(this,i),this.i&&r&&Vu(i,this.i,r),xu(this.b,n),this.Ia&&eu(i,"TYPE","init"),this.da?(eu(i,"$req",e),eu(i,"SID","null"),n.U=!0,Da(n,i,null)):Da(n,i,e),this.v=2}}else 3==this.v&&(t?Qu(this,t):0==this.g.length||bu(this.b)||Qu(this))},Co.Aa=function(){if(this.j=null,nc(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ba(Ro(this.Ta,this),t)}},Co.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,va(10),Gu(this),nc(this))},Co.Sa=function(){null!=this.m&&(this.m=null,Gu(this),tc(this),va(19))},Co.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),va(2)):(this.c.info("Failed to ping google.com"),va(1))},(Co=lc.prototype).ta=function(){},Co.sa=function(){},Co.ra=function(){},Co.qa=function(){},Co.Ja=function(){},hc.prototype.a=function(t,e){return new dc(t,e)},Lo(dc,Zs),dc.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;va(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=uc(t,null,t.fa),Yu(t)},dc.prototype.close=function(){Hu(this.a)},dc.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Ku(this.a,e)}else this.l?((e={}).__data__=zs(t),Ku(this.a,e)):Ku(this.a,t)},dc.prototype.G=function(){this.a.f=null,delete this.f,Hu(this.a),delete this.a,dc.X.G.call(this)},Lo(fc,Ia),Lo(pc,ka),Lo(gc,lc),gc.prototype.ta=function(){Vs(this.a,"a")},gc.prototype.sa=function(t){Vs(this.a,new fc(t))},gc.prototype.ra=function(t){Vs(this.a,new pc(t))},gc.prototype.qa=function(){Vs(this.a,"b")},hc.prototype.createWebChannel=hc.prototype.a,dc.prototype.send=dc.prototype.h,dc.prototype.open=dc.prototype.g,dc.prototype.close=dc.prototype.close,wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,Ca.COMPLETE="complete",Ta.EventType=Ea,Ea.OPEN="a",Ea.CLOSE="b",Ea.ERROR="c",Ea.MESSAGE="d",Zs.prototype.listen=Zs.prototype.va,Pu.prototype.listenOnce=Pu.prototype.wa,Pu.prototype.getLastError=Pu.prototype.Qa,Pu.prototype.getLastErrorCode=Pu.prototype.ua,Pu.prototype.getStatus=Pu.prototype.W,Pu.prototype.getResponseJson=Pu.prototype.Pa,Pu.prototype.getResponseText=Pu.prototype.$,Pu.prototype.send=Pu.prototype.ba;var mc=wa,yc=Ca,vc=da,_c=Ta,bc=Pu,wc=function(t,e){return(wc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Cc(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}wc(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function xc(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(N_){o(N_)}}function a(t){try{u(r.throw(t))}catch(N_){o(N_)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function Tc(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(N_){o=[6,N_],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Sc(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}var Ec=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Ec.o=-1;var Ic={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},kc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Cc(e,t),e}(Error),Ac=new _o.Yd("@firebase/firestore");function Oc(){return Ac.logLevel}function Pc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ac.logLevel<=_o.in.DEBUG){var r=e.map(Dc);Ac.debug.apply(Ac,Sc(["Firestore (8.5.0): "+t],r))}}function Nc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ac.logLevel<=_o.in.ERROR){var r=e.map(Dc);Ac.error.apply(Ac,Sc(["Firestore (8.5.0): "+t],r))}}function Rc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Ac.logLevel<=_o.in.WARN){var r=e.map(Dc);Ac.warn.apply(Ac,Sc(["Firestore (8.5.0): "+t],r))}}function Dc(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(N_){return t}}function Mc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw Nc(e),new Error(e)}function Lc(t,e){t||Mc()}function Uc(t,e){return t}function qc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Fc=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=qc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function jc(t,e){return t<e?-1:t>e?1:0}function Zc(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function Vc(t){return t+"\0"}var Bc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new kc(Ic.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new kc(Ic.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new kc(Ic.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kc(Ic.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?jc(this.nanoseconds,t.nanoseconds):jc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),zc=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Bc(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Hc(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Wc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Kc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Mc(),void 0===n?n=t.length-e:n>t.length-e&&Mc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Yc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cc(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new kc(Ic.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Kc),Qc=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cc(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Qc.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new kc(Ic.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new kc(Ic.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new kc(Ic.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new kc(Ic.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Kc),Jc=function(){function t(t){this.fields=t,t.sort($c.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Zc(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Xc=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return jc(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Xc.EMPTY_BYTE_STRING=new Xc("");var tl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function el(t){if(Lc(!!t),"string"==typeof t){var e=0,n=tl.exec(t);if(Lc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:nl(t.seconds),nanos:nl(t.nanos)}}function nl(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function rl(t){return"string"==typeof t?Xc.fromBase64String(t):Xc.fromUint8Array(t)}function il(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ol(t){var e=t.mapValue.fields.__previous_value__;return il(e)?ol(e):e}function sl(t){var e=el(t.mapValue.fields.__local_write_time__.timestampValue);return new Bc(e.seconds,e.nanos)}function al(t){return null==t}function ul(t){return 0===t&&1/t==-1/0}function cl(t){return"number"==typeof t&&Number.isInteger(t)&&!ul(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ll=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Yc.fromString(e))},t.fromName=function(e){return new t(Yc.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Yc.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Yc.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Yc(e.slice()))},t}();function hl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?il(t)?4:10:Mc()}function dl(t,e){var n=hl(t);if(n!==hl(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return sl(t).isEqual(sl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=el(t.timestampValue),r=el(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return rl(t.bytesValue).isEqual(rl(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return nl(t.geoPointValue.latitude)===nl(e.geoPointValue.latitude)&&nl(t.geoPointValue.longitude)===nl(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return nl(t.integerValue)===nl(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=nl(t.doubleValue),r=nl(e.doubleValue);return n===r?ul(n)===ul(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Zc(t.arrayValue.values||[],e.arrayValue.values||[],dl);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Hc(n)!==Hc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!dl(n[i],r[i])))return!1;return!0}(t,e);default:return Mc()}}function fl(t,e){return void 0!==(t.values||[]).find(function(t){return dl(t,e)})}function pl(t,e){var n=hl(t),r=hl(e);if(n!==r)return jc(n,r);switch(n){case 0:return 0;case 1:return jc(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=nl(t.integerValue||t.doubleValue),r=nl(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return gl(t.timestampValue,e.timestampValue);case 4:return gl(sl(t),sl(e));case 5:return jc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=rl(t),r=rl(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=jc(n[i],r[i]);if(0!==o)return o}return jc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=jc(nl(t.latitude),nl(e.latitude));return 0!==n?n:jc(nl(t.longitude),nl(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=pl(n[i],r[i]);if(o)return o}return jc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=jc(r[s],o[s]);if(0!==a)return a;var u=pl(n[r[s]],i[o[s]]);if(0!==u)return u}return jc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Mc()}}function gl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return jc(t,e);var n=el(t),r=el(e),i=jc(n.seconds,r.seconds);return 0!==i?i:jc(n.nanos,r.nanos)}function ml(t){return yl(t)}function yl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=el(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?rl(t.bytesValue).toBase64():"referenceValue"in t?ll.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=yl(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+yl(t.fields[o])}return e+"}"}(t.mapValue):Mc();var e}function vl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function _l(t){return!!t&&"integerValue"in t}function bl(t){return!!t&&"arrayValue"in t}function wl(t){return!!t&&"nullValue"in t}function Cl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xl(t){return!!t&&"mapValue"in t}var Tl=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field($c.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return dl(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===hl(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=xl(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay($c.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!xl(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Sl(t){var e=[];return Gc(t.fields||{},function(t,n){var r=new $c([t]);if(xl(n)){var i=Sl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Jc(e)}var El=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,zc.min(),Tl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Tl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Tl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Tl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Tl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Il=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function kl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Il(t,e,n,r,i,o,s)}function Al(t){var e=Uc(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+ml(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),al(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Vl(e.startAt)),e.endAt&&(n+="|ub:",n+=Vl(e.endAt)),e.h=n}return e.h}function Ol(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!zl(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!dl(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Gl(t.startAt,e.startAt)&&Gl(t.endAt,e.endAt)}function Pl(t){return ll.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Nl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Cc(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Rl(t,n,r):"array-contains"===n?new Ul(t,r):"in"===n?new ql(t,r):"not-in"===n?new Fl(t,r):"array-contains-any"===n?new jl(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Dl(t,n):new Ml(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(pl(e,this.value)):null!==e&&hl(this.value)===hl(e)&&this.m(pl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Mc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Rl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ll.fromName(r.referenceValue),i}return Cc(e,t),e.prototype.matches=function(t){var e=ll.comparator(t.key,this.key);return this.m(e)},e}(Nl),Dl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ll(0,n),r}return Cc(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Nl),Ml=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ll(0,n),r}return Cc(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Nl);function Ll(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return ll.fromName(t.referenceValue)})}var Ul=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Cc(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return bl(e)&&fl(e.arrayValue,this.value)},e}(Nl),ql=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Cc(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&fl(this.value.arrayValue,e)},e}(Nl),Fl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Cc(e,t),e.prototype.matches=function(t){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!fl(this.value.arrayValue,e)},e}(Nl),jl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Cc(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!bl(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return fl(e.value.arrayValue,t)})},e}(Nl),Zl=function(t,e){this.position=t,this.before=e};function Vl(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return ml(t)}).join(",")}var Bl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function zl(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Hl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ll.comparator(ll.fromName(s.referenceValue),n.key):pl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Gl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!dl(t.position[n],e.position[n]))return!1;return!0}var Wl=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function Kl(t,e,n,r,i,o,s,a){return new Wl(t,e,n,r,i,o,s,a)}function Yl(t){return new Wl(t)}function Ql(t){return!al(t.limit)&&"F"===t.limitType}function $l(t){return!al(t.limit)&&"L"===t.limitType}function Jl(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Xl(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function th(t){return null!==t.collectionGroup}function eh(t){var e=Uc(t);if(null===e.p){e.p=[];var n=Xl(e),r=Jl(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Bl(n)),e.p.push(new Bl($c.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Bl($c.keyField(),u))}}}return e.p}function nh(t){var e=Uc(t);if(!e.T)if("F"===e.limitType)e.T=kl(e.path,e.collectionGroup,eh(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=eh(e);r<i.length;r++){var o=i[r];n.push(new Bl(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new Zl(e.endAt.position,!e.endAt.before):null,a=e.startAt?new Zl(e.startAt.position,!e.startAt.before):null;e.T=kl(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function rh(t,e,n){return new Wl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ih(t,e){return Ol(nh(t),nh(e))&&t.limitType===e.limitType}function oh(t){return Al(nh(t))+"|lt:"+t.limitType}function sh(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+ml(e.value);var e}).join(", ")+"]"),al(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Vl(t.startAt)),t.endAt&&(e+=", endAt: "+Vl(t.endAt)),"Target("+e+")"}(nh(t))+"; limitType="+t.limitType+")"}function ah(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ll.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Hl(t.startAt,eh(t),e)||t.endAt&&Hl(t.endAt,eh(t),e))}(t,e)}function uh(t){return function(e,n){for(var r=!1,i=0,o=eh(t);i<o.length;i++){var s=o[i],a=ch(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function ch(t,e,n){var r=t.field.isKeyField()?ll.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?pl(r,i):Mc()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Mc()}}function lh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ul(e)?"-0":e}}function hh(t){return{integerValue:""+t}}function dh(t,e){return cl(e)?hh(e):lh(t,e)}var fh=function(){this._=void 0};function ph(t,e,n){return t instanceof yh?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof vh?_h(t,e):t instanceof bh?wh(t,e):function(t,e){var n=mh(t,e),r=xh(n)+xh(t.A);return _l(n)&&_l(t.A)?hh(r):lh(t.R,r)}(t,e)}function gh(t,e,n){return t instanceof vh?_h(t,e):t instanceof bh?wh(t,e):n}function mh(t,e){return t instanceof Ch?_l(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var yh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cc(e,t),e}(fh),vh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Cc(e,t),e}(fh);function _h(t,e){for(var n=Th(e),r=function(t){n.some(function(e){return dl(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var bh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Cc(e,t),e}(fh);function wh(t,e){for(var n=Th(e),r=function(t){n=n.filter(function(e){return!dl(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ch=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Cc(e,t),e}(fh);function xh(t){return nl(t.integerValue||t.doubleValue)}function Th(t){return bl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Sh=function(t,e){this.field=t,this.transform=e},Eh=function(t,e){this.version=t,this.transformResults=e},Ih=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function kh(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Ah=function(){};function Oh(t,e,n){t instanceof Mh?function(t,e,n){var r=t.value.clone(),i=qh(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Lh?function(t,e,n){if(kh(t.precondition,e)){var r=qh(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Uh(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Ph(t,e,n){t instanceof Mh?function(t,e,n){if(kh(t.precondition,e)){var r=t.value.clone(),i=Fh(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Dh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Lh?function(t,e,n){if(kh(t.precondition,e)){var r=Fh(t.fieldTransforms,n,e),i=e.data;i.setAll(Uh(t)),i.setAll(r),e.convertToFoundDocument(Dh(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){kh(t.precondition,e)&&e.convertToNoDocument(zc.min())}(t,e)}function Nh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=mh(o.transform,s||null);null!=a&&(null==n&&(n=Tl.empty()),n.set(o.field,a))}return n||null}function Rh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Zc(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof vh&&e instanceof vh||t instanceof bh&&e instanceof bh?Zc(t.elements,e.elements,dl):t instanceof Ch&&e instanceof Ch?dl(t.A,e.A):t instanceof yh&&e instanceof yh}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Dh(t){return t.isFoundDocument()?t.version:zc.min()}var Mh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Cc(e,t),e}(Ah),Lh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Cc(e,t),e}(Ah);function Uh(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function qh(t,e,n){var r=new Map;Lc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,gh(s,a,n[i]))}return r}function Fh(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,ph(a,u,e))}return r}var jh,Zh,Vh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Cc(e,t),e}(Ah),Bh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Cc(e,t),e}(Ah),zh=function(t){this.count=t};function Hh(t){switch(t){case Ic.OK:return Mc();case Ic.CANCELLED:case Ic.UNKNOWN:case Ic.DEADLINE_EXCEEDED:case Ic.RESOURCE_EXHAUSTED:case Ic.INTERNAL:case Ic.UNAVAILABLE:case Ic.UNAUTHENTICATED:return!1;case Ic.INVALID_ARGUMENT:case Ic.NOT_FOUND:case Ic.ALREADY_EXISTS:case Ic.PERMISSION_DENIED:case Ic.FAILED_PRECONDITION:case Ic.ABORTED:case Ic.OUT_OF_RANGE:case Ic.UNIMPLEMENTED:case Ic.DATA_LOSS:return!0;default:return Mc()}}function Gh(t){if(void 0===t)return Nc("GRPC error has no .code"),Ic.UNKNOWN;switch(t){case jh.OK:return Ic.OK;case jh.CANCELLED:return Ic.CANCELLED;case jh.UNKNOWN:return Ic.UNKNOWN;case jh.DEADLINE_EXCEEDED:return Ic.DEADLINE_EXCEEDED;case jh.RESOURCE_EXHAUSTED:return Ic.RESOURCE_EXHAUSTED;case jh.INTERNAL:return Ic.INTERNAL;case jh.UNAVAILABLE:return Ic.UNAVAILABLE;case jh.UNAUTHENTICATED:return Ic.UNAUTHENTICATED;case jh.INVALID_ARGUMENT:return Ic.INVALID_ARGUMENT;case jh.NOT_FOUND:return Ic.NOT_FOUND;case jh.ALREADY_EXISTS:return Ic.ALREADY_EXISTS;case jh.PERMISSION_DENIED:return Ic.PERMISSION_DENIED;case jh.FAILED_PRECONDITION:return Ic.FAILED_PRECONDITION;case jh.ABORTED:return Ic.ABORTED;case jh.OUT_OF_RANGE:return Ic.OUT_OF_RANGE;case jh.UNIMPLEMENTED:return Ic.UNIMPLEMENTED;case jh.DATA_LOSS:return Ic.DATA_LOSS;default:return Mc()}}(Zh=jh||(jh={}))[Zh.OK=0]="OK",Zh[Zh.CANCELLED=1]="CANCELLED",Zh[Zh.UNKNOWN=2]="UNKNOWN",Zh[Zh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zh[Zh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zh[Zh.NOT_FOUND=5]="NOT_FOUND",Zh[Zh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zh[Zh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zh[Zh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zh[Zh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zh[Zh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zh[Zh.ABORTED=10]="ABORTED",Zh[Zh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zh[Zh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zh[Zh.INTERNAL=13]="INTERNAL",Zh[Zh.UNAVAILABLE=14]="UNAVAILABLE",Zh[Zh.DATA_LOSS=15]="DATA_LOSS";var Wh=function(){function t(t,e){this.comparator=t,this.root=e||Yh.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Yh.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yh.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Kh(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Kh(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Kh(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Kh(this.root,t,this.comparator,!0)},t}(),Kh=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Yh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Mc();if(this.right.isRed())throw Mc();var t=this.left.check();if(t!==this.right.check())throw Mc();return t+(this.isRed()?0:1)},t}();Yh.EMPTY=null,Yh.RED=!0,Yh.BLACK=!1,Yh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Mc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Mc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Mc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Mc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Mc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Yh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Qh=function(){function t(t){this.comparator=t,this.data=new Wh(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new $h(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new $h(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),$h=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Jh=new Wh(ll.comparator);function Xh(){return Jh}var td=new Wh(ll.comparator);function ed(){return td}var nd=new Wh(ll.comparator);function rd(){return nd}var id=new Qh(ll.comparator);function od(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=id,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var sd=new Qh(jc);function ad(){return sd}var ud=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,cd.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(zc.min(),r,ad(),Xh(),od())},t}(),cd=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Xc.EMPTY_BYTE_STRING,n,od(),od(),od())},t}(),ld=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},hd=function(t,e){this.targetId=t,this.V=e},dd=function(t,e,n,r){void 0===n&&(n=Xc.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},fd=function(){function t(){this.S=0,this.D=md(),this.C=Xc.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=od(),e=od(),n=od();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Mc()}}),new cd(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=md()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),pd=function(){function t(t){this.W=t,this.G=new Map,this.H=Xh(),this.J=gd(),this.Y=new Qh(jc)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Mc()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Pl(i))if(0===n){var o=new ll(i.path);this.tt(e,o,El.newNoDocument(o,zc.min()))}else Lc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&Pl(o.target)){var s=new ll(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,El.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=od();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new ud(t,n,this.Y,this.H,r);return this.H=Xh(),this.J=gd(),this.Y=new Qh(jc),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new fd,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Qh(jc),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Pc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new fd),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function gd(){return new Wh(ll.comparator)}function md(){return new Wh(ll.comparator)}var yd={asc:"ASCENDING",desc:"DESCENDING"},vd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_d=function(t,e){this.databaseId=t,this.I=e};function bd(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function wd(t,e){return t.I?e.toBase64():e.toUint8Array()}function Cd(t,e){return bd(t,e.toTimestamp())}function xd(t){return Lc(!!t),zc.fromTimestamp(function(t){var e=el(t);return new Bc(e.seconds,e.nanos)}(t))}function Td(t,e){return function(t){return new Yc(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Sd(t){var e=Yc.fromString(t);return Lc(Yd(e)),e}function Ed(t,e){return Td(t.databaseId,e.path)}function Id(t,e){var n=Sd(e);if(n.get(1)!==t.databaseId.projectId)throw new kc(Ic.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new kc(Ic.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ll(Pd(n))}function kd(t,e){return Td(t.databaseId,e)}function Ad(t){var e=Sd(t);return 4===e.length?Yc.emptyPath():Pd(e)}function Od(t){return new Yc(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Pd(t){return Lc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Nd(t,e,n){return{name:Ed(t,e),fields:n.toProto().mapValue.fields}}function Rd(t,e,n){var r=Id(t,e.name),i=xd(e.updateTime),o=new Tl({mapValue:{fields:e.fields}}),s=El.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Dd(t,e){var n;if(e instanceof Mh)n={update:Nd(t,e.key,e.value)};else if(e instanceof Vh)n={delete:Ed(t,e.key)};else if(e instanceof Lh)n={update:Nd(t,e.key,e.data),updateMask:Kd(e.fieldMask)};else{if(!(e instanceof Bh))return Mc();n={verify:Ed(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof yh)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof bh)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ch)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Mc()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Cd(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Mc()}(t,e.precondition)),n}function Md(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Ih.updateTime(xd(t.updateTime)):void 0!==t.exists?Ih.exists(t.exists):Ih.none()}(e.currentDocument):Ih.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Lc("REQUEST_TIME"===e.setToServerValue),n=new yh):"appendMissingElements"in e?n=new vh(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new bh(e.removeAllFromArray.values||[]):"increment"in e?n=new Ch(t,e.increment):Mc();var r=$c.fromServerFormat(e.fieldPath);return new Sh(r,n)}(t,e)}):[];if(e.update){var i=Id(t,e.update.name),o=new Tl({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Jc((t.fieldPaths||[]).map(function(t){return $c.fromServerFormat(t)}))}(e.updateMask);return new Lh(i,o,s,n,r)}return new Mh(i,o,n,r)}if(e.delete){var a=Id(t,e.delete);return new Vh(a,n)}if(e.verify){var u=Id(t,e.verify);return new Bh(u,n)}return Mc()}function Ld(t,e){return{documents:[kd(t,e.path)]}}function Ud(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=kd(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=kd(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Cl(t.value))return{unaryFilter:{field:zd(t.field),op:"IS_NAN"}};if(wl(t.value))return{unaryFilter:{field:zd(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Cl(t.value))return{unaryFilter:{field:zd(t.field),op:"IS_NOT_NAN"}};if(wl(t.value))return{unaryFilter:{field:zd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zd(t.field),op:Bd(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:zd(t.field),direction:Vd(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||al(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=jd(e.startAt)),e.endAt&&(n.structuredQuery.endAt=jd(e.endAt)),n}function qd(t){var e=Ad(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Lc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Fd(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Bl(Hd(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return al(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Zd(n.startAt));var l=null;return n.endAt&&(l=Zd(n.endAt)),Kl(e,i,a,s,u,"F",c,l)}function Fd(t){return t?void 0!==t.unaryFilter?[Wd(t)]:void 0!==t.fieldFilter?[Gd(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Fd(t)}).reduce(function(t,e){return t.concat(e)}):Mc():[]}function jd(t){return{before:t.before,values:t.position}}function Zd(t){return new Zl(t.values||[],!!t.before)}function Vd(t){return yd[t]}function Bd(t){return vd[t]}function zd(t){return{fieldPath:t.canonicalString()}}function Hd(t){return $c.fromServerFormat(t.fieldPath)}function Gd(t){return Nl.create(Hd(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Mc()}}(t.fieldFilter.op),t.fieldFilter.value)}function Wd(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Hd(t.unaryFilter.field);return Nl.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Hd(t.unaryFilter.field);return Nl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Hd(t.unaryFilter.field);return Nl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Hd(t.unaryFilter.field);return Nl.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Mc()}}function Kd(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function Yd(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Qd(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Jd(e)),e=$d(t.get(n),e);return Jd(e)}function $d(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Jd(t){return t+"\x01\x01"}function Xd(t){var e=t.length;if(Lc(e>=2),2===e)return Lc("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Yc.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Mc(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Mc()}o=s+2}return new Yc(r)}var tf=function(t,e){this.seconds=t,this.nanoseconds=e},ef=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};ef.store="owner",ef.key="owner";var nf=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};nf.store="mutationQueues",nf.keyPath="userId";var rf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};rf.store="mutations",rf.keyPath="batchId",rf.userMutationsIndex="userMutationsIndex",rf.userMutationsKeyPath=["userId","batchId"];var of=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Qd(e)]},t.key=function(t,e,n){return[t,Qd(e),n]},t}();of.store="documentMutations",of.PLACEHOLDER=new of;var sf=function(t,e){this.path=t,this.readTime=e},af=function(t,e){this.path=t,this.version=e},uf=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};uf.store="remoteDocuments",uf.readTimeIndex="readTimeIndex",uf.readTimeIndexPath="readTime",uf.collectionReadTimeIndex="collectionReadTimeIndex",uf.collectionReadTimeIndexPath=["parentPath","readTime"];var cf=function(t){this.byteSize=t};cf.store="remoteDocumentGlobal",cf.key="remoteDocumentGlobalKey";var lf=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};lf.store="targets",lf.keyPath="targetId",lf.queryTargetsIndexName="queryTargetsIndex",lf.queryTargetsKeyPath=["canonicalId","targetId"];var hf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};hf.store="targetDocuments",hf.keyPath=["targetId","path"],hf.documentTargetsIndex="documentTargetsIndex",hf.documentTargetsKeyPath=["path","targetId"];var df=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};df.key="targetGlobalKey",df.store="targetGlobal";var ff=function(t,e){this.collectionId=t,this.parent=e};ff.store="collectionParents",ff.keyPath=["collectionId","parent"];var pf=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};pf.store="clientMetadata",pf.keyPath="clientId";var gf=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};gf.store="bundles",gf.keyPath="bundleId";var mf=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};mf.store="namedQueries",mf.keyPath="name";var yf=Sc(Sc([],Sc(Sc([],Sc(Sc([],Sc(Sc([],[nf.store,rf.store,of.store,uf.store,lf.store,ef.store,df.store,hf.store]),[pf.store])),[cf.store])),[ff.store])),[gf.store,mf.store]),vf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_f=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),bf=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},wf=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Mc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Cf=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new bf,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Sf(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Of(e.target.error);n.ft.reject(new Sf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Sf(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Pc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new If(e)},t}(),xf=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,vo.z$)())&&Nc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Pc("SimpleDb","Removing database:",t),kf(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,vo.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return xc(this,void 0,void 0,function(){var e,n=this;return Tc(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(Pc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Sf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new kc(Ic.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Sf(t,n))},i.onupgradeneeded=function(t){Pc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){Pc("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return xc(this,void 0,void 0,function(){var i,o,s,a,u;return Tc(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Tc(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Cf.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),wf.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return Pc("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Tf=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return kf(this.Pt.delete())},t}(),Sf=function(t){function e(e,n){var r=this;return(r=t.call(this,Ic.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Cc(e,t),e}(kc);function Ef(t){return"IndexedDbTransactionError"===t.name}var If=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Pc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Pc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),kf(n)},t.prototype.add=function(t){return Pc("SimpleDb","ADD",this.store.name,t,t),kf(this.store.add(t))},t.prototype.get=function(t){var e=this;return kf(this.store.get(t)).next(function(n){return void 0===n&&(n=null),Pc("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return Pc("SimpleDb","DELETE",this.store.name,t),kf(this.store.delete(t))},t.prototype.count=function(){return Pc("SimpleDb","COUNT",this.store.name),kf(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){Pc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new wf(function(n,r){e.onerror=function(t){var e=Of(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new wf(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Tf(i),s=e(i.primaryKey,i.value,o);if(s instanceof wf){var a=s.catch(function(t){return o.done(),wf.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return wf.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function kf(t){return new wf(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Of(t.target.error);n(e)}})}var Af=!1;function Of(t){var e=xf._t((0,vo.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new kc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Af||(Af=!0,setTimeout(function(){throw r},0)),r}}return t}var Pf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Cc(e,t),e}(_f);function Nf(t,e){var n=Uc(t);return xf.It(n.Mt,e)}var Rf=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Oh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Ph(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Ph(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(zc.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},od())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Zc(this.mutations,t.mutations,function(t,e){return Rh(t,e)})&&Zc(this.baseMutations,t.baseMutations,function(t,e){return Rh(t,e)})},t}(),Df=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Lc(e.mutations.length===r.length);for(var i=rd(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Mf=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=zc.min()),void 0===o&&(o=zc.min()),void 0===s&&(s=Xc.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Lf=function(t){this.Lt=t};function Uf(t,e){if(e.document)return Rd(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ll.fromSegments(e.noDocument.path),r=Vf(e.noDocument.readTime),i=El.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ll.fromSegments(e.unknownDocument.path);return r=Vf(e.unknownDocument.version),El.newUnknownDocument(o,r)}return Mc()}function qf(t,e,n){var r=Ff(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Ed(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:bd(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new uf(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Zf(e.version);return s=e.hasCommittedMutations,new uf(null,new sf(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=Zf(e.version);return new uf(new af(c,l),null,null,!0,r,i)}return Mc()}function Ff(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function jf(t){var e=new Bc(t[0],t[1]);return zc.fromTimestamp(e)}function Zf(t){var e=t.toTimestamp();return new tf(e.seconds,e.nanoseconds)}function Vf(t){var e=new Bc(t.seconds,t.nanoseconds);return zc.fromTimestamp(e)}function Bf(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Md(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Md(t.Lt,e)}),o=Bc.fromMillis(e.localWriteTimeMs);return new Rf(e.batchId,o,n,i)}function zf(t){var e,n,r=Vf(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Vf(t.lastLimboFreeSnapshotVersion):zc.min();return void 0!==t.query.documents?(Lc(1===(n=t.query).documents.length),e=nh(Yl(Ad(n.documents[0])))):e=function(t){return nh(qd(t))}(t.query),new Mf(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Xc.fromBase64String(t.resumeToken))}function Hf(t,e){var n,r=Zf(e.snapshotVersion),i=Zf(e.lastLimboFreeSnapshotVersion);n=Pl(e.target)?Ld(t.Lt,e.target):Ud(t.Lt,e.target);var o=e.resumeToken.toBase64();return new lf(e.targetId,Al(e.target),r,o,e.sequenceNumber,i,n)}function Gf(t){var e=qd({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?rh(e,e.limit,"L"):e}var Wf=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Kf(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Vf(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return Kf(t).put({bundleId:(n=e).id,createTime:Zf(xd(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Yf(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Gf(e.bundledQuery),readTime:Vf(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return Yf(t).put(function(t){return{name:t.name,readTime:Zf(xd(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Kf(t){return Nf(t,gf.store)}function Yf(t){return Nf(t,mf.store)}var Qf=function(){function t(){this.Bt=new $f}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),wf.resolve()},t.prototype.getCollectionParents=function(t,e){return wf.resolve(this.Bt.getEntries(e))},t}(),$f=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Qh(Yc.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Qh(Yc.comparator)).toArray()},t}(),Jf=function(){function t(){this.qt=new $f}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:Qd(i)};return Xf(t).put(o)}return wf.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Vc(e),""],!1,!0);return Xf(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Xd(o.parent))}return n})},t}();function Xf(t){return Nf(t,ff.store)}var tp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ep=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function np(t,e,n){var r=t.store(rf.store),i=t.store(of.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Lc(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=of.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return wf.waitFor(o).next(function(){return c})}function rp(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Mc();e=t.noDocument}return JSON.stringify(e).length}ep.DEFAULT_COLLECTION_PERCENTILE=10,ep.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ep.DEFAULT=new ep(41943040,ep.DEFAULT_COLLECTION_PERCENTILE,ep.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ep.DISABLED=new ep(-1,0,0);var ip=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Lc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sp(t).Ot({index:rf.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=ap(t),s=sp(t);return s.add({}).next(function(a){Lc("number"==typeof a);for(var u=new Rf(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Dd(t.Lt,e)}),i=n.mutations.map(function(e){return Dd(t.Lt,e)});return new rf(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Qh(function(t,e){return jc(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=of.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,of.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),wf.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return sp(t).get(e).next(function(t){return t?(Lc(t.userId===n.userId),Bf(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?wf.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return sp(t).Ot({index:rf.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Lc(e.batchId>=r),o=Bf(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return sp(t).Ot({index:rf.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sp(t).Nt(rf.userMutationsIndex,n).next(function(t){return t.map(function(t){return Bf(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=of.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return ap(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=Xd(r[1]);if(a===n.userId&&e.path.isEqual(c))return sp(t).get(u).next(function(t){if(!t)throw Mc();Lc(t.userId===n.userId),o.push(Bf(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Qh(jc),i=[];return e.forEach(function(e){var o=of.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=ap(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=Xd(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),wf.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=of.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Qh(jc);return ap(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=Xd(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(sp(t).get(e).next(function(t){if(null===t)throw Mc();Lc(t.userId===n.userId),r.push(Bf(n.R,t))}))}),wf.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return np(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),wf.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return wf.resolve();var r=IDBKeyRange.lowerBound(of.prefixForUser(e.userId)),i=[];return ap(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=Xd(t[1]);i.push(o)}else r.done()}).next(function(){Lc(0===i.length)})})},t.prototype.containsKey=function(t,e){return op(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return up(t).get(this.userId).next(function(t){return t||new nf(e.userId,-1,"")})},t}();function op(t,e,n){var r=of.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return ap(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function sp(t){return Nf(t,rf.store)}function ap(t){return Nf(t,of.store)}function up(t){return Nf(t,nf.store)}var cp=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),lp=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new cp(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return zc.fromTimestamp(new Bc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return hp(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Lc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return hp(t).Ot(function(s,a){var u=zf(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return wf.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return hp(t).Ot(function(t,n){var r=zf(n);e(r)})},t.prototype.Xt=function(t){return dp(t).get(df.key).next(function(t){return Lc(null!==t),t})},t.prototype.Zt=function(t,e){return dp(t).put(df.key,e)},t.prototype.te=function(t,e){return hp(t).put(Hf(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Al(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return hp(t).Ot({range:r,index:lf.queryTargetsIndexName},function(t,n,r){var o=zf(n);Ol(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=fp(t);return e.forEach(function(e){var s=Qd(e.path);i.push(o.put(new hf(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),wf.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=fp(t);return wf.forEach(e,function(e){var o=Qd(e.path);return wf.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=fp(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=fp(t),i=od();return r.Ot({range:n,kt:!0},function(t,e,n){var r=Xd(t[1]),o=new ll(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=Qd(e.path),r=IDBKeyRange.bound([n],[Vc(n)],!1,!0),i=0;return fp(t).Ot({index:hf.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return hp(t).get(e).next(function(t){return t?zf(t):null})},t}();function hp(t){return Nf(t,lf.store)}function dp(t){return Nf(t,df.store)}function fp(t){return Nf(t,hf.store)}function pp(t){return xc(this,void 0,void 0,function(){return Tc(this,function(e){if(t.code!==Ic.FAILED_PRECONDITION||t.message!==vf)throw t;return Pc("LocalStore","Unexpectedly lost primary lease"),[2]})})}function gp(t,e){var n=t[1],r=e[1],i=jc(t[0],e[0]);return 0===i?jc(n,r):i}var mp=function(){function t(t){this.ne=t,this.buffer=new Qh(gp),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();gp(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),yp=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Pc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return xc(e,void 0,void 0,function(){var e;return Tc(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Ef(e=n.sent())?(Pc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,pp(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),vp=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return wf.resolve(Ec.o);var r=new mp(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Pc("LruGarbageCollector","Garbage collection skipped; disabled"),wf.resolve(tp)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Pc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),tp):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(Pc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Oc()<=_o.in.DEBUG&&Pc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),wf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),_p=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new vp(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return bp(t,n)},t.prototype.removeReference=function(t,e,n){return bp(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return bp(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return up(t).$t(function(r){return op(t,r,e).next(function(t){return t&&(n=!0),wf.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),fp(t).delete([0,Qd(s.path)])})});i.push(u)}}).next(function(){return wf.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return bp(t,e)},t.prototype.we=function(t,e){var n,r=fp(t),i=Ec.o;return r.Ot({index:hf.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Ec.o&&e(new ll(Xd(n)),i),i=s,n=o):i=Ec.o}).next(function(){i!==Ec.o&&e(new ll(Xd(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function bp(t,e){return fp(t).put(function(t,e){return new hf(0,Qd(t.path),e)}(e,t.currentSequenceNumber))}var wp=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Gc(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return Wc(this.inner)},t}(),Cp=function(){function t(){this.changes=new wp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:zc.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:El.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?wf.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),xp=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Ep(t).put(Ip(e),n)},t.prototype.removeEntry=function(t,e){var n=Ep(t),r=Ip(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Ep(t).get(Ip(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return Ep(t).get(Ip(e)).next(function(t){return{document:n.ye(e,t),size:rp(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=Xh();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=Xh(),i=new Wh(ll.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,rp(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return wf.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Ep(t).Ot({range:r},function(t,e,r){for(var s=ll.fromSegments(t);o&&ll.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Xh(),o=e.path.length+1,s={};if(n.isEqual(zc.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Ff(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=uf.collectionReadTimeIndex}return Ep(t).Ot(s,function(t,n,s){if(t.length===o){var a=Uf(r.R,n);e.path.isPrefixOf(a.key.path)?ah(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new Tp(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Sp(t).get(cf.key).next(function(t){return Lc(!!t),t})},t.prototype.me=function(t,e){return Sp(t).put(cf.key,e)},t.prototype.ye=function(t,e){if(e){var n=Uf(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(zc.min()))return n}return El.newInvalidDocument(t)},t}(),Tp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new wp(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Cc(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Qh(function(t,e){return jc(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=qf(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=rp(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=qf(e.Ie.R,El.newNoDocument(o,zc.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),wf.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Cp);function Sp(t){return Nf(t,cf.store)}function Ep(t){return Nf(t,uf.store)}function Ip(t){return t.path.toArray()}var kp=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Lc(n<r&&n>=0&&r<=11);var o=new Cf("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(ef.store)}(t),function(t){t.createObjectStore(nf.store,{keyPath:nf.keyPath}),t.createObjectStore(rf.store,{keyPath:rf.keyPath,autoIncrement:!0}).createIndex(rf.userMutationsIndex,rf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(of.store)}(t),Ap(t),function(t){t.createObjectStore(uf.store)}(t));var s=wf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(hf.store),t.deleteObjectStore(lf.store),t.deleteObjectStore(df.store)}(t),Ap(t)),s=s.next(function(){return function(t){var e=t.store(df.store),n=new df(0,0,zc.min().toTimestamp(),0);return e.put(df.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(rf.store).Nt().next(function(n){t.deleteObjectStore(rf.store),t.createObjectStore(rf.store,{keyPath:rf.keyPath,autoIncrement:!0}).createIndex(rf.userMutationsIndex,rf.userMutationsKeyPath,{unique:!0});var r=e.store(rf.store),i=n.map(function(t){return r.put(t)});return wf.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(pf.store,{keyPath:pf.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(cf.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(uf.store);e.createIndex(uf.readTimeIndex,uf.readTimeIndexPath,{unique:!1}),e.createIndex(uf.collectionReadTimeIndex,uf.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(gf.store,{keyPath:gf.keyPath})}(t),function(t){t.createObjectStore(mf.store,{keyPath:mf.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(uf.store).Ot(function(t,n){e+=rp(n)}).next(function(){var n=new cf(e);return t.store(cf.store).put(cf.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(nf.store),r=t.store(rf.store);return n.Nt().next(function(n){return wf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(rf.userMutationsIndex,i).next(function(r){return wf.forEach(r,function(r){Lc(r.userId===n.userId);var i=Bf(e.R,r);return np(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(hf.store),n=t.store(uf.store);return t.store(df.store).get(df.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new Yc(n),s=function(t){return[0,Qd(t)]}(o);r.push(e.get(s).next(function(n){return n?wf.resolve():function(n){return e.put(new hf(0,Qd(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return wf.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(ff.store,{keyPath:ff.keyPath});var n=e.store(ff.store),r=new $f,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Qd(i)})}};return e.store(uf.store).Ot({kt:!0},function(t,e){var n=new Yc(t);return i(n.popLast())}).next(function(){return e.store(of.store).Ot({kt:!0},function(t,e){var n=Xd(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(lf.store);return n.Ot(function(t,r){var i=zf(r),o=Hf(e.R,i);return n.put(o)})},t}();function Ap(t){t.createObjectStore(hf.store,{keyPath:hf.keyPath}).createIndex(hf.documentTargetsIndex,hf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(lf.store,{keyPath:lf.keyPath}).createIndex(lf.queryTargetsIndexName,lf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(df.store)}var Op="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Pp=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new kc(Ic.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _p(this,i),this.Le=n+"main",this.R=new Lf(u),this.Be=new xf(this.Le,11,new kp(this.R)),this.qe=new lp(this.referenceDelegate,this.R),this.Ut=new Jf,this.Ue=function(t,e){return new xp(t,e)}(this.R,this.Ut),this.Qe=new Wf,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Nc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new kc(Ic.FAILED_PRECONDITION,Op);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new Ec(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return xc(e,void 0,void 0,function(){return Tc(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return xc(e,void 0,void 0,function(){return Tc(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return xc(e,void 0,void 0,function(){return Tc(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Rp(e).put(new pf(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(Ef(e))return Pc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Pc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Np(t).get(ef.key).next(function(t){return wf.resolve(e.tn(t))})},t.prototype.en=function(t){return Rp(t).delete(this.clientId)},t.prototype.nn=function(){return xc(this,void 0,void 0,function(){var t,e,n,r=this;return Tc(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Nf(t,pf.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return wf.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?wf.resolve(!0):Np(t).get(ef.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new kc(Ic.FAILED_PRECONDITION,Op);return!1}}return!(!e.networkEnabled||!e.inForeground)||Rp(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&Pc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return xc(this,void 0,void 0,function(){var t=this;return Tc(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[ef.store,pf.store],function(e){var n=new Pf(e,Ec.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Rp(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ip.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return Pc("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",yf,function(o){return r=new Pf(o,i.Ne?i.Ne.next():Ec.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Nc("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new kc(Ic.FAILED_PRECONDITION,vf);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Np(t).get(ef.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new kc(Ic.FAILED_PRECONDITION,Op)})},t.prototype.Ze=function(t){var e=new ef(this.clientId,this.allowTabSynchronization,Date.now());return Np(t).put(ef.key,e)},t.yt=function(){return xf.yt()},t.prototype.Xe=function(t){var e=this,n=Np(t);return n.get(ef.key).next(function(t){return e.tn(t)?(Pc("IndexedDbPersistence","Releasing primary lease."),n.delete(ef.key)):wf.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Nc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Pc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Nc("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Nc("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Np(t){return Nf(t,ef.store)}function Rp(t){return Nf(t,pf.store)}function Dp(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Mp=function(t,e){this.progress=t,this.wn=e},Lp=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ll.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):th(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ll(e)).next(function(t){var e=ed();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ed();return this.Ut.getCollectionParents(t,i).next(function(s){return wf.forEach(s,function(s){var a=function(t,e){return new Wl(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=El.newInvalidDocument(c),r=r.insert(c,l)),Ph(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){ah(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=od(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Lh&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),Up=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=od(),i=od(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),qp=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(zc.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(Ql(e)||$l(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Oc()<=_o.in.DEBUG&&Pc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),sh(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new Qh(uh(t));return e.forEach(function(e,r){ah(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Oc()<=_o.in.DEBUG&&Pc("QueryEngine","Using full collection scan to execute query:",sh(e)),this.Sn.getDocumentsMatchingQuery(t,e,zc.min())},t}(),Fp=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Wh(jc),this.kn=new wp(function(t){return Al(t)},Ol),this.On=zc.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Lp(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function jp(t,e,n,r){return new Fp(t,e,n,r)}function Zp(t,e){return xc(this,void 0,void 0,function(){var n,r,i,o;return Tc(this,function(s){switch(s.label){case 0:return n=Uc(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Lp(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=od(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function Vp(t,e){var n=Uc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=wf.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Lc(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function Bp(t){var e=Uc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function zp(t,e){var n=Uc(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Lc(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=Xh();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Hp(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(zc.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return wf.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function Hp(t,e,n,r,i){var o=od();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=Xh();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(zc.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Pc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Gp(t,e){var n=Uc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function Wp(t,e){var n=Uc(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?wf.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Mf(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function Kp(t,e,n){return xc(this,void 0,void 0,function(){var r,i,o,s;return Tc(this,function(a){switch(a.label){case 0:r=Uc(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Ef(s=a.sent()))throw s;return Pc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function Yp(t,e,n){var r=Uc(t),i=zc.min(),o=od();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Uc(t),i=r.kn.get(n);return void 0!==i?wf.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,nh(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:zc.min(),n?o:od())}).next(function(t){return{documents:t,Bn:o}})})}function Qp(t,e){var n=Uc(t),r=Uc(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function $p(t){var e=Uc(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Uc(t),i=Xh(),o=Ff(n),s=Ep(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:uf.readTimeIndex,range:a},function(t,e){var n=Uf(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:jf(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function Jp(t){return xc(this,void 0,void 0,function(){var e;return Tc(this,function(n){return[2,(e=Uc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Ep(t),n=zc.min();return e.Ot({index:uf.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=jf(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function Xp(t,e,n,r){return xc(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Tc(this,function(p){switch(p.label){case 0:for(i=Uc(t),o=od(),s=Xh(),a=rd(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,Wp(i,function(t){return nh(Yl(Yc.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Hp(t,d,s,zc.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function tg(t,e,n){return void 0===n&&(n=od()),xc(this,void 0,void 0,function(){var r,i;return Tc(this,function(o){switch(o.label){case 0:return[4,Wp(t,nh(Gf(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Uc(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=xd(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(Xc.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var eg=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return wf.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:xd(n.createTime)}),wf.resolve()},t.prototype.getNamedQuery=function(t,e){return wf.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Gf(t.bundledQuery),readTime:xd(t.readTime)}}(e)),wf.resolve()},t}(),ng=function(){function t(){this.Wn=new Qh(rg.Gn),this.zn=new Qh(rg.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new rg(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new rg(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new ll(new Yc([])),r=new rg(n,t),i=new rg(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ll(new Yc([])),n=new rg(e,t),r=new rg(e,t+1),i=od();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new rg(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),rg=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ll.comparator(t.key,e.key)||jc(t.ns,e.ns)},t.Hn=function(t,e){return jc(t.ns,e.ns)||ll.comparator(t.key,e.key)},t}(),ig=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Qh(rg.Gn)}return t.prototype.checkEmpty=function(t){return wf.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Rf(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new rg(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return wf.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return wf.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return wf.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return wf.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return wf.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new rg(e,0),i=new rg(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),wf.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Qh(jc);return e.forEach(function(t){var e=new rg(t,0),i=new rg(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),wf.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ll.isDocumentKey(i)||(i=i.child(""));var o=new rg(new ll(i),0),s=new Qh(jc);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),wf.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Lc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return wf.forEach(e.mutations,function(i){var o=new rg(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new rg(e,0),r=this.rs.firstAfterOrEqual(n);return wf.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return wf.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),og=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Wh(ll.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return wf.resolve(n?n.document.clone():El.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Xh();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():El.newInvalidDocument(t))}),wf.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Xh(),i=new ll(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||ah(e,u)&&(r=r.insert(u.key,u.clone()))}return wf.resolve(r)},t.prototype.fs=function(t,e){return wf.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new sg(this)},t.prototype.getSize=function(t){return wf.resolve(this.size)},t}(),sg=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Cc(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),wf.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Cp),ag=function(){function t(t){this.persistence=t,this.ds=new wp(function(t){return Al(t)},Ol),this.lastRemoteSnapshotVersion=zc.min(),this.highestTargetId=0,this.ws=0,this._s=new ng,this.targetCount=0,this.ys=cp.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),wf.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return wf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return wf.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),wf.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),wf.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new cp(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,wf.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),wf.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,wf.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),wf.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return wf.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return wf.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),wf.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),wf.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),wf.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return wf.resolve(n)},t.prototype.containsKey=function(t,e){return wf.resolve(this._s.containsKey(e))},t}(),ug=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Ec(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new ag(this),this.Ut=new Qf,this.Ue=function(t,e){return new og(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Lf(e),this.Qe=new eg(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new ig(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;Pc("MemoryPersistence","Starting transaction:",t);var i=new cg(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return wf.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),cg=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Cc(e,t),e}(_f),lg=function(){function t(t){this.persistence=t,this.As=new ng,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Mc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),wf.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),wf.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),wf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wf.forEach(this.vs,function(r){var i=ll.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return wf.or([function(){return wf.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),hg=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function dg(t,e){return"firestore_clients_"+t+"_"+e}function fg(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function pg(t,e){return"firestore_targets_"+t+"_"+e}hg.UNAUTHENTICATED=new hg(null),hg.GOOGLE_CREDENTIALS=new hg("google-credentials-uid"),hg.FIRST_PARTY=new hg("first-party-uid");var gg=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new kc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Nc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),mg=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new kc(i.error.code,i.error.message)),o?new t(e,i.state,r):(Nc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),yg=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ad(),s=0;i&&s<r.activeTargetIds.length;++s)i=cl(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Nc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),vg=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Nc("SharedClientState","Failed to parse online state: "+e),null)},t}(),_g=function(){function t(){this.activeTargetIds=ad()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),bg=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Wh(jc),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=dg(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new _g),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return xc(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Tc(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(dg(this.persistenceKey,r)))&&(o=yg.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(pg(this.persistenceKey,t));if(n){var r=mg.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(pg(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Pc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Pc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Pc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Pc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Nc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return xc(e,void 0,void 0,function(){var t,e,r,i,o,s;return Tc(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Ec.o;if(null!=t)try{var n=JSON.parse(t);Lc("number"==typeof n),e=n}catch(t){Nc("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Ec.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new gg(this.currentUser,t,e,n),i=fg(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=fg(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=pg(this.persistenceKey,t),i=new mg(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return yg.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return gg.Vs(new hg(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return mg.Vs(r,e)},t.prototype.js=function(t){return vg.Vs(t)},t.prototype.ii=function(t){return xc(this,void 0,void 0,function(){return Tc(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Pc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=ad();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),wg=function(){function t(){this.li=new _g,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new _g,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Cg=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),xg=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Pc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Pc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Tg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Sg=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Eg=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Cc(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new bc;s.listenOnce(yc.COMPLETE,function(){try{switch(s.getLastErrorCode()){case mc.NO_ERROR:var e=s.getResponseJson();Pc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case mc.TIMEOUT:Pc("Connection",'RPC "'+t+'" timed out'),o(new kc(Ic.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:var n=s.getStatus();if(Pc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Ic).indexOf(e)>=0?e:Ic.UNKNOWN}(r.status);o(new kc(a,r.message))}else o(new kc(Ic.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new kc(Ic.UNAVAILABLE,"Connection failed."));break;default:Mc()}}finally{Pc("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new hc,i=pa(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),(0,vo.uI)()||(0,vo.b$)()||(0,vo.d)()||(0,vo.w1)()||(0,vo.Mn)()||(0,vo.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");Pc("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Sg({Ei:function(t){c?Pc("Connection","Not sending because WebChannel is closed:",t):(u||(Pc("Connection","Opening WebChannel transport."),a.open(),u=!0),Pc("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,_c.EventType.OPEN,function(){c||Pc("Connection","WebChannel transport opened.")}),h(a,_c.EventType.CLOSE,function(){c||(c=!0,Pc("Connection","WebChannel transport closed"),l.Vi())}),h(a,_c.EventType.ERROR,function(t){c||(c=!0,Rc("Connection","WebChannel transport errored:",t),l.Vi(new kc(Ic.UNAVAILABLE,"The operation could not be completed")))}),h(a,_c.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Lc(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){Pc("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=jh[t];if(void 0!==e)return Gh(e)}(i),s=r.message;void 0===o&&(o=Ic.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new kc(o,s)),a.close()}else Pc("Connection","WebChannel received:",n),l.Si(n)}}),h(i,vc.STAT_EVENT,function(t){10===t.stat?Pc("Connection","Detected buffering proxy"):11===t.stat&&Pc("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Pc("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return Pc("RestConnection","Received: ",t),t},function(e){throw Rc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Tg[t]},t}());function Ig(){return"undefined"!=typeof window?window:null}function kg(){return"undefined"!=typeof document?document:null}function Ag(t){return new _d(t,!0)}var Og=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&Pc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Pg=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Og(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return xc(this,void 0,void 0,function(){return Tc(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return xc(this,void 0,void 0,function(){return Tc(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return xc(this,void 0,void 0,function(){return Tc(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Ic.RESOURCE_EXHAUSTED?(Nc(e.toString()),Nc("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Ic.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new kc(Ic.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return xc(t,void 0,void 0,function(){return Tc(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return Pc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():(Pc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Ng=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Cc(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Mc()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Lc(void 0===e||"string"==typeof e),Xc.fromBase64String(e||"")):(Lc(void 0===e||e instanceof Uint8Array),Xc.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Ic.UNKNOWN:Gh(t.code);return new kc(e,t.message||"")}(a);n=new dd(r,i,o,s||null)}else if("documentChange"in e){i=Id(t,(r=e.documentChange).document.name),o=xd(r.document.updateTime);var a=new Tl({mapValue:{fields:r.document.fields}}),u=(s=El.newFoundDocument(i,o,a),r.targetIds||[]);n=new ld(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Id(t,(r=e.documentDelete).document),o=r.readTime?xd(r.readTime):zc.min(),a=El.newNoDocument(i,o),n=new ld([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Id(t,(r=e.documentRemove).document),n=new ld([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Mc();var c=e.filter;i=new zh(r=c.count||0),n=new hd(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return zc.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?zc.min():e.readTime?xd(e.readTime):zc.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Od(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Pl(r)?{documents:Ld(t,r)}:{query:Ud(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=wd(t,e.resumeToken):e.snapshotVersion.compareTo(zc.min())>0&&(n.readTime=bd(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Mc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Od(this.R),e.removeTarget=t,this.cr(e)},e}(Pg),Rg=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Cc(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Lc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Lc(void 0!==e),t.map(function(t){return function(t,e){var n=xd(t.updateTime?t.updateTime:e);return n.isEqual(zc.min())&&(n=xd(e)),new Eh(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=xd(t.commitTime);return this.listener.Tr(n,e)}return Lc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Od(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Dd(e.R,t)})};this.cr(n)},e}(Pg),Dg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Cc(e,t),e.prototype.br=function(){if(this.Rr)throw new kc(Ic.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Ic.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new kc(Ic.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Ic.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new kc(Ic.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Mg=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Nc(e),this.Vr=!1):Pc("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Lg=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return xc(o,void 0,void 0,function(){return Tc(this,function(t){switch(t.label){case 0:return Hg(this)?(Pc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return xc(this,void 0,void 0,function(){var e;return Tc(this,function(n){switch(n.label){case 0:return(e=Uc(t)).$r.add(4),[4,qg(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,Ug(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Mg(n,r)};function Ug(t){return xc(this,void 0,void 0,function(){var e,n;return Tc(this,function(r){switch(r.label){case 0:if(!Hg(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function qg(t){return xc(this,void 0,void 0,function(){var e,n;return Tc(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Fg(t,e){var n=Uc(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),zg(n)?Bg(n):sm(n).er()&&Zg(n,e))}function jg(t,e){var n=Uc(t),r=sm(n);n.Or.delete(e),r.er()&&Vg(n,e),0===n.Or.size&&(r.er()?r.ir():Hg(n)&&n.Br.set("Unknown"))}function Zg(t,e){t.qr.U(e.targetId),sm(t).mr(e)}function Vg(t,e){t.qr.U(e),sm(t).yr(e)}function Bg(t){t.qr=new pd({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),sm(t).start(),t.Br.Sr()}function zg(t){return Hg(t)&&!sm(t).tr()&&t.Or.size>0}function Hg(t){return 0===Uc(t).$r.size}function Gg(t){t.qr=void 0}function Wg(t){return xc(this,void 0,void 0,function(){return Tc(this,function(e){return t.Or.forEach(function(e,n){Zg(t,e)}),[2]})})}function Kg(t,e){return xc(this,void 0,void 0,function(){return Tc(this,function(n){return Gg(t),zg(t)?(t.Br.Nr(e),Bg(t)):t.Br.set("Unknown"),[2]})})}function Yg(t,e,n){return xc(this,void 0,void 0,function(){var r,i,o;return Tc(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof dd&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return xc(this,void 0,void 0,function(){var n,r,i,o;return Tc(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Pc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Qg(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ld?t.qr.X(e):e instanceof hd?t.qr.rt(e):t.qr.et(e),n.isEqual(zc.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Bp(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(Xc.EMPTY_BYTE_STRING,n.snapshotVersion)),Vg(t,e);var r=new Mf(n.target,e,1,n.sequenceNumber);Zg(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Pc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Qg(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Qg(t,e,n){return xc(this,void 0,void 0,function(){var r=this;return Tc(this,function(i){switch(i.label){case 0:if(!Ef(e))throw e;return t.$r.add(1),[4,qg(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Bp(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return xc(r,void 0,void 0,function(){return Tc(this,function(e){switch(e.label){case 0:return Pc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,Ug(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function $g(t,e){return e().catch(function(n){return Qg(t,n,e)})}function Jg(t){return xc(this,void 0,void 0,function(){var e,n,r,i,o;return Tc(this,function(s){switch(s.label){case 0:e=Uc(t),n=am(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Hg(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Gp(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=am(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Qg(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Xg(e)&&tm(e),[2]}})})}function Xg(t){return Hg(t)&&!am(t).tr()&&t.kr.length>0}function tm(t){am(t).start()}function em(t){return xc(this,void 0,void 0,function(){return Tc(this,function(e){return am(t).Ar(),[2]})})}function nm(t){return xc(this,void 0,void 0,function(){var e,n,r;return Tc(this,function(i){for(e=am(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function rm(t,e,n){return xc(this,void 0,void 0,function(){var r,i;return Tc(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Df.from(r,e,n),[4,$g(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,Jg(t)];case 2:return o.sent(),[2]}})})}function im(t,e){return xc(this,void 0,void 0,function(){return Tc(this,function(n){switch(n.label){case 0:return e&&am(t).pr?[4,function(t,e){return xc(this,void 0,void 0,function(){var n,r;return Tc(this,function(i){switch(i.label){case 0:return Hh(r=e.code)&&r!==Ic.ABORTED?(n=t.kr.shift(),am(t).sr(),[4,$g(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,Jg(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Xg(t)&&tm(t),[2]}})})}function om(t,e){return xc(this,void 0,void 0,function(){var n;return Tc(this,function(r){switch(r.label){case 0:return n=Uc(t),e?(n.$r.delete(2),[4,Ug(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,qg(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function sm(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Uc(t);return r.br(),new Ng(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Wg.bind(null,t),Ri:Kg.bind(null,t),_r:Yg.bind(null,t)}),t.Mr.push(function(n){return xc(e,void 0,void 0,function(){return Tc(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),zg(t)?Bg(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Gg(t),e.label=3;case 3:return[2]}})})})),t.Ur}function am(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=Uc(t);return r.br(),new Rg(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:em.bind(null,t),Ri:im.bind(null,t),Ir:nm.bind(null,t),Tr:rm.bind(null,t)}),t.Mr.push(function(n){return xc(e,void 0,void 0,function(){return Tc(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Jg(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(Pc("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var um=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new bf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kc(Ic.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function cm(t,e){if(Nc("AsyncQueue",e+": "+t),Ef(t))return new kc(Ic.UNAVAILABLE,e+": "+t);throw t}var lm=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ll.comparator(e.key,n.key)}:function(t,e){return ll.comparator(t.key,e.key)},this.keyedMap=ed(),this.sortedSet=new Wh(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),hm=function(){function t(){this.Kr=new Wh(ll.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Mc():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),dm=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,lm.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ih(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),fm=function(){this.Wr=void 0,this.listeners=[]},pm=function(){this.queries=new wp(function(t){return oh(t)},ih),this.onlineState="Unknown",this.Gr=new Set};function gm(t,e){return xc(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Tc(this,function(c){switch(c.label){case 0:if(n=Uc(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new fm),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=cm(a,"Initialization of query '"+sh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&_m(n),[2]}})})}function mm(t,e){return xc(this,void 0,void 0,function(){var n,r,i,o,s;return Tc(this,function(a){return n=Uc(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function ym(t,e){for(var n=Uc(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&_m(n)}function vm(t,e,n){var r=Uc(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function _m(t){t.Gr.forEach(function(t){t.next()})}var bm=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new dm(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=dm.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),wm=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Cm=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Id(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Rd(this.R,t.document,!1):El.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return xd(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Cm(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||od()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return xc(this,void 0,void 0,function(){var t,e,n,r,i;return Tc(this,function(o){switch(o.label){case 0:return[4,Xp(this.localStore,new Cm(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,tg(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Mp(Object.assign({},this.progress),t))]}})})}}();var xm=function(t){this.key=t},Tm=function(t){this.key=t},Sm=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=od(),this.mutatedKeys=od(),this.lo=uh(t),this.fo=new lm(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new hm,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Ql(this.query)&&i.size===this.query.limit?i.last():null,c=$l(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=ah(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Ql(this.query)||$l(this.query))for(;s.size>this.query.limit;){var l=Ql(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Mc()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new dm(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new hm,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=od(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new Tm(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new xm(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=od();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return dm.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Em=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Im=function(t){this.key=t,this.bo=!1},km=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new wp(function(t){return oh(t)},ih),this.Vo=new Map,this.So=new Set,this.Do=new Wh(ll.comparator),this.Co=new Map,this.No=new ng,this.xo={},this.Fo=new Map,this.ko=cp.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Am(t,e){return xc(this,void 0,void 0,function(){var n,r,i,o,s;return Tc(this,function(a){switch(a.label){case 0:return n=iy(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,Wp(n.localStore,nh(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Om(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Fg(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Om(t,e,n,r){return xc(this,void 0,void 0,function(){var i,o,s,a,u,c;return Tc(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return xc(this,void 0,void 0,function(){var i,o,s;return Tc(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Yp(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Bm(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,Yp(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Sm(e,i.Bn),s=o._o(i.documents),a=cd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Bm(t,n,u.To),c=new Em(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function Pm(t,e){return xc(this,void 0,void 0,function(){var n,r,i;return Tc(this,function(o){switch(o.label){case 0:return n=Uc(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!ih(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Kp(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),jg(n.remoteStore,r.targetId),Zm(n,r.targetId)}).catch(pp)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Zm(n,r.targetId),[4,Kp(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Nm(t,e,n){return xc(this,void 0,void 0,function(){var r,i,o,s;return Tc(this,function(a){switch(a.label){case 0:r=oy(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Uc(t),i=Bc.now(),o=e.reduce(function(t,e){return t.add(e.key)},od());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Nh(c,n.get(c.key));null!=l&&s.push(new Lh(c.key,l,Sl(l.toProto().mapValue),Ih.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Wh(jc)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Gm(r,i.changes)];case 3:return a.sent(),[4,Jg(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=cm(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Rm(t,e){return xc(this,void 0,void 0,function(){var n,r;return Tc(this,function(i){switch(i.label){case 0:n=Uc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,zp(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Lc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Lc(r.bo):t.removedDocuments.size>0&&(Lc(r.bo),r.bo=!1))}),[4,Gm(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,pp(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Dm(t,e,n){var r=Uc(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Uc(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&_m(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Mm(t,e,n){return xc(this,void 0,void 0,function(){var r,i,o,s,a,u;return Tc(this,function(c){switch(c.label){case 0:return(r=Uc(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Wh(ll.comparator)).insert(o,El.newNoDocument(o,zc.min())),a=od().add(o),u=new ud(zc.min(),new Map,new Qh(jc),s,a),[4,Rm(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Hm(r),[3,4];case 2:return[4,Kp(r.localStore,e,!1).then(function(){return Zm(r,e,n)}).catch(pp)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Lm(t,e){return xc(this,void 0,void 0,function(){var n,r,i;return Tc(this,function(o){switch(o.label){case 0:n=Uc(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Vp(n.localStore,e)];case 2:return i=o.sent(),jm(n,r,null),Fm(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Gm(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,pp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Um(t,e,n){return xc(this,void 0,void 0,function(){var r,i;return Tc(this,function(o){switch(o.label){case 0:r=Uc(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Uc(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Lc(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),jm(r,e,n),Fm(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Gm(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,pp(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function qm(t,e){return xc(this,void 0,void 0,function(){var n,r,i,o,s;return Tc(this,function(a){switch(a.label){case 0:Hg((n=Uc(t)).remoteStore)||Pc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Uc(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=cm(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Fm(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function jm(t,e,n){var r=Uc(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Zm(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||Vm(t,e)})}function Vm(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(jg(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Hm(t))}function Bm(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof xm?(t.No.addReference(o.key,e),zm(t,o)):o instanceof Tm?(Pc("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Vm(t,o.key)):Mc()}}function zm(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Pc("SyncEngine","New document in limbo: "+n),t.So.add(r),Hm(t))}function Hm(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ll(Yc.fromString(e)),r=t.ko.next();t.Co.set(r,new Im(n)),t.Do=t.Do.insert(n,r),Fg(t.remoteStore,new Mf(nh(Yl(n.path)),r,2,Ec.o))}}function Gm(t,e,n){return xc(this,void 0,void 0,function(){var r,i,o,s;return Tc(this,function(a){switch(a.label){case 0:return r=Uc(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Up.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return xc(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Tc(this,function(l){switch(l.label){case 0:n=Uc(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return wf.forEach(e,function(e){return wf.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return wf.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Ef(r=l.sent()))throw r;return Pc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function Wm(t,e){return xc(this,void 0,void 0,function(){var n,r;return Tc(this,function(i){switch(i.label){case 0:return(n=Uc(t)).currentUser.isEqual(e)?[3,3]:(Pc("SyncEngine","User change. New user:",e.toKey()),[4,Zp(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new kc(Ic.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Gm(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function Km(t,e){var n=Uc(t),r=n.Co.get(e);if(r&&r.bo)return od().add(r.key);var i=od(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function Ym(t,e){return xc(this,void 0,void 0,function(){var n,r,i;return Tc(this,function(o){switch(o.label){case 0:return[4,Yp((n=Uc(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Bm(n,e.targetId,i.To),i)]}})})}function Qm(t){return xc(this,void 0,void 0,function(){var e;return Tc(this,function(n){return[2,$p((e=Uc(t)).localStore).then(function(t){return Gm(e,t)})]})})}function $m(t,e,n,r){return xc(this,void 0,void 0,function(){var i,o;return Tc(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Uc(t),r=Uc(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):wf.resolve(null)})})}((i=Uc(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Jg(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(jm(i,e,r||null),Fm(i,e),function(t,e){Uc(Uc(t)._n).Gt(e)}(i.localStore,e)):Mc(),s.label=4;case 4:return[4,Gm(i,o)];case 5:return s.sent(),[3,7];case 6:Pc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function Jm(t,e){return xc(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Tc(this,function(c){switch(c.label){case 0:return iy(n=Uc(t)),oy(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Xm(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,om(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Fg(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return Zm(n,e),Kp(n.localStore,e,!0)}),jg(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,Xm(n,a)];case 5:return c.sent(),function(t){var e=Uc(t);e.Co.forEach(function(t,n){jg(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new Wh(ll.comparator)}(n),n.Oo=!1,[4,om(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function Xm(t,e,n){return xc(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Tc(this,function(g){switch(g.label){case 0:n=Uc(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,Wp(n.localStore,nh(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,Ym(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Qp(n.localStore,a)];case 8:return p=g.sent(),[4,Wp(n.localStore,p)];case 9:return u=g.sent(),[4,Om(n,ty(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function ty(t){return Kl(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function ey(t){var e=Uc(t);return Uc(Uc(e.localStore).persistence).fn()}function ny(t,e,n,r){return xc(this,void 0,void 0,function(){var i,o,s;return Tc(this,function(a){switch(a.label){case 0:return(i=Uc(t)).Oo?(Pc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,$p(i.localStore)];case 3:return o=a.sent(),s=ud.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Gm(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Kp(i.localStore,e,!0)];case 6:return a.sent(),Zm(i,e,r),[3,8];case 7:Mc(),a.label=8;case 8:return[2]}})})}function ry(t,e,n){return xc(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Tc(this,function(d){switch(d.label){case 0:if(!(r=iy(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?(Pc("SyncEngine","Adding an already active target "+s),[3,5]):[4,Qp(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,Wp(r.localStore,a)];case 3:return u=d.sent(),[4,Om(r,ty(a),u.targetId,!1)];case 4:d.sent(),Fg(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Tc(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Kp(r.localStore,t,!1).then(function(){jg(r.remoteStore,t),Zm(r,t)}).catch(pp)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function iy(t){var e=Uc(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Km.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Mm.bind(null,e),e.vo._r=ym.bind(null,e.eventManager),e.vo.Mo=vm.bind(null,e.eventManager),e}function oy(t){var e=Uc(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Lm.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Um.bind(null,e),e}var sy=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return xc(this,void 0,void 0,function(){return Tc(this,function(e){switch(e.label){case 0:return this.R=Ag(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return jp(this.persistence,new qp,t.initialUser,this.R)},t.prototype.qo=function(t){return new ug(lg.bs,this.R)},t.prototype.Bo=function(t){return new wg},t.prototype.terminate=function(){return xc(this,void 0,void 0,function(){return Tc(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),ay=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Cc(e,t),e.prototype.initialize=function(e){return xc(this,void 0,void 0,function(){return Tc(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Jp(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,oy(this.Ko.syncEngine)];case 4:return n.sent(),[4,Jg(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return jp(this.persistence,new qp,t.initialUser,this.R)},e.prototype.Uo=function(t){return new yp(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Dp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ep.withCacheSize(this.cacheSizeBytes):ep.DEFAULT;return new Pp(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Ig(),kg(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new wg},e}(sy),uy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Cc(e,t),e.prototype.initialize=function(e){return xc(this,void 0,void 0,function(){var n,r=this;return Tc(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof bg?(this.sharedClientState.syncEngine={ui:$m.bind(null,n),ai:ny.bind(null,n),hi:ry.bind(null,n),fn:ey.bind(null,n),ci:Qm.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return xc(r,void 0,void 0,function(){return Tc(this,function(e){switch(e.label){case 0:return[4,Jm(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Ig();if(!bg.yt(e))throw new kc(Ic.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Dp(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new bg(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(ay),cy=function(){function t(){}return t.prototype.initialize=function(t,e){return xc(this,void 0,void 0,function(){var n=this;return Tc(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Dm(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Wm.bind(null,this.syncEngine),[4,om(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new pm},t.prototype.createDatastore=function(t){var e=Ag(t.databaseInfo.databaseId),n=new Eg(t.databaseInfo);return function(t,e,n){return new Dg(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Dm(s.syncEngine,t,0)},o=xg.yt()?new xg:new Cg,new Lg(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new km(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return xc(this,void 0,void 0,function(){var e;return Tc(this,function(n){switch(n.label){case 0:return e=Uc(t),Pc("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,qg(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),ly=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),hy=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new bf,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return xc(this,void 0,void 0,function(){return Tc(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return xc(this,void 0,void 0,function(){return Tc(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return xc(this,void 0,void 0,function(){var t,e,n,r;return Tc(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new wm(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return xc(this,void 0,void 0,function(){var t,e;return Tc(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return xc(this,void 0,void 0,function(){var e;return Tc(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return xc(this,void 0,void 0,function(){var t,e;return Tc(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return xc(this,void 0,void 0,function(){var e,n=this;return Tc(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new kc(Ic.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return xc(this,void 0,void 0,function(){var n,r,i,o,s,a;return Tc(this,function(u){switch(u.label){case 0:return n=Uc(t),r=Od(n.R)+"/documents",i={documents:e.map(function(t){return Ed(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Lc(!!e.found);var n=Id(t,e.found.name),r=xd(e.found.updateTime),i=new Tl({mapValue:{fields:e.found.fields}});return El.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Lc(!!e.missing),Lc(!!e.readTime);var n=Id(t,e.missing),r=xd(e.readTime);return El.newNoDocument(n,r)}(t,e):Mc()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Lc(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Vh(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return xc(this,void 0,void 0,function(){var t,e=this;return Tc(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=ll.fromPath(n);e.mutations.push(new Bh(r,e.precondition(r)))}),[4,function(t,e){return xc(this,void 0,void 0,function(){var n,r,i;return Tc(this,function(o){switch(o.label){case 0:return n=Uc(t),r=Od(n.R)+"/documents",i={writes:e.map(function(t){return Dd(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Mc();e=zc.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new kc(Ic.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ih.updateTime(e):Ih.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(zc.min()))throw new kc(Ic.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ih.updateTime(e)}return Ih.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),dy=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Og(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return xc(t,void 0,void 0,function(){var t,e,n=this;return Tc(this,function(r){return t=new hy(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!al(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Hh(e)}return!1},t}(),fy=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=hg.UNAUTHENTICATED,this.clientId=Fc.u(),this.credentialListener=function(){},this.receivedInitialUser=new bf,this.credentials.setChangeListener(function(t){Pc("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return xc(this,void 0,void 0,function(){return Tc(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new kc(Ic.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new bf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return xc(t,void 0,void 0,function(){var t,n;return Tc(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=cm(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function py(t,e){return xc(this,void 0,void 0,function(){var n,r,i=this;return Tc(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Pc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return xc(i,void 0,void 0,function(){return Tc(this,function(t){switch(t.label){case 0:return[4,Zp(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function gy(t,e){return xc(this,void 0,void 0,function(){var n,r;return Tc(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,my(t)];case 1:return n=i.sent(),Pc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return xc(this,void 0,void 0,function(){var n,r;return Tc(this,function(i){switch(i.label){case 0:return(n=Uc(t)).asyncQueue.verifyOperationInProgress(),Pc("RemoteStore","RemoteStore received new credentials"),r=Hg(n),n.$r.add(3),[4,qg(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,Ug(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function my(t){return xc(this,void 0,void 0,function(){return Tc(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Pc("FirestoreClient","Using default OfflineComponentProvider"),[4,py(t,new sy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function yy(t){return xc(this,void 0,void 0,function(){return Tc(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Pc("FirestoreClient","Using default OnlineComponentProvider"),[4,gy(t,new cy)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function vy(t){return my(t).then(function(t){return t.persistence})}function _y(t){return my(t).then(function(t){return t.localStore})}function by(t){return yy(t).then(function(t){return t.remoteStore})}function wy(t){return yy(t).then(function(t){return t.syncEngine})}function Cy(t){return xc(this,void 0,void 0,function(){var e,n;return Tc(this,function(r){switch(r.label){case 0:return[4,yy(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Am.bind(null,e.syncEngine),n.onUnlisten=Pm.bind(null,e.syncEngine),n)]}})})}function xy(t,e,n){var r=this;void 0===n&&(n={});var i=new bf;return t.asyncQueue.enqueueAndForget(function(){return xc(r,void 0,void 0,function(){var r;return Tc(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ly({next:function(o){e.enqueueAndForget(function(){return mm(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new kc(Ic.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new kc(Ic.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new bm(Yl(n.path),o,{includeMetadataChanges:!0,so:!0});return gm(t,s)},[4,Cy(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function Ty(t,e,n){var r=this;void 0===n&&(n={});var i=new bf;return t.asyncQueue.enqueueAndForget(function(){return xc(r,void 0,void 0,function(){var r;return Tc(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ly({next:function(n){e.enqueueAndForget(function(){return mm(t,s)}),n.fromCache&&"server"===r.source?i.reject(new kc(Ic.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new bm(n,o,{includeMetadataChanges:!0,so:!0});return gm(t,s)},[4,Cy(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Sy=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},Ey=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Iy=new Map,ky=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Ay=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(hg.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Oy=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Py=function(){function t(t){var e=this;this.oc=null,this.currentUser=hg.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?(Pc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Lc("string"==typeof n.accessToken),new ky(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Lc(null===t||"string"==typeof t),new hg(t)},t}(),Ny=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=hg.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Ry=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Ny(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(hg.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Dy(t,e,n){if(!n)throw new kc(Ic.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function My(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new kc(Ic.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ly(t,e,n,r){if(!0===e&&!0===r)throw new kc(Ic.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Uy(t){if(!ll.isDocumentKey(t))throw new kc(Ic.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function qy(t){if(ll.isDocumentKey(t))throw new kc(Ic.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Fy(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Mc()}function jy(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new kc(Ic.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Fy(t);throw new kc(Ic.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Zy(t,e){if(e<=0)throw new kc(Ic.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Vy=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new kc(Ic.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new kc(Ic.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Ly("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),By=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vy({}),this._settingsFrozen=!1,t instanceof Ey?(this._databaseId=t,this._credentials=new Ay):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new kc(Ic.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ey(t.options.projectId)}(t),this._credentials=new Py(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new kc(Ic.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new kc(Ic.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vy(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Ay;switch(t.type){case"gapi":var e=t.client;return Lc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ry(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new kc(Ic.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Iy.get(this))&&(Pc("ComponentProvider","Removing Datastore"),Iy.delete(this),t.terminate()),Promise.resolve();var t},t}(),zy=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Gy(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Hy=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Gy=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Yl(r))||this)._path=r,i.type="collection",i}return Cc(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new zy(this.firestore,null,new ll(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Hy);function Wy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,vo.m9)(t),Dy("collection","path",e),t instanceof By)return qy(n=Yc.fromString.apply(Yc,Sc([e],r))),new Gy(t,null,n);if(!(t instanceof zy||t instanceof Gy))throw new kc(Ic.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return qy(n=Yc.fromString.apply(Yc,Sc([t.path],r)).child(Yc.fromString(e))),new Gy(t.firestore,null,n)}function Ky(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=(0,vo.m9)(t),1===arguments.length&&(e=Fc.u()),Dy("doc","path",e),t instanceof By)return Uy(n=Yc.fromString.apply(Yc,Sc([e],r))),new zy(t,null,new ll(n));if(!(t instanceof zy||t instanceof Gy))throw new kc(Ic.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Uy(n=t._path.child(Yc.fromString.apply(Yc,Sc([e],r)))),new zy(t.firestore,t instanceof Gy?t.converter:null,new ll(n))}function Yy(t,e){return t=(0,vo.m9)(t),e=(0,vo.m9)(e),(t instanceof zy||t instanceof Gy)&&(e instanceof zy||e instanceof Gy)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Qy(t,e){return t=(0,vo.m9)(t),e=(0,vo.m9)(e),t instanceof Hy&&e instanceof Hy&&t.firestore===e.firestore&&ih(t._query,e._query)&&t.converter===e.converter}var $y=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Og(this,"async_queue_retry"),this.Ec=function(){var e=kg();e&&Pc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=kg();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=kg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return xc(this,void 0,void 0,function(){var t,e=this;return Tc(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!Ef(t=n.sent()))throw t;return Pc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Nc("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=um.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Mc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return xc(this,void 0,void 0,function(){var t;return Tc(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function Jy(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new bf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Xy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new $y,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Cc(e,t),e.prototype._terminate=function(){return this._firestoreClient||ev(this),this._firestoreClient.terminate()},e}(By);function tv(t){return t._firestoreClient||ev(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ev(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Sy(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new fy(t._credentials,t._queue,r)}function nv(t,e,n){var r=this,i=new bf;return t.asyncQueue.enqueue(function(){return xc(r,void 0,void 0,function(){var r;return Tc(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,py(t,n)];case 1:return o.sent(),[4,gy(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Ic.FAILED_PRECONDITION||t.code===Ic.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function rv(t){if(t._initialized||t._terminated)throw new kc(Ic.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var iv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new kc(Ic.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $c(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),ov=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Xc.fromBase64String(e))}catch(e){throw new kc(Ic.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Xc.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),sv=function(t){this._methodName=t},av=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new kc(Ic.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new kc(Ic.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return jc(this._lat,t._lat)||jc(this._long,t._long)},t}(),uv=/^__.*__$/,cv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Lh(t,this.data,this.fieldMask,e,this.fieldTransforms):new Mh(t,this.data,e,this.fieldTransforms)},t}(),lv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Lh(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function hv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Mc()}}var dv=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Nv(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(hv(this.Dc)&&uv.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),fv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Ag(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new dv({Dc:t,methodName:e,Lc:n,path:$c.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function pv(t){var e=t._freezeSettings(),n=Ag(t._databaseId);return new fv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function gv(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);kv("Data must be an object, but it was:",s,r);var a,u,c=Ev(r,s);if(o.merge)a=new Jc(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Av(e,d[h],n);if(!s.contains(f))throw new kc(Ic.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Rv(l,f)||l.push(f)}a=new Jc(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new cv(new Tl(c),a,u)}var mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cc(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(sv);function yv(t,e,n){return new dv({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var vv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cc(e,t),e.prototype._toFieldTransform=function(t){return new Sh(t.path,new yh)},e.prototype.isEqual=function(t){return t instanceof e},e}(sv),_v=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Cc(e,t),e.prototype._toFieldTransform=function(t){var e=yv(this,t,!0),n=this.qc.map(function(t){return Sv(t,e)}),r=new vh(n);return new Sh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(sv),bv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Cc(e,t),e.prototype._toFieldTransform=function(t){var e=yv(this,t,!0),n=this.qc.map(function(t){return Sv(t,e)}),r=new bh(n);return new Sh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(sv),wv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Cc(e,t),e.prototype._toFieldTransform=function(t){var e=new Ch(t.R,dh(t.R,this.Uc));return new Sh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(sv);function Cv(t,e,n,r){var i=t.Bc(1,e,n);kv("Data must be an object, but it was:",i,r);var o=[],s=Tl.empty();Gc(r,function(t,r){var a=Pv(e,t,n);r=(0,vo.m9)(r);var u=i.kc(a);if(r instanceof mv)o.push(a);else{var c=Sv(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Jc(o);return new lv(s,a,i.fieldTransforms)}function xv(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[Av(e,r,n)],u=[i];if(o.length%2!=0)throw new kc(Ic.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Av(e,o[c])),u.push(o[c+1]);for(var l=[],h=Tl.empty(),d=a.length-1;d>=0;--d)if(!Rv(l,a[d])){var f=a[d],p=u[d];p=(0,vo.m9)(p);var g=s.kc(f);if(p instanceof mv)l.push(f);else{var m=Sv(p,g);null!=m&&(l.push(f),h.set(f,m))}}var y=new Jc(l);return new lv(h,y,s.fieldTransforms)}function Tv(t,e,n,r){return void 0===r&&(r=!1),Sv(n,t.Bc(r?4:3,e))}function Sv(t,e){if(Iv(t=(0,vo.m9)(t)))return kv("Unsupported field value:",e,t),Ev(t,e);if(t instanceof sv)return function(t,e){if(!hv(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Sv(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,vo.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Bc.fromDate(t);return{timestampValue:bd(e.R,n)}}if(t instanceof Bc)return n=new Bc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:bd(e.R,n)};if(t instanceof av)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ov)return{bytesValue:wd(e.R,t._byteString)};if(t instanceof zy){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Td(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+Fy(t))}(t,e)}function Ev(t,e){var n={};return Wc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gc(t,function(t,r){var i=Sv(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Iv(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Bc||t instanceof av||t instanceof ov||t instanceof zy||t instanceof sv)}function kv(t,e,n){if(!Iv(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Fy(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Av(t,e,n){if((e=(0,vo.m9)(e))instanceof iv)return e._internalPath;if("string"==typeof e)return Pv(t,e);throw Nv("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Ov=new RegExp("[~\\*/\\[\\]]");function Pv(t,e,n){if(e.search(Ov)>=0)throw Nv("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(iv.bind.apply(iv,Sc([void 0],e.split(".")))))._internalPath}catch(Lo){throw Nv("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Nv(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new kc(Ic.INVALID_ARGUMENT,(a+=". ")+t+u)}function Rv(t,e){return t.some(function(t){return t.isEqual(e)})}var Dv=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new zy(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Mv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Lv("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Mv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cc(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Dv);function Lv(t,e){return"string"==typeof e?Pv(t,e):e instanceof iv?e._internalPath:e._delegate._internalPath}var Uv=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),qv=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Cc(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Fv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Lv("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Dv),Fv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cc(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(qv),jv=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Uv(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Fv(n._firestore,n._userDataWriter,r.key,r,new Uv(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new kc(Ic.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Fv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Uv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Fv(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Uv(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Zv(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Zv(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Mc()}}function Vv(t,e){return t instanceof qv&&e instanceof qv?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof jv&&e instanceof jv&&t._firestore===e._firestore&&Qy(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Bv(t){if($l(t)&&0===t.explicitOrderBy.length)throw new kc(Ic.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var zv=function(){};function Hv(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Gv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Cc(e,t),e.prototype._apply=function(t){var e=pv(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new kc(Ic.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Xv(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Jv(r,t,l[c]));a={arrayValue:{values:u}}}else a=Jv(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Xv(s,o),a=Tv(n,"where",s,"in"===o||"not-in"===o);var h=Nl.create(i,o,a);return function(t,e){if(e.g()){var n=Xl(t);if(null!==n&&!n.isEqual(e.field))throw new kc(Ic.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Jl(t);null!==r&&t_(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new kc(Ic.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Hy(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Wl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(zv),Wv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Cc(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new kc(Ic.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new kc(Ic.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Bl(e,n);return function(t,e){if(null===Jl(t)){var n=Xl(t);null!==n&&t_(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new Hy(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Wl(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(zv),Kv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Cc(e,t),e.prototype._apply=function(t){return new Hy(t.firestore,t.converter,rh(t._query,this.Gc,this.zc))},e}(zv),Yv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Cc(e,t),e.prototype._apply=function(t){var e=$v(t,this.type,this.Hc,this.Jc);return new Hy(t.firestore,t.converter,function(t,e){return new Wl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(zv),Qv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Cc(e,t),e.prototype._apply=function(t){var e=$v(t,this.type,this.Hc,this.Jc);return new Hy(t.firestore,t.converter,function(t,e){return new Wl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(zv);function $v(t,e,n,r){if(n[0]=(0,vo.m9)(n[0]),n[0]instanceof Dv)return function(t,e,n,r,i){if(!r)throw new kc(Ic.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=eh(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(vl(e,r.key));else{var c=r.data.field(u.field);if(il(c))throw new kc(Ic.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new kc(Ic.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Zl(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=pv(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new kc(Ic.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new kc(Ic.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!th(t)&&-1!==c.indexOf("/"))throw new kc(Ic.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Yc.fromString(c));if(!ll.isDocumentKey(l))throw new kc(Ic.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new ll(l);a.push(vl(e,h))}else{var d=Tv(n,r,c);a.push(d)}}return new Zl(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Jv(t,e,n){if("string"==typeof(n=(0,vo.m9)(n))){if(""===n)throw new kc(Ic.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!th(e)&&-1!==n.indexOf("/"))throw new kc(Ic.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Yc.fromString(n));if(!ll.isDocumentKey(r))throw new kc(Ic.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return vl(t,new ll(r))}if(n instanceof zy)return vl(t,n._key);throw new kc(Ic.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Fy(n)+".")}function Xv(t,e){if(!Array.isArray(t)||0===t.length)throw new kc(Ic.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new kc(Ic.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function t_(t,e,n){if(!n.isEqual(e))throw new kc(Ic.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var e_=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),hl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return nl(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(rl(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Mc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Gc(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new av(nl(t.latitude),nl(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ol(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(sl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=el(t);return new Bc(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Yc.fromString(t);Lc(Yd(n));var r=new Ey(n.get(1),n.get(3)),i=new ll(n.popFirst(5));return r.isEqual(e)||Nc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function n_(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var r_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Cc(e,t),e.prototype.convertBytes=function(t){return new ov(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new zy(this.firestore,null,e)},e}(e_),i_=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=pv(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=o_(t,this._firestore),i=n_(r.converter,e,n),o=gv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Ih.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=o_(t,this._firestore);return o="string"==typeof(e=(0,vo.m9)(e))||e instanceof iv?xv(this._dataReader,"WriteBatch.update",s._key,e,n,r):Cv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ih.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=o_(t,this._firestore);return this._mutations=this._mutations.concat(new Vh(e._key,Ih.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new kc(Ic.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function o_(t,e){if((t=(0,vo.m9)(t)).firestore!==e)throw new kc(Ic.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var s_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Cc(e,t),e.prototype.convertBytes=function(t){return new ov(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new zy(this.firestore,null,e)},e}(e_);function a_(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=jy(t,zy);var o=jy(t.firestore,Xy),s=pv(o);return c_(o,[("string"==typeof(e=(0,vo.m9)(e))||e instanceof iv?xv(s,"updateDoc",t._key,e,n,r):Cv(s,"updateDoc",t._key,e)).toMutation(t._key,Ih.exists(!0))])}function u_(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=(0,vo.m9)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Jy(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(Jy(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof zy)c=jy(t.firestore,Xy),l=Yl(t._key.path),u={next:function(e){i[a]&&i[a](l_(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=jy(t,Hy);c=jy(f.firestore,Xy),l=f._query;var p=new s_(c);u={next:function(t){i[a]&&i[a](new jv(c,p,f,t))},error:i[a+1],complete:i[a+2]},Bv(t._query)}return function(t,e,n,r){var i=this,o=new ly(r),s=new bm(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return xc(i,void 0,void 0,function(){var e;return Tc(this,function(n){switch(n.label){case 0:return e=gm,[4,Cy(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return xc(i,void 0,void 0,function(){var e;return Tc(this,function(n){switch(n.label){case 0:return e=mm,[4,Cy(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(tv(c),l,h,u)}function c_(t,e){return function(t,e){var n=this,r=new bf;return t.asyncQueue.enqueueAndForget(function(){return xc(n,void 0,void 0,function(){var n;return Tc(this,function(i){switch(i.label){case 0:return n=Nm,[4,wy(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(tv(t),e)}function l_(t,e,n){var r=n.docs.get(e._key),i=new s_(t);return new qv(t,i,e._key,r,new Uv(n.hasPendingWrites,n.fromCache),e.converter)}var h_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Cc(e,t),e.prototype.get=function(e){var n=this,r=o_(e,this._firestore),i=new s_(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new qv(n._firestore,i,r._key,t._document,new Uv(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=pv(t)}return t.prototype.get=function(t){var e=this,n=o_(t,this._firestore),r=new r_(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Mc();var i=t[0];if(i.isFoundDocument())return new Dv(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Dv(e._firestore,r,n._key,null,n.converter);throw Mc()})},t.prototype.set=function(t,e,n){var r=o_(t,this._firestore),i=n_(r.converter,e,n),o=gv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=o_(t,this._firestore);return o="string"==typeof(e=(0,vo.m9)(e))||e instanceof iv?xv(this._dataReader,"Transaction.update",s._key,e,n,r):Cv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=o_(t,this._firestore);return this._transaction.delete(e._key),this},t}());function d_(){if("undefined"==typeof Uint8Array)throw new kc(Ic.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function f_(){if("undefined"==typeof atob)throw new kc(Ic.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var p_=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return f_(),new t(ov.fromBase64String(e))},t.fromUint8Array=function(e){return d_(),new t(ov.fromUint8Array(e))},t.prototype.toBase64=function(){return f_(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return d_(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),g_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){rv(t=jy(t,Xy));var n=tv(t),r=t._freezeSettings(),i=new cy;return nv(n,i,new ay(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){rv(t=jy(t,Xy));var e=tv(t),n=t._freezeSettings(),r=new cy;return nv(e,r,new uy(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new kc(Ic.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new bf;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return xc(e,void 0,void 0,function(){var e;return Tc(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return xc(this,void 0,void 0,function(){return Tc(this,function(e){switch(e.label){case 0:return xf.yt()?[4,xf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Dp(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),m_=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Ey||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=jy(t,By))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Rc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=(0,vo.Sg)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new kc(Ic.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Oy(new ky(o,new hg(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return xc(e,void 0,void 0,function(){var e,n;return Tc(this,function(r){switch(r.label){case 0:return[4,vy(t)];case 1:return e=r.sent(),[4,by(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Uc(t);return e.$r.delete(0),Ug(e)}(n))]}})})})}(tv(jy(this._delegate,Xy)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return xc(e,void 0,void 0,function(){var e,n;return Tc(this,function(r){switch(r.label){case 0:return[4,vy(t)];case 1:return e=r.sent(),[4,by(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return xc(this,void 0,void 0,function(){var e;return Tc(this,function(n){switch(n.label){case 0:return(e=Uc(t)).$r.add(0),[4,qg(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(tv(jy(this._delegate,Xy)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ly("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new bf;return t.asyncQueue.enqueueAndForget(function(){return xc(e,void 0,void 0,function(){var e;return Tc(this,function(r){switch(r.label){case 0:return e=qm,[4,wy(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(tv(jy(this._delegate,Xy)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ly(e);return t.asyncQueue.enqueueAndForget(function(){return xc(n,void 0,void 0,function(){var e;return Tc(this,function(n){switch(n.label){case 0:return e=function(t,e){Uc(t).Gr.add(e),e.next()},[4,Cy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return xc(n,void 0,void 0,function(){var e;return Tc(this,function(n){switch(n.label){case 0:return e=function(t,e){Uc(t).Gr.delete(e)},[4,Cy(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(tv(t=jy(t,Xy)),Jy(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new kc(Ic.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new O_(this,Wy(this._delegate,t))}catch(t){throw C_(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new w_(this,Ky(this._delegate,t))}catch(t){throw C_(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new I_(this,function(t,e){if(t=jy(t,By),Dy("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new kc(Ic.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Hy(t,null,function(t){return new Wl(Yc.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw C_(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new bf;return t.asyncQueue.enqueueAndForget(function(){return xc(n,void 0,void 0,function(){var n;return Tc(this,function(i){switch(i.label){case 0:return[4,function(t){return yy(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new dy(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(tv(t),function(n){return e(new h_(t,n))})}(this._delegate,function(n){return t(new v_(e,n))})},t.prototype.batch=function(){var t=this;return tv(this._delegate),new __(new i_(this._delegate,function(e){return c_(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new kc(Ic.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new kc(Ic.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),y_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Cc(e,t),e.prototype.convertBytes=function(t){return new p_(new ov(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return w_.Zc(e,this.firestore,null)},e}(e_),v_=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new y_(t)}return t.prototype.get=function(t){var e=this,n=P_(t);return this._delegate.get(n).then(function(t){return new S_(e._firestore,new qv(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=P_(t);return n?(My("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=P_(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Sc([s,e,n],i)),this},t.prototype.delete=function(t){var e=P_(t);return this._delegate.delete(e),this},t}(),__=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=P_(t);return n?(My("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=P_(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Sc([s,e,n],i)),this},t.prototype.delete=function(t){var e=P_(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),b_=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Fv(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new E_(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new y_(e),n),i.set(n,o)),o},t}();b_.eu=new WeakMap;var w_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new y_(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new kc(Ic.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new zy(n._delegate,r,new ll(e)))},t.Zc=function(e,n,r){return new t(n,new zy(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new O_(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new O_(this.firestore,Wy(this._delegate,t))}catch(t){throw C_(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,vo.m9)(t))instanceof zy&&Yy(this._delegate,t)},t.prototype.set=function(t,e){e=My("DocumentReference.set",e);try{return function(t,e,n){t=jy(t,zy);var r=jy(t.firestore,Xy),i=n_(t.converter,e,n);return c_(r,[gv(pv(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Ih.none())])}(this._delegate,t,e)}catch(t){throw C_(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?a_(this._delegate,t):a_.apply(void 0,Sc([this._delegate,t,e],n))}catch(t){throw C_(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return c_(jy((t=this._delegate).firestore,Xy),[new Vh(t._key,Ih.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=x_(e),i=T_(e,function(e){return new S_(t.firestore,new qv(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return u_(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=jy(t,zy);var e=jy(t.firestore,Xy),n=tv(e),r=new s_(e);return function(t,e){var n=this,r=new bf;return t.asyncQueue.enqueueAndForget(function(){return xc(n,void 0,void 0,function(){var n;return Tc(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return xc(this,void 0,void 0,function(){var r,i;return Tc(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Uc(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new kc(Ic.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=cm(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,_y(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new qv(e,r,t._key,n,new Uv(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=jy(t,zy);var e=jy(t.firestore,Xy);return xy(tv(e),t._key,{source:"server"}).then(function(n){return l_(e,t,n)})}(this._delegate):function(t){t=jy(t,zy);var e=jy(t.firestore,Xy);return xy(tv(e),t._key).then(function(n){return l_(e,t,n)})}(this._delegate)).then(function(t){return new S_(e.firestore,new qv(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?b_.tu(this.firestore,e):null))},t}();function C_(t,e,n){return t.message=t.message.replace(e,n),t}function x_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Jy(r))return r}return{}}function T_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Jy(t[0])?t[0]:Jy(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var S_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new w_(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Vv(this._delegate,t._delegate)},t}(),E_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Cc(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(S_),I_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new y_(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Hv(this._delegate,function(t,e,n){var r=e,i=Lv("where",t);return new Gv(i,r,n)}(e,n,r)))}catch(e){throw C_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Hv(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Lv("orderBy",t);return new Wv(r,n)}(e,n)))}catch(e){throw C_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Hv(this._delegate,function(t){return Zy("limit",t),new Kv("limit",t,"F")}(e)))}catch(e){throw C_(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Hv(this._delegate,function(t){return Zy("limitToLast",t),new Kv("limitToLast",t,"L")}(e)))}catch(e){throw C_(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Hv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yv("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw C_(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Hv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Yv("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw C_(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Hv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qv("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw C_(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Hv(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qv("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw C_(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Qy(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=jy(t,Hy);var e=jy(t.firestore,Xy),n=tv(e),r=new s_(e);return function(t,e){var n=this,r=new bf;return t.asyncQueue.enqueueAndForget(function(){return xc(n,void 0,void 0,function(){var n;return Tc(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return xc(this,void 0,void 0,function(){var r,i,o,s,a;return Tc(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Yp(t,e,!0)];case 1:return a=u.sent(),r=new Sm(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=cm(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,_y(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new jv(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=jy(t,Hy);var e=jy(t.firestore,Xy),n=tv(e),r=new s_(e);return Ty(n,t._query,{source:"server"}).then(function(n){return new jv(e,r,t,n)})}(this._delegate):function(t){t=jy(t,Hy);var e=jy(t.firestore,Xy),n=tv(e),r=new s_(e);return Bv(t._query),Ty(n,t._query).then(function(n){return new jv(e,r,t,n)})}(this._delegate)).then(function(t){return new A_(e.firestore,new jv(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=x_(e),i=T_(e,function(e){return new A_(t.firestore,new jv(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return u_(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?b_.tu(this.firestore,e):null))},t}(),k_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new E_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),A_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new I_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new E_(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new k_(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new E_(n._firestore,r))})},t.prototype.isEqual=function(t){return Vv(this._delegate,t._delegate)},t}(),O_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Cc(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new w_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new w_(this.firestore,void 0===t?Ky(this._delegate):Ky(this._delegate,t))}catch(t){throw C_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=jy(t.firestore,Xy),r=Ky(t),i=n_(t.converter,e);return c_(n,[gv(pv(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Ih.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new w_(e.firestore,t)})},e.prototype.isEqual=function(t){return Yy(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?b_.tu(this.firestore,t):null))},e}(I_);function P_(t){return jy(t,zy)}var N_,R_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(iv.bind.apply(iv,Sc([void 0],t)))}return t.documentId=function(){return new t($c.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,vo.m9)(t))instanceof iv&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),D_=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new vv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new mv("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new _v("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bv("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new wv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),M_=n(8308),L_={Firestore:m_,GeoPoint:av,Timestamp:Bc,Blob:p_,Transaction:v_,WriteBatch:__,DocumentReference:w_,DocumentSnapshot:S_,Query:I_,QueryDocumentSnapshot:E_,QuerySnapshot:A_,CollectionReference:O_,FieldPath:R_,FieldValue:D_,setLogLevel:function(t){Ac.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function U_(t,e){return function(t,e=wi.z){return new Et.y(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function q_(t,e){return U_(t,e).pipe((0,qt.U)(t=>({payload:t,type:"query"})))}function F_(t,e){return q_(t,e).pipe(Wt(void 0),po(),(0,qt.U)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function j_(t,e,n){return F_(t,n).pipe(Kt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Z_(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Z_(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Z_(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Ti(),(0,qt.U)(t=>t.map(t=>({type:t.type,payload:t}))))}function Z_(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function V_(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new M_.wA("firestore",function(t){return function(t,e){return new m_(t,new Xy(t,e),new g_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},L_)))})(N_=yo.Z),N_.registerVersion("@firebase/firestore","2.3.0");class B_{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=F_(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,qt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Wt(void 0),po(),$t(([t,e])=>e.length>0||!t),(0,qt.U)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Kt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=V_(t);return j_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return q_(this.query,this.afs.schedulers.outsideAngular).pipe((0,qt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,gt.D)(this.query.get(t)).pipe((0,Ni.QV)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new z_(this.ref.doc(t),this.afs)}}class z_{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Q_(n,e);return new B_(r,i,this.afs)}snapshotChanges(){return U_(this.ref,this.afs.schedulers.outsideAngular).pipe(Wt(void 0),po(),(0,qt.U)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe((0,qt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,gt.D)(this.ref.get(t)).pipe((0,Ni.QV)(this.afs.schedulers.insideAngular))}}class H_{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?F_(this.query,this.afs.schedulers.outsideAngular).pipe((0,qt.U)(e=>e.filter(e=>t.indexOf(e.type)>-1)),$t(t=>t.length>0),this.afs.keepUnstableUntilFirst):F_(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Kt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=V_(t);return j_(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return q_(this.query,this.afs.schedulers.outsideAngular).pipe((0,qt.U)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return(0,gt.D)(this.query.get(t)).pipe((0,Ni.QV)(this.afs.schedulers.insideAngular))}}const G_=new r.OlP("angularfire2.enableFirestorePersistence"),W_=new r.OlP("angularfire2.firestore.persistenceSettings"),K_=new r.OlP("angularfire2.firestore.settings"),Y_=new r.OlP("angularfire2.firestore.use-emulator");function Q_(t,e=(t=>t)){return{query:e(t),ref:t}}let $_=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Pi.HU(o),this.keepUnstableUntilFirst=(0,Pi.ss)(this.schedulers);const c=(0,Pi.on)(t,o,e);!Wi.Z.auth&&u&&(0,Pi.yq)();const l=a;[this.firestore,this.persistenceEnabled$]=(0,Pi.sI)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!M(i)){const e=()=>{try{return(0,gt.D)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(N_){return"undefined"!=typeof console&&console.warn(N_),(0,mt.of)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,(0,mt.of)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Q_(n,e),o=this.schedulers.ngZone.run(()=>r);return new B_(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new H_(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new z_(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(Pi.Dh),r.LFG(Pi.xv,8),r.LFG(G_,8),r.LFG(K_,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(W_,8),r.LFG(Y_,8),r.LFG(ji,8))},t.\u0275prov=(0,r.Yz7)({factory:function(){return new t((0,r.LFG)(Pi.Dh),(0,r.LFG)(Pi.xv,8),(0,r.LFG)(G_,8),(0,r.LFG)(K_,8),(0,r.LFG)(r.Lbi),(0,r.LFG)(r.R0b),(0,r.LFG)(W_,8),(0,r.LFG)(Y_,8),(0,r.LFG)(ji,8))},token:t,providedIn:"any"}),t})(),J_=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:G_,useValue:!0},{provide:W_,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({providers:[$_]}),t})(),X_=(()=>{class t{constructor(t,e,n,r){this.firebase=t,this.firebaseAuth=e,this.cartsService=n,this.firestore=r,this.isLoggedIn=!1,this.orderlist=this.firebase.list("orders"),this.userlist=this.firebase.list("users")}signin(t,e){var n=this;return fo(function*(){yield n.firebaseAuth.signInWithEmailAndPassword(t,e).then(t=>{n.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(t.user)),n.firebaseAuth.onAuthStateChanged(t=>{console.log(n.firebaseAuth.authState+" f")}),alert("logged in "),window.location.href="/web/"}).catch(t=>{alert(t.message)})})()}getUsers(){return this.userlist=this.firebase.list("users"),this.userlist.snapshotChanges()}getOrders(){return this.orderlist=this.firebase.list("orders"),this.orderlist.snapshotChanges()}signup(t,e,n,r,i){var o=this;return fo(function*(){yield o.firebaseAuth.createUserWithEmailAndPassword(t,e).then(e=>{o.isLoggedIn=!0,localStorage.setItem("user",JSON.stringify(e.user)),o.userp=[{username:n,mobileno:r,emailadd:t,address:i}],o.cartsService.addUsersTOFirebase(o.userp),alert("signed up"),window.location.href="/web/"}).catch(t=>{alert(t.message)})})()}logout(){this.firebaseAuth.signOut(),localStorage.removeItem("user"),alert("logged out")}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(uo),r.LFG(Gi),r.LFG(lo),r.LFG($_))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),tb=(()=>{class t{constructor(t,e){this._cartsService=t,this.firebaseSerivce=e}ngOnInit(){}closepro(t){t.target.parentElement.style.display="none"}profileupdation(t,e,n,r){this.firebaseSerivce.getUsers().subscribe(i=>{this.orderarray=i.map(i=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(o=>{if(i.payload.val()[0].emailadd===(null==o?void 0:o.email)){var s=String(i.key);this._cartsService.updateUsers(s,t,e,n,r),console.log(i.payload.val()[0].address,i.payload.val()[0].mobileno,i.payload.val()[0].username),alert("profile updated"),window.location.href="/web/"}})})})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(lo),r.Y36(X_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-profile"]],decls:17,vars:0,consts:[["id","pro",1,"pro-model"],[1,"close",3,"click"],[1,"title"],["xmlns","http://www.w3.org/2000/svg","width","86","height","86","fill","rgb(0, 47, 255)","viewBox","0 0 16 16",1,"bi","bi-person-bounding-box"],["d","M1.5 1a.5.5 0 0 0-.5.5v3a.5.5 0 0 1-1 0v-3A1.5 1.5 0 0 1 1.5 0h3a.5.5 0 0 1 0 1h-3zM11 .5a.5.5 0 0 1 .5-.5h3A1.5 1.5 0 0 1 16 1.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 1-.5-.5zM.5 11a.5.5 0 0 1 .5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 1 0 1h-3A1.5 1.5 0 0 1 0 14.5v-3a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v3a1.5 1.5 0 0 1-1.5 1.5h-3a.5.5 0 0 1 0-1h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 1 .5-.5z"],["d","M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm8-9a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"],["placeholder","Name","type","text","id","name","required","",1,"ipfields"],["nam",""],["placeholder","Mobile","type","number","id","phone","required","","minlength","10","maxlength","10",1,"ipfields"],["mob",""],["placeholder","Email","type","text","id","emailid","disabled","",1,"ipfields"],["emails",""],["placeholder","Address","type","text","id","address","required","",1,"ipfields"],["addr",""],[1,"profilebut",3,"click"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",0),r.TgZ(1,"span",1),r.NdJ("click",function(t){return e.closepro(t)}),r._uU(2,"\xd7"),r.qZA(),r.TgZ(3,"span",2),r.O4$(),r.TgZ(4,"svg",3),r._UZ(5,"path",4),r._UZ(6,"path",5),r.qZA(),r.qZA(),r.kcU(),r._UZ(7,"input",6,7),r._UZ(9,"input",8,9),r._UZ(11,"input",10,11),r._UZ(13,"input",12,13),r.TgZ(15,"button",14),r.NdJ("click",function(){r.CHM(t);const n=r.MAs(12),i=r.MAs(8),o=r.MAs(10),s=r.MAs(14);return e.profileupdation(n.value,i.value,o.value,s.value)}),r._uU(16,"Submit"),r.qZA(),r.qZA()}},styles:[".pro-model[_ngcontent-%COMP%]{display:none;position:fixed;width:100%;height:100%;z-index:9;background-color:rgba(218,241,250,.932);overflow:auto;padding:100px 30px 30px;justify-content:center}.title[_ngcontent-%COMP%]{text-align:center;color:#000;margin-bottom:-80px}.profilebut[_ngcontent-%COMP%]{width:150px;height:50px;border:none;background-color:#d608d6;color:#fff;border-radius:30px;outline:none;transition:1s}.profilebut[_ngcontent-%COMP%]:hover{background-color:#fff;color:purple}.ipfields[_ngcontent-%COMP%]{width:300px;height:70px;border-radius:10px;border:none;padding-left:20px;background-color:#f7f7f7;margin-bottom:-350px;transition:.5s}.ipfields[_ngcontent-%COMP%]:focus{box-shadow:0 0 10pt 2pt #ff00c8;outline:none}.close[_ngcontent-%COMP%]{position:absolute;padding:20px;color:#ff00c8}"]}),t})();function eb(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",9),r.TgZ(1,"span",10),r.NdJ("click",function(e){return r.CHM(t),r.oxw(2).fullclose(e)}),r._uU(2,"\xd7"),r.qZA(),r.TgZ(3,"h1",11),r._uU(4,"Preview"),r.qZA(),r._UZ(5,"hr"),r.TgZ(6,"div",12),r.TgZ(7,"div",13),r._UZ(8,"img",14),r.qZA(),r.TgZ(9,"div",13),r.TgZ(10,"p",15),r.TgZ(11,"label",16),r._uU(12,"Name :\xa0"),r.qZA(),r._uU(13),r.qZA(),r.TgZ(14,"p",17),r.TgZ(15,"label",16),r._uU(16,"Address :\xa0"),r.qZA(),r._uU(17),r.qZA(),r.TgZ(18,"p",18),r.TgZ(19,"label",16),r._uU(20,"Mobile :\xa0"),r.qZA(),r._uU(21),r.qZA(),r.TgZ(22,"p",19),r.TgZ(23,"label",16),r._uU(24,"Email :\xa0"),r.qZA(),r._uU(25),r.qZA(),r.qZA(),r.TgZ(26,"div",13),r.TgZ(27,"p",20),r.TgZ(28,"label",16),r._uU(29," Product:\xa0"),r.qZA(),r._uU(30),r.qZA(),r.TgZ(31,"p",20),r.TgZ(32,"label",16),r._uU(33,"Quantity:\xa0"),r.qZA(),r._uU(34),r.qZA(),r.TgZ(35,"p",21),r.TgZ(36,"label",16),r._uU(37,"Price:\xa0"),r.qZA(),r._uU(38),r.qZA(),r.TgZ(39,"p",20),r.TgZ(40,"label",16),r._uU(41,"Payment Mode:\xa0"),r.qZA(),r._uU(42,"COD"),r.qZA(),r.qZA(),r.qZA(),r._UZ(43,"hr"),r.TgZ(44,"button",22),r.NdJ("click",function(){r.CHM(t);const e=r.oxw().$implicit;return r.oxw().addtodb(e.name,e.price,e.imag,e.quantity)}),r._uU(45," Buy"),r.qZA(),r.qZA()}if(2&t){const t=r.oxw().$implicit,e=r.oxw();r.xp6(8),r.s9C("src",t.imag,r.LSH),r.xp6(5),r.Oqu(e.name),r.xp6(4),r.Oqu(e.add),r.xp6(4),r.Oqu(e.mobile),r.xp6(4),r.Oqu(e.email),r.xp6(5),r.Oqu(t.name),r.xp6(4),r.Oqu(t.quantity),r.xp6(4),r.hij("\u20b9",t.price,"")}}function nb(t,e){if(1&t&&(r.TgZ(0,"div",7),r.YNc(1,eb,46,8,"div",8),r.qZA()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.Q6J("ngIf",t.name==n.nme)}}function rb(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"button",23),r.NdJ("click",function(){return r.CHM(t),r.oxw().buyall()}),r._uU(2," Buy All"),r.qZA(),r.qZA()}}function ib(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",24),r.TgZ(1,"span",25),r.NdJ("click",function(e){return r.CHM(t),r.oxw().closeitem(e)}),r._uU(2,"\xd7"),r.qZA(),r._UZ(3,"img",26),r.TgZ(4,"button",27),r.NdJ("click",function(e){const n=r.CHM(t).$implicit;return r.oxw().show(e,n.name)}),r._uU(5," Buy"),r.qZA(),r.TgZ(6,"p",28),r._uU(7),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(3),r.s9C("src",t.imag,r.LSH),r.xp6(4),r.hij("\u20b9",t.price*t.quantity,"")}}let ob=(()=>{class t{constructor(t,e){this._cartsService=t,this.firebaseSerivce=e,this.cartitems=[]}ngOnInit(){this.firebaseSerivce.getUsers().subscribe(t=>{this.orderarray=t.map(t=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(e=>{if(t.payload.val()[0].emailadd===(null==e?void 0:e.email)){let e=document.getElementById("name1");this.name=""+t.payload.val()[0].username,e=document.getElementById("emailid1"),this.email=""+t.payload.val()[0].emailadd,e=document.getElementById("phone1"),this.mobile=""+t.payload.val()[0].mobileno,e=document.getElementById("address1"),this.add=""+t.payload.val()[0].address,this.cartitems=this._cartsService.getcartitems(String(this.email))}})})})}closecart(t){t.target.parentElement.style.transform="translateX(100%)"}fullclose(t){t.target.parentElement.parentElement.parentElement.style.display="none"}closeitem(t){var e={imag:t.target.parentElement.childNodes[1].src,price:t.target.parentElement.childNodes[3].innerHTML.slice(1)};console.log(e),this.cartitems=this._cartsService.removecartitems(e,String(this.email)),this.cartitems=this._cartsService.getcartitems(String(this.email)),location.reload()}addtodb(t,e,n,r){var i,o;void 0===this.name?alert("please login"):(this.firebaseSerivce.getUsers().subscribe(i=>{this.orderarray=i.map(i=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(o=>{i.payload.val()[0].emailadd===(null==o?void 0:o.email)&&(this.randid=0,this.randid=Math.floor(9e9*Math.random())+1e9,console.log(i.payload.val()[0].address,i.payload.val()[0].mobileno,i.payload.val()[0].username),this.orderform=[{orderid:this.randid,name:t,price:e,image:n,username:i.payload.val()[0].username,address:i.payload.val()[0].address,mobileno:i.payload.val()[0].mobileno,email:i.payload.val()[0].emailadd,quantity:r}],this._cartsService.addOrdersToFirebase(this.orderform))})})}),null===(i=document.getElementById("fcl"))||void 0===i||i.click(),null===(o=document.getElementById("clo"))||void 0===o||o.click(),location.reload())}buyall(){void 0===this.name?alert("please login"):(this.cartitems.forEach(t=>{this.firebaseSerivce.getUsers().subscribe(e=>{this.orderarray=e.map(e=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(n=>{e.payload.val()[0].emailadd===(null==n?void 0:n.email)&&(console.log(e.payload.val()[0].address,e.payload.val()[0].mobileno,e.payload.val()[0].username),this.randid=0,this.randid=Math.floor(9e9*Math.random())+1e9,this.orderform=[{orderid:this.randid,name:t.name,price:t.price,image:t.imag,username:e.payload.val()[0].username,address:e.payload.val()[0].address,mobileno:e.payload.val()[0].mobileno,email:e.payload.val()[0].emailadd,quantity:t.quantity}],this._cartsService.addOrdersToFirebase(this.orderform))})})}),this._cartsService.removecartitems({imag:t.imag,price:t.price},String(this.email))}),this.cartitems=this._cartsService.getcartitems(String(this.email)),location.reload())}show(t,e){var n=t.target;this.nme=e,n.parentElement.parentElement.parentElement.childNodes[0].style.display="block",this.firebaseSerivce.getUsers().subscribe(t=>{this.orderarray=t.map(t=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(e=>{if(console.log(t.payload.val()[0].emailadd,null==e?void 0:e.email),t.payload.val()[0].emailadd===(null==e?void 0:e.email)){let e=document.getElementById("name1");this.name=""+t.payload.val()[0].username,e=document.getElementById("emailid1"),this.email=""+t.payload.val()[0].emailadd,e=document.getElementById("phone1"),this.mobile=""+t.payload.val()[0].mobileno,e=document.getElementById("address1"),this.add=""+t.payload.val()[0].address,console.log(t.payload.val()[0].address,t.payload.val()[0].mobileno,t.payload.val()[0].username)}})})})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(lo),r.Y36(X_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-cart"]],decls:9,vars:3,consts:[["id","prev",1,"preview"],["class","full",4,"ngFor","ngForOf"],["id","cart",1,"cart-cont"],[1,"close",3,"click"],[1,"empty"],[4,"ngIf"],["class","cart-card",4,"ngFor","ngForOf"],[1,"full"],["class","prebox",4,"ngIf"],[1,"prebox"],["id","fcl",1,"close","pr",3,"click"],[1,"cen"],[1,"row","low"],[1,"col-md"],["alt","",1,"pimg",3,"src"],["id","name1",1,"fnt"],[1,"colo"],["id","address1",1,"fnt"],["id","phone1",1,"fnt"],["id","emailid1",1,"fnt"],[1,"fnt"],["id","total1",1,"fnt"],[1,"bttn1","padl",3,"click"],["id","buy",1,"buyall","bttn1","padt",3,"click"],[1,"cart-card"],["id","clo",1,"close","in",3,"click"],["alt","",3,"src"],["id","buy",1,"buyall","bttn1","padll",3,"click"],[1,"ty"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.YNc(1,nb,2,1,"div",1),r.qZA(),r.TgZ(2,"div",2),r.TgZ(3,"span",3),r.NdJ("click",function(t){return e.closecart(t)}),r._uU(4,"\xd7"),r.qZA(),r.TgZ(5,"span",4),r._uU(6,"Empty!!"),r.qZA(),r.YNc(7,rb,3,0,"div",5),r.YNc(8,ib,8,2,"div",6),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngForOf",e.cartitems),r.xp6(6),r.Q6J("ngIf",e.cartitems.length),r.xp6(1),r.Q6J("ngForOf",e.cartitems))},directives:[A,P],styles:[".colo[_ngcontent-%COMP%]{color:#4545f0;font-weight:bolder}.padt[_ngcontent-%COMP%]{transform:translate(40px,40px)}.bttn1[_ngcontent-%COMP%]{background-color:#fd00db;color:#fff;width:80px;height:40px;overflow:hidden;border:2px solid #fffcfc;margin-top:15px;margin-left:100px;transition:.5s;outline:none}.lp[_ngcontent-%COMP%]{transform:translateX(35px)}.ty[_ngcontent-%COMP%]{transform:translate(10px,50px)}.padll[_ngcontent-%COMP%]{transform:translate(80px,-110px)}.bttn1[_ngcontent-%COMP%]:hover{border-image:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);border-image-slice:1;background-color:#fff;color:#fd00db}.padl[_ngcontent-%COMP%]{margin-left:10px}.pr[_ngcontent-%COMP%]{float:right}.low[_ngcontent-%COMP%]{padding-top:20px;display:flexbox}.fnt[_ngcontent-%COMP%]{font-size:18px}.prebox[_ngcontent-%COMP%]{background-color:#fff;width:90%;height:auto;display:block;transform:translate(5%,10%);padding:20px;justify-content:center;border-radius:5px;border:2px solid #0804ff}.pimg[_ngcontent-%COMP%]{width:200px;height:200px;transform:translateY(-20px)}.cen[_ngcontent-%COMP%]{text-align:center}.preview[_ngcontent-%COMP%]{display:none;width:100%;background-color:hsla(0,0%,95%,.842);z-index:9}.cart-cont[_ngcontent-%COMP%], .preview[_ngcontent-%COMP%]{height:100%;position:fixed;overflow:scroll}.cart-cont[_ngcontent-%COMP%]{width:350px;background-color:#f7f7f7;z-index:7;transform:translateX(110%);right:0;transition:.5s}.close[_ngcontent-%COMP%]{color:#aaa;position:absolute;font-size:28px;font-weight:700;margin-bottom:40px;padding-right:20px;z-index:6;float:left;padding-top:20px;padding-left:20px}.in[_ngcontent-%COMP%]{float:right;padding-top:0;padding-right:5px}.cart-card[_ngcontent-%COMP%], .in[_ngcontent-%COMP%]{position:relative}.cart-card[_ngcontent-%COMP%]{z-index:1;width:300px;height:170px;background-color:#ececec;margin-top:60px;margin-left:30px;margin-right:40px}.cart-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;position:relative;transform:translate(10px,10px)}.empty[_ngcontent-%COMP%]{z-index:0;margin-top:50%;position:absolute;margin-left:35%;font-weight:900;color:#a8a8a8;font-size:30px}.bttn[_ngcontent-%COMP%]{background-color:#fff;width:80px;height:40px;overflow:hidden;border:2px solid;border-image:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);border-image-slice:1;margin-top:-45%;margin-left:170px;transition:.5s;outline:none}.bttn[_ngcontent-%COMP%]:hover{border:2px solid #fffcfc}.bttn-txt[_ngcontent-%COMP%]{background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);-webkit-background-clip:text;-webkit-text-fill-color:#0000;position:absolute;font-size:20px;font-weight:600;transform:translate(-20px,-240px);font-style:italic}.bttn[_ngcontent-%COMP%]:hover   .bttn-txt[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#eee,#eee);-webkit-background-clip:text;-webkit-text-fill-color:#0000}.bttn-alig[_ngcontent-%COMP%]{margin-top:50px}.bttn-left[_ngcontent-%COMP%]{position:relative;border:none;width:130px;height:120px;background:#f509ec;background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);transform:translate(-200px);transition:.5s}.bttn[_ngcontent-%COMP%]:hover   .bttn-left[_ngcontent-%COMP%]{transform:translate(-85px,-10px)}.bttn-right[_ngcontent-%COMP%]{position:relative;border:none;width:130px;height:120px;transform:translate(160px,-150px);background:#f509ec;background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);transition:.5s}.bttn[_ngcontent-%COMP%]:hover   .bttn-right[_ngcontent-%COMP%]{transform:translate(45px,-150px)}.bttn-alig[_ngcontent-%COMP%]{margin-left:30%}.cart-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:-150px;margin-left:190px;font-size:30px}"]}),t})();function sb(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",8),r.TgZ(1,"span",9),r.NdJ("click",function(e){return r.CHM(t),r.oxw(2).fullclose(e)}),r._uU(2,"\xd7"),r.qZA(),r.TgZ(3,"h1",10),r._uU(4,"Preview"),r.qZA(),r._UZ(5,"hr"),r.TgZ(6,"div",11),r.TgZ(7,"div",12),r._UZ(8,"img",13),r.qZA(),r.TgZ(9,"div",12),r.TgZ(10,"p",14),r.TgZ(11,"label",15),r._uU(12,"Name :\xa0"),r.qZA(),r._uU(13),r.qZA(),r.TgZ(14,"p",16),r.TgZ(15,"label",15),r._uU(16,"Address :\xa0"),r.qZA(),r._uU(17),r.qZA(),r.TgZ(18,"p",17),r.TgZ(19,"label",15),r._uU(20,"Mobile :\xa0"),r.qZA(),r._uU(21),r.qZA(),r.TgZ(22,"p",18),r.TgZ(23,"label",15),r._uU(24,"Email :\xa0"),r.qZA(),r._uU(25),r.qZA(),r.qZA(),r.TgZ(26,"div",12),r.TgZ(27,"p",19),r.TgZ(28,"label",15),r._uU(29," Product:\xa0"),r.qZA(),r._uU(30),r.qZA(),r.TgZ(31,"p",19),r.TgZ(32,"label",15),r._uU(33,"Quantity:\xa0"),r.qZA(),r._uU(34),r.qZA(),r.TgZ(35,"p",20),r.TgZ(36,"label",15),r._uU(37,"Price:\xa0"),r.qZA(),r._uU(38),r.qZA(),r.TgZ(39,"p",19),r.TgZ(40,"label",15),r._uU(41,"Payment Mode:\xa0"),r.qZA(),r._uU(42,"COD"),r.qZA(),r.qZA(),r.qZA(),r._UZ(43,"hr"),r.TgZ(44,"button",21),r.NdJ("click",function(e){r.CHM(t);const n=r.oxw().$implicit;return r.oxw().closeorder(e,n.orid)}),r._uU(45," Cancel"),r.qZA(),r.qZA()}if(2&t){const t=r.oxw().$implicit,e=r.oxw();r.xp6(8),r.s9C("src",t.image,r.LSH),r.xp6(5),r.Oqu(e.name),r.xp6(4),r.Oqu(e.add),r.xp6(4),r.Oqu(e.mobile),r.xp6(4),r.Oqu(e.email),r.xp6(5),r.Oqu(t.itemname),r.xp6(4),r.Oqu(t.quantity),r.xp6(4),r.hij("\u20b9",t.price,"")}}function ab(t,e){if(1&t&&(r.TgZ(0,"div",6),r.YNc(1,sb,46,8,"div",7),r.qZA()),2&t){const t=e.$implicit,n=r.oxw();r.xp6(1),r.Q6J("ngIf",t.itemname==n.nme)}}function ub(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",22),r._UZ(1,"img",23),r.TgZ(2,"button",24),r.NdJ("click",function(e){const n=r.CHM(t).$implicit;return r.oxw().show(e,n.itemname)}),r._uU(3," View"),r.qZA(),r.TgZ(4,"p",25),r._uU(5),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(1),r.s9C("src",t.image,r.LSH),r.xp6(4),r.hij("\u20b9",t.price*t.quantity,"")}}let cb=(()=>{class t{constructor(t,e){this._cartsService=t,this.firebaseSerivce=e,this.cartitems=[],this.displayarray=[],this.count=0}ngOnInit(){this.firebaseSerivce.getUsers().subscribe(t=>{this.orderarray=t.map(t=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(e=>{if(t.payload.val()[0].emailadd===(null==e?void 0:e.email)){let e=document.getElementById("name1");this.name=""+t.payload.val()[0].username,e=document.getElementById("emailid1"),this.email=""+t.payload.val()[0].emailadd,e=document.getElementById("phone1"),this.mobile=""+t.payload.val()[0].mobileno,e=document.getElementById("address1"),this.add=""+t.payload.val()[0].address}})})}),this.firebaseSerivce.getOrders().subscribe(t=>{this.orderarray1=t.map(t=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(e=>{(null==e?void 0:e.email)===t.payload.val()[0].email&&(this.displayarray.push({orid:t.payload.val()[0].orderid,uname:t.payload.val()[0].username,image:t.payload.val()[0].image,email:t.payload.val()[0].email,address:t.payload.val()[0].address,mobile:t.payload.val()[0].mobileno,price:t.payload.val()[0].price,itemname:t.payload.val()[0].name,quantity:t.payload.val()[0].quantity}),this.count+=1,console.log(t.payload.val()[0].address,t.payload.val()[0].mobileno,t.payload.val()[0].username))})})})}closecart(t){t.target.parentElement.style.transform="translateY(100%)"}fullclose(t){t.target.parentElement.parentElement.parentElement.style.display="none"}show(t,e){var n=t.target;this.nme=e,n.parentElement.parentElement.parentElement.childNodes[0].style.display="block",this.firebaseSerivce.getUsers().subscribe(t=>{this.orderarray=t.map(t=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(e=>{if(console.log(t.payload.val()[0].emailadd,null==e?void 0:e.email),t.payload.val()[0].emailadd===(null==e?void 0:e.email)){let e=document.getElementById("name1");this.name=""+t.payload.val()[0].username,e=document.getElementById("emailid1"),this.email=""+t.payload.val()[0].emailadd,e=document.getElementById("phone1"),this.mobile=""+t.payload.val()[0].mobileno,e=document.getElementById("address1"),this.add=""+t.payload.val()[0].address,console.log(t.payload.val()[0].address,t.payload.val()[0].mobileno,t.payload.val()[0].username)}})})})}closeview(t){t.target.parentElement.parentElement.parentElement.style.display="none"}closeorder(t,e){this.firebaseSerivce.getOrders().subscribe(t=>{this.orderarray=t.map(t=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(n=>{console.log(t.payload.val()[0].emailadd,null==n?void 0:n.email),e===t.payload.val()[0].orderid&&(this._cartsService.removeOrders(String(t.key)),this.count-=1,location.reload())})})})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(lo),r.Y36(X_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-orders"]],decls:9,vars:2,consts:[["id","prev",1,"preview"],["class","full",4,"ngFor","ngForOf"],["id","order",1,"cart-cont"],[1,"close",3,"click"],[1,"cn"],["class","cart-card",4,"ngFor","ngForOf"],[1,"full"],["class","prebox",4,"ngIf"],[1,"prebox"],["id","fcl",1,"close","pr",3,"click"],[1,"cen"],[1,"row","low"],[1,"col-md"],["alt","",1,"pimg",3,"src"],["id","name1",1,"fnt"],[1,"colo"],["id","address1",1,"fnt"],["id","phone1",1,"fnt"],["id","emailid1",1,"fnt"],[1,"fnt"],["id","total1",1,"fnt"],[1,"bttn1","padl",3,"click"],[1,"cart-card"],["alt","",3,"src"],["id","buy",1,"buyall","bttn1","padll",3,"click"],[1,"ty"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.YNc(1,ab,2,1,"div",1),r.qZA(),r.TgZ(2,"div",2),r.TgZ(3,"span",3),r.NdJ("click",function(t){return e.closecart(t)}),r._uU(4,"\xd7"),r.qZA(),r.TgZ(5,"h1",4),r._uU(6,"Orders"),r.qZA(),r._UZ(7,"hr"),r.YNc(8,ub,6,2,"div",5),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngForOf",e.displayarray),r.xp6(7),r.Q6J("ngForOf",e.displayarray))},directives:[A,P],styles:["@font-face{font-family:producthead;src:url(https://selva1806.github.io/web/assets/font/Comfortaa-VariableFont_wght.ttf)}.colo[_ngcontent-%COMP%]{color:#4545f0;font-weight:bolder}.bttn1[_ngcontent-%COMP%]{background-color:#fd00db;color:#fff;width:80px;height:40px;overflow:hidden;border:2px solid #fffcfc;margin-top:15px;margin-left:100px;transition:.5s;outline:none}.lp[_ngcontent-%COMP%]{transform:translateX(35px)}.ty[_ngcontent-%COMP%]{transform:translate(10px,50px)}.padll[_ngcontent-%COMP%]{transform:translate(80px,-110px)}.bttn1[_ngcontent-%COMP%]:hover{border-image:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);border-image-slice:1;background-color:#fff;color:#fd00db}.padl[_ngcontent-%COMP%]{margin-left:10px}.pr[_ngcontent-%COMP%]{float:right}.low[_ngcontent-%COMP%]{padding-top:20px;display:flexbox}.fnt[_ngcontent-%COMP%]{font-size:18px}.prebox[_ngcontent-%COMP%]{background-color:#fff;width:90%;height:auto;display:block;transform:translate(5%,10%);padding:20px;justify-content:center;border-radius:5px;border:2px solid #0804ff}.pimg[_ngcontent-%COMP%]{width:200px;height:200px;transform:translateY(-20px)}.cen[_ngcontent-%COMP%]{text-align:center}.preview[_ngcontent-%COMP%]{display:none;background-color:hsla(0,0%,95%,.842);overflow:auto;z-index:9}.cart-cont[_ngcontent-%COMP%], .preview[_ngcontent-%COMP%]{width:100%;height:100%;position:fixed}.cart-cont[_ngcontent-%COMP%]{background-color:#f7f7f7;z-index:7;transform:translateY(110%);overflow:hidden;overflow-y:scroll;right:0;transition:.5s}.close[_ngcontent-%COMP%]{color:#aaa;position:absolute;font-size:28px;font-weight:700;margin-bottom:40px;padding-right:20px;z-index:6;float:left;padding-top:20px;padding-left:20px}.in[_ngcontent-%COMP%]{float:right;padding-top:0;padding-right:5px}.cart-card[_ngcontent-%COMP%], .in[_ngcontent-%COMP%]{position:relative}.cart-card[_ngcontent-%COMP%]{z-index:1;width:300px;height:170px;display:inline-block;border:3px solid blue;background-color:#ececec;margin-top:60px;margin-left:30px;margin-right:40px}.cart-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;position:relative;transform:translate(10px,10px)}.cn[_ngcontent-%COMP%]{text-align:center;margin-top:20px;font-family:producthead}.empty[_ngcontent-%COMP%]{z-index:0;margin-top:30%;position:absolute;margin-left:35%;font-weight:900;color:#a8a8a8;font-size:30px}.bttn[_ngcontent-%COMP%]{background-color:#fff;width:80px;height:40px;overflow:hidden;border:2px solid;border-image:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);border-image-slice:1;margin-top:-45%;margin-left:170px;transition:.5s;outline:none}.bttn[_ngcontent-%COMP%]:hover{border:2px solid #fffcfc}.bttn-txt[_ngcontent-%COMP%]{background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);-webkit-background-clip:text;-webkit-text-fill-color:#0000;position:absolute;font-size:20px;font-weight:600;transform:translate(-20px,-240px);font-style:italic}.bttn[_ngcontent-%COMP%]:hover   .bttn-txt[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#eee,#eee);-webkit-background-clip:text;-webkit-text-fill-color:#0000}.bttn-alig[_ngcontent-%COMP%]{margin-top:50px}.bttn-left[_ngcontent-%COMP%]{position:relative;border:none;width:130px;height:120px;background:#f509ec;background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);transform:translate(-200px);transition:.5s}.bttn[_ngcontent-%COMP%]:hover   .bttn-left[_ngcontent-%COMP%]{transform:translate(-85px,-10px)}.bttn-right[_ngcontent-%COMP%]{position:relative;border:none;width:130px;height:120px;transform:translate(160px,-150px);background:#f509ec;background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);transition:.5s}.bttn[_ngcontent-%COMP%]:hover   .bttn-right[_ngcontent-%COMP%]{transform:translate(45px,-150px)}.bttn-alig[_ngcontent-%COMP%]{margin-left:30%}.cart-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:-150px;margin-left:190px;font-size:30px}"]}),t})();function lb(t,e){1&t&&(r.TgZ(0,"a",18),r._uU(1,"Login"),r.qZA())}function hb(t,e){1&t&&(r.TgZ(0,"a",19),r._uU(1,"Signup"),r.qZA())}function db(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"a",17),r.NdJ("click",function(){return r.CHM(t),r.oxw().openpro()}),r._uU(1,"Profile"),r.qZA()}}function fb(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"a",20),r.NdJ("click",function(){return r.CHM(t),r.oxw().logout()}),r._uU(1,"Logout"),r.qZA()}}function pb(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"a",17),r.NdJ("click",function(){return r.CHM(t),r.oxw().openorder()}),r._uU(1,"Orders"),r.qZA()}}let gb=(()=>{class t{constructor(t,e){this._cartsService=t,this.firebaseSerivce=e,this.isLogout=new r.vpe,this.admin=!1,this.isSignedIn=!1}ngOnInit(){this.isSignedIn=null!==localStorage.getItem("user"),this.firebaseSerivce.getUsers().subscribe(t=>{this.orderarray=t.map(t=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(e=>{t.payload.val()[0].emailadd===(null==e?void 0:e.email)&&(this.email=""+t.payload.val()[0].emailadd)})})})}viewdetails(){this.firebaseSerivce.getUsers().subscribe(t=>{this.orderarray=t.map(t=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(e=>{if(console.log(t.payload.val()[0].emailadd,null==e?void 0:e.email),t.payload.val()[0].emailadd===(null==e?void 0:e.email)){var n=document.getElementById("name");null==n||n.setAttribute("value",t.payload.val()[0].username),null==(n=document.getElementById("emailid"))||n.setAttribute("value",t.payload.val()[0].emailadd),null==(n=document.getElementById("phone"))||n.setAttribute("value",t.payload.val()[0].mobileno),null==(n=document.getElementById("address"))||n.setAttribute("value",t.payload.val()[0].address),console.log(t.payload.val()[0].address,t.payload.val()[0].mobileno,t.payload.val()[0].username)}})})})}openpro(){var t=document.getElementById("pro");null==t||t.setAttribute("style","display:grid;"),this.viewdetails()}opencart(){var t=document.getElementById("cart");null==t||t.setAttribute("style","transform:translateX(0%);"),this._cartsService.getcartitems(String(this.email))}openorder(){var t=document.getElementById("order");null==t||t.setAttribute("style","transform:translateY(0%);")}logout(){this.firebaseSerivce.logout(),this.isLogout.emit(),console.log("logged out")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(lo),r.Y36(X_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-head"]],outputs:{isLogout:"isLogout"},decls:30,vars:5,consts:[[1,"navbar","navbar-expand-lg","height","bcolor"],["src","assets/img/logof.png","alt","bm",1,"logo"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-light","navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","ml-auto","marr"],[1,"nav-item"],["routerLink","/","id","home","href","#",1,"nav-link","hovr","fontt","space","grad","centr"],["routerLink","/about","href","about",1,"nav-link","hovr","fontt","space","grad","centr"],["routerLink","/products","id","asbestos","href","products",1,"nav-link","hovr","fontt","space","grad","centr"],[1,"dropdown"],["href","#","role","button","id","dropdownMenuLink","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle","hovr","fontt","space","grad","centr"],["aria-labelledby","dropdownMenuLink",1,"dropdown-menu"],["class","dropdown-item","routerLink","/login","href","login",4,"ngIf"],["class","dropdown-item","routerLink","/signup","href","signup",4,"ngIf"],["class","dropdown-item",3,"click",4,"ngIf"],["class","dropdown-item","routerLink","/login","href","login",3,"click",4,"ngIf"],[1,"dropdown-item",3,"click"],["routerLink","/login","href","login",1,"dropdown-item"],["routerLink","/signup","href","signup",1,"dropdown-item"],["routerLink","/login","href","login",1,"dropdown-item",3,"click"]],template:function(t,e){1&t&&(r.TgZ(0,"nav",0),r._UZ(1,"img",1),r.TgZ(2,"button",2),r._UZ(3,"span",3),r.qZA(),r.TgZ(4,"div",4),r.TgZ(5,"ul",5),r.TgZ(6,"li",6),r.TgZ(7,"a",7),r._uU(8,"Home"),r.qZA(),r.qZA(),r.TgZ(9,"li",6),r.TgZ(10,"a",8),r._uU(11,"About"),r.qZA(),r.qZA(),r.TgZ(12,"li",6),r.TgZ(13,"a",9),r._uU(14,"Asbestos"),r.qZA(),r.qZA(),r.TgZ(15,"li",6),r.TgZ(16,"div",10),r.TgZ(17,"a",11),r._uU(18,"More"),r.qZA(),r.TgZ(19,"div",12),r.YNc(20,lb,2,0,"a",13),r.YNc(21,hb,2,0,"a",14),r.YNc(22,db,2,0,"a",15),r.YNc(23,fb,2,0,"a",16),r.YNc(24,pb,2,0,"a",15),r.TgZ(25,"a",17),r.NdJ("click",function(){return e.opencart()}),r._uU(26,"Cart"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r._UZ(27,"app-profile"),r._UZ(28,"app-cart"),r._UZ(29,"app-orders")),2&t&&(r.xp6(20),r.Q6J("ngIf",!e.isSignedIn),r.xp6(1),r.Q6J("ngIf",!e.isSignedIn),r.xp6(1),r.Q6J("ngIf",e.isSignedIn),r.xp6(1),r.Q6J("ngIf",e.isSignedIn),r.xp6(1),r.Q6J("ngIf",e.isSignedIn))},directives:[ti,P,tb,ob,cb],styles:["@font-face{font-family:headfont;src:url(https://selva1806.github.io/web/assets/font/headfont.ttf)}@keyframes fade-in{0%{transform:scaleY(0)}to{transform:scaleY(1)}}.centr[_ngcontent-%COMP%]{text-align:center}.navbar[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px;box-shadow:0 5px 20px #0003}.logo[_ngcontent-%COMP%]{width:200px;height:40px;position:sticky}.grad[_ngcontent-%COMP%]{background:#0079ff;background:linear-gradient(153deg,#0079ff 1%,#f509ec 94%);-webkit-background-clip:text;-moz-background-clip:text;-webkit-text-fill-color:#0000;-moz-text-fill-color:#0000}.height[_ngcontent-%COMP%]{top:0;position:fixed;z-index:5;width:100%}.space[_ngcontent-%COMP%]{margin-left:30px}.marr[_ngcontent-%COMP%]{margin-right:60px}.dropdown-menu.show[_ngcontent-%COMP%]{animation:fade-in .5s ease-out}.fontt[_ngcontent-%COMP%]{font-family:headfont;font-style:italic;font-weight:800}.fontt[_ngcontent-%COMP%], .hovr[_ngcontent-%COMP%]{font-size:20px}.hovr[_ngcontent-%COMP%]{transform:scale(1);transition:transform .5s}.hovr[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.bcolor[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.945)}.dropdown-toggle[_ngcontent-%COMP%]{color:#c8ff00}"]}),t})(),mb=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-reachinfo"]],decls:30,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"col-sm"],[1,"mar"],[1,"psp"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-telephone"],["d","M3.654 1.328a.678.678 0 0 0-1.015-.063L1.605 2.3c-.483.484-.661 1.169-.45 1.77a17.568 17.568 0 0 0 4.168 6.608 17.569 17.569 0 0 0 6.608 4.168c.601.211 1.286.033 1.77-.45l1.034-1.034a.678.678 0 0 0-.063-1.015l-2.307-1.794a.678.678 0 0 0-.58-.122l-2.19.547a1.745 1.745 0 0 1-1.657-.459L5.482 8.062a1.745 1.745 0 0 1-.46-1.657l.548-2.19a.678.678 0 0 0-.122-.58L3.654 1.328zM1.884.511a1.745 1.745 0 0 1 2.612.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-envelope"],["d","M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4zm2-1a1 1 0 0 0-1 1v.217l7 4.2 7-4.2V4a1 1 0 0 0-1-1H2zm13 2.383-4.758 2.855L15 11.114v-5.73zm-.034 6.878L9.271 8.82 8 9.583 6.728 8.82l-5.694 3.44A1 1 0 0 0 2 13h12a1 1 0 0 0 .966-.739zM1 11.114l4.758-2.876L1 5.383v5.73z"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h1",3),r._uU(4,"Address:"),r.qZA(),r.TgZ(5,"p",4),r._uU(6,"165/4B,Karpagam Nagar,"),r._UZ(7,"br"),r._uU(8," Manikanatham Village, "),r._UZ(9,"br"),r._uU(10,"Paramathy(Po),P.velur(Tk),"),r._UZ(11,"br"),r._uU(12,"Namakkal(Dt)-637207"),r.qZA(),r.qZA(),r.TgZ(13,"div",2),r.TgZ(14,"h1",3),r._uU(15,"Contact:"),r.qZA(),r.TgZ(16,"p",4),r.O4$(),r.TgZ(17,"svg",5),r._UZ(18,"path",6),r.qZA(),r._uU(19," 09003966166"),r.qZA(),r.kcU(),r.TgZ(20,"p",4),r.O4$(),r.TgZ(21,"svg",5),r._UZ(22,"path",6),r.qZA(),r._uU(23," 09585266166"),r.qZA(),r.kcU(),r.TgZ(24,"h1"),r._uU(25,"E-mail:"),r.qZA(),r.TgZ(26,"p",4),r.O4$(),r.TgZ(27,"svg",7),r._UZ(28,"path",8),r.qZA(),r._uU(29," sribalamuruganpaper@gmail.com"),r.qZA(),r.qZA(),r.qZA(),r.qZA())},styles:[".mar[_ngcontent-%COMP%]{margin-top:20%}.psp[_ngcontent-%COMP%]{padding-left:20%;font-size:25px;word-wrap:break-word}.psp[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{color:#fff}.container-fluid[_ngcontent-%COMP%]{background-color:#2d4af1;padding-bottom:150px}"]}),t})(),yb=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-location"]],decls:3,vars:0,consts:[[1,"loc-head"],["src","https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3914.4601789391613!2d77.9999018137716!3d11.153523955172139!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMTHCsDA5JzEyLjciTiA3OMKwMDAnMDcuNSJF!5e0!3m2!1sen!2sin!4v1627890584492!5m2!1sen!2sin","allowfullscreen","","loading","lazy",1,"allign",2,"border","0"]],template:function(t,e){1&t&&(r.TgZ(0,"p",0),r._uU(1,"Location"),r.qZA(),r._UZ(2,"iframe",1))},styles:["@font-face{font-family:titlefont;src:url(https://selva1806.github.io/web/assets/font/titlefont.ttf)}.allign[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:100%;height:600px;padding:10px}.loc-head[_ngcontent-%COMP%]{margin-top:20px;text-align:center;font-size:4rem;font-weight:600;font-family:titlefont}"]}),t})(),vb=(()=>{class t{constructor(t,e){this._cartsService=t,this.router=e}ngOnInit(){}contactform(t,e,n,r,i){0===t.length||0===e.length||0===n.length||0===r.length||0===i.length?alert("please fill all the fields"):(this.contact=[{user:t,email:e,mobile:n,subject:r,message:i}],this._cartsService.contactAdd(this.contact),this.router.navigate(["/"]))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(lo),r.Y36(Jr))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-contact"]],decls:35,vars:0,consts:[[1,"fl"],["id","contact",1,"formspace"],[1,"contact"],[1,"fadeintop",2,"padding-bottom","10px","text-align","center"],[1,"form-row"],[1,"form-group","col-md-6"],["type","text","minlength","4","required","","id","user","placeholder","Name","data-aos","fade-up","data-aos-duration","4000","data-aos-delay","150",1,"form-control"],["user",""],["id","qu-usr"],["type","email","required","","id","qu-email","aria-describedby","emailHelp","placeholder","Enter email","data-aos","fade-up","data-aos-duration","4000","data-aos-delay","150",1,"form-control"],["email",""],["id","qu-em"],["type","text","minlength","10","maxlength","10","required","","id","mobile","placeholder","Mobile","data-aos","fade-up","data-aos-duration","4000","data-aos-delay","150",1,"form-control"],["mobile",""],["id","qu-numcheck"],["type","text","minlength","4","required","","id","subject","placeholder","Subject","data-aos","fade-up","data-aos-duration","4000","data-aos-delay","150",1,"form-control"],["subject",""],["id","subcheck"],[1,"form-group"],["id","message","minlength","5","required","","placeholder","Enter your Message here","rows","3","data-aos","fade-up","data-aos-duration","4000","data-aos-delay","150",1,"form-control","add"],["message",""],["id","qu-msgcheck"],["data-aos","fade-up","data-aos-duration","4000","data-aos-delay","150",1,"form-group"],[1,"bttn",3,"click"],[1,"bttn-left"],[1,"bttn-right"],[1,"bttn-txt"],["src","assets/img/emaill.svg","alt","email",1,"emailpng"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"h1",3),r._uU(4,"Contact Us"),r.qZA(),r.TgZ(5,"div",4),r.TgZ(6,"div",5),r._UZ(7,"input",6,7),r._UZ(9,"p",8),r.qZA(),r.TgZ(10,"div",5),r._UZ(11,"input",9,10),r._UZ(13,"p",11),r.qZA(),r.qZA(),r.TgZ(14,"div",4),r.TgZ(15,"div",5),r._UZ(16,"input",12,13),r._UZ(18,"p",14),r.qZA(),r.TgZ(19,"div",5),r._UZ(20,"input",15,16),r._UZ(22,"p",17),r.qZA(),r.qZA(),r.TgZ(23,"div",18),r._UZ(24,"textarea",19,20),r._UZ(26,"p",21),r.qZA(),r.TgZ(27,"div",22),r.TgZ(28,"button",23),r.NdJ("click",function(){r.CHM(t);const n=r.MAs(8),i=r.MAs(12),o=r.MAs(17),s=r.MAs(21),a=r.MAs(25);return e.contactform(n.value,i.value,o.value,s.value,a.value)}),r._UZ(29,"div",24),r._UZ(30,"div",25),r.TgZ(31,"span",26),r._uU(32,"Send"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(33,"div"),r._UZ(34,"img",27),r.qZA(),r.qZA()}},styles:["@font-face{font-family:titlefont;src:url(https://selva1806.github.io/web/assets/font/titlefont.ttf)}@keyframes flot{0%{transform:translateY(0)}50%{transform:translateY(10%)}to{transform:translateY(0)}}.formspace[_ngcontent-%COMP%]{width:100%;background-color:#fffefe;padding-top:50px}.form-control[_ngcontent-%COMP%]{height:65px;padding-left:10px;font-size:15px;background-color:#ebebeb}.ls[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:500px}.form-control[_ngcontent-%COMP%]:focus{border:2px solid #ebebeb;height:65px;padding-left:10px;font-size:15px;background-color:#ebebeb;outline:none}.add[_ngcontent-%COMP%]:focus, .form-control.add[_ngcontent-%COMP%]{height:130px}.emailpng[_ngcontent-%COMP%]{width:100%;height:50%;margin-top:30%;animation:flot 10s infinite}.fl[_ngcontent-%COMP%]{display:flex;background-color:#fff}.contact[_ngcontent-%COMP%]{width:50%;margin-left:auto;margin-right:auto}.contact[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{position:relative;z-index:1;font-family:titlefont;font-weight:200;font-size:50px;color:#2c2c2c}.bttn[_ngcontent-%COMP%]{background-color:#fff;width:160px;height:70px;overflow:hidden;border:2px solid;border-image:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);border-image-slice:1;transition:.5s;outline:none}.bttn[_ngcontent-%COMP%]:hover{border:2px solid #fffcfc}.bttn-txt[_ngcontent-%COMP%]{background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);-webkit-background-clip:text;-webkit-text-fill-color:#0000;position:absolute;font-size:25px;font-weight:600;transform:translate(-25px,-230px);font-style:italic}.bttn[_ngcontent-%COMP%]:hover   .bttn-txt[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#eee,#eee);-webkit-background-clip:text;-webkit-text-fill-color:#0000}.bttn-alig[_ngcontent-%COMP%]{margin-top:50px}.bttn-left[_ngcontent-%COMP%]{position:relative;border:none;width:130px;height:120px;background:#f509ec;background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);transform:translate(-200px);transition:.5s}.bttn[_ngcontent-%COMP%]:hover   .bttn-left[_ngcontent-%COMP%]{transform:translate(-55px,-10px)}.bttn-right[_ngcontent-%COMP%]{position:relative;border:none;width:130px;height:120px;transform:translate(160px,-150px);background:#f509ec;background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);transition:.5s}.bttn[_ngcontent-%COMP%]:hover   .bttn-right[_ngcontent-%COMP%]{transform:translate(75px,-150px)}.bttn-alig[_ngcontent-%COMP%]{margin-left:30%}.rand4[_ngcontent-%COMP%]{transform:translate(-150px,-100px)}.rand4[_ngcontent-%COMP%], .rand5[_ngcontent-%COMP%]{width:300px;height:300px;position:absolute}.rand5[_ngcontent-%COMP%]{transform:translate(800px,-300px)}@media only screen and (max-width: 767px){.form-control[_ngcontent-%COMP%]{width:300px;margin-left:auto;margin-right:auto}}@media only screen and (max-width: 448px){.form-control[_ngcontent-%COMP%]{width:300px;margin-left:-60px;margin-right:10px}.rand5[_ngcontent-%COMP%]{display:none}}@media only screen  and (max-width:988px){.fl[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse}.emailpng[_ngcontent-%COMP%]{float:right;width:80%;margin-top:100px;padding-bottom:40px}}"]}),t})(),_b=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-footer"]],decls:30,vars:0,consts:[[1,"logo"],[1,"logo-h"],["src","assets/img/logof.png","alt","bm",1,"logo-f"],[1,"f-row-1"],["routerLink","/about"],["routerLink","/products"],[1,"cpr"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"p",1),r._UZ(2,"img",2),r.qZA(),r.TgZ(3,"ul",3),r.TgZ(4,"li"),r._uU(5,"Company"),r.qZA(),r.TgZ(6,"li"),r.TgZ(7,"a",4),r._uU(8,"About"),r.qZA(),r.qZA(),r.TgZ(9,"li"),r.TgZ(10,"a",4),r._uU(11,"Contact"),r.qZA(),r.qZA(),r.TgZ(12,"li"),r.TgZ(13,"a",5),r._uU(14,"Asbestos"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(15,"ul",3),r.TgZ(16,"li"),r._uU(17,"Products"),r.qZA(),r.TgZ(18,"li"),r.TgZ(19,"a",5),r._uU(20,"Manufacture"),r.qZA(),r.qZA(),r.TgZ(21,"li"),r.TgZ(22,"a",5),r._uU(23," Material"),r.qZA(),r.qZA(),r.TgZ(24,"li"),r.TgZ(25,"a",5),r._uU(26," Price"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r._UZ(27,"hr"),r.TgZ(28,"p",6),r._uU(29,"\xa9 Copyright 2021 by Bmsheets"),r.qZA())},directives:[ti],styles:["@font-face{font-family:headfont;src:url(https://selva1806.github.io/web/assets/font/headfont.ttf)}*[_ngcontent-%COMP%]{background-color:#f7f7f7}ul[_ngcontent-%COMP%]   .collr[_ngcontent-%COMP%]{background-color:red;width:120px;height:120px;padding:10px}.cpr[_ngcontent-%COMP%]{color:#7e7e7e;text-align:center}.logo[_ngcontent-%COMP%]{display:flex;height:400px}.logo-f[_ngcontent-%COMP%]{width:200px;height:40px}.logo-h[_ngcontent-%COMP%]{font-size:30px;margin-left:20%;padding-top:10%;background-color:initial;font-family:headfont;font-style:italic;font-weight:800;background:#0079ff;background:linear-gradient(153deg,#0079ff 1%,#f509ec 94%);-webkit-background-clip:text;-moz-background-clip:text;-webkit-text-fill-color:#0000;-moz-text-fill-color:#0000}.f-row-1[_ngcontent-%COMP%]{background-color:initial;padding-top:10%;padding-left:20%}.f-row-1[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;margin-top:20px;background-color:initial;font-family:headfont;font-style:italic;font-weight:800;font-size:1.2rem}.f-row-1[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{background:#0079ff;background:linear-gradient(153deg,#0079ff 1%,#f509ec 94%);-webkit-background-clip:text;-moz-background-clip:text;-webkit-text-fill-color:#0000;-moz-text-fill-color:#0000}a[_ngcontent-%COMP%]{font-size:1rem}a[_ngcontent-%COMP%]:hover{text-decoration:none;background:#0079ff;background:linear-gradient(153deg,#48ff00 1%,#f509ec 94%);-webkit-background-clip:text;-moz-background-clip:text;-webkit-text-fill-color:#0000;-moz-text-fill-color:#0000}@media screen  and (max-width:768px){.logo[_ngcontent-%COMP%]{display:block;height:800px}}"]}),t})(),bb=(()=>{class t{constructor(){}ngOnInit(){window.scrollTo(0,0)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-about"]],decls:20,vars:0,consts:[[1,"body"],[1,"rel","d-block","w-100","height",2,"background-image","linear-gradient(20deg, rgba(0, 0, 0, .3) 0%, rgba(0, 0, 0, 0.6) 51%, rgba(0, 0, 0, 0.3) 75%), url('assets/img/aimg.jpg')","background-size","cover","background-position","center center"],[1,"carocard","jump"],[1,"car-title"],[1,"boxarea"]],template:function(t,e){1&t&&(r._UZ(0,"app-head"),r.TgZ(1,"div",0),r._UZ(2,"div",1),r.TgZ(3,"div",2),r.TgZ(4,"span",3),r._uU(5,"About Us"),r.qZA(),r.qZA(),r._UZ(6,"app-reachinfo"),r._UZ(7,"app-location"),r._UZ(8,"app-contact"),r._UZ(9,"app-footer"),r.TgZ(10,"ul",4),r._UZ(11,"li"),r._UZ(12,"li"),r._UZ(13,"li"),r._UZ(14,"li"),r._UZ(15,"li"),r._UZ(16,"li"),r._UZ(17,"li"),r._UZ(18,"li"),r._UZ(19,"li"),r.qZA(),r.qZA())},directives:[gb,mb,yb,vb,_b],styles:[".body[_ngcontent-%COMP%]{overflow:hidden;background-color:#f7f7f7}.boxarea[_ngcontent-%COMP%]{position:relative;z-index:999;top:0;left:0;width:100%;height:100%}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:absolute;width:25px;height:25px;list-style:none;display:block;background:#00000008;animation:animate 20s linear infinite}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{left:20%;width:80px;height:80px;animation-delay:0s;animation-duration:10s;top:-1400px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){left:40%;width:120px;height:120px;animation-delay:2s;animation-duration:10s;top:-1480px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){left:10%;width:90px;height:90px;animation-delay:1s;animation-duration:20s;top:-1470px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){left:70%;width:50px;height:50px;animation-delay:0s;animation-duration:14s;top:-1400px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){left:30%;width:80px;height:80px;animation-delay:0s;animation-duration:8s;top:-750px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){left:60%;width:120px;height:120px;animation-delay:2s;animation-duration:12s;top:-740px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7){left:20%;width:90px;height:90px;animation-delay:1s;animation-duration:20s;top:-700px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(8){left:80%;width:50px;height:50px;animation-delay:0s;animation-duration:17s;top:-700px}@keyframes animate{0%{transform:translateY(0) rotate(0deg);opacity:1}to{transform:translateY(-800px) rotate(1turn);opacity:1}}.height[_ngcontent-%COMP%]{height:700px}@keyframes popup1{0%{transform:translateY(0)}50%{transform:translateY(10px)}to{transform:translateY(0)}}@keyframes popup{0%{opacity:0;transform:translateY(150px)}to{opacity:1;transform:translateY(0)}}.carocard[_ngcontent-%COMP%]{display:grid;justify-content:center;top:30%;left:10%;width:80%;height:inherit;position:absolute;opacity:0;animation:popup 1s infinite;animation-duration:8s}.jump[_ngcontent-%COMP%]{opacity:1;animation:popup1 2s infinite;animation-duration:2s}.carocard[_ngcontent-%COMP%]   .car-title[_ngcontent-%COMP%]{font-size:50px;font-weight:600;font-style:italic;color:#fff;justify-content:center}@font-face{font-family:titlefont;src:url(/src/assets/font/titlefont.ttf)}"]}),t})();function wb(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",3),r.TgZ(1,"span",4),r.NdJ("click",function(e){const n=r.CHM(t).$implicit;return r.oxw().closeorder(e,n.orid)}),r._uU(2,"\xd7"),r.qZA(),r._UZ(3,"img",5),r.TgZ(4,"ul",6),r.TgZ(5,"li"),r._uU(6),r.qZA(),r.TgZ(7,"li"),r._uU(8),r.qZA(),r.TgZ(9,"li"),r._uU(10),r.qZA(),r.TgZ(11,"li"),r._uU(12),r.qZA(),r.qZA(),r.TgZ(13,"ul",6),r.TgZ(14,"li"),r._uU(15),r.qZA(),r.TgZ(16,"li"),r._uU(17),r.qZA(),r.TgZ(18,"li"),r._uU(19),r.qZA(),r.TgZ(20,"li"),r._uU(21),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit;r.xp6(3),r.s9C("src",t.image,r.LSH),r.xp6(3),r.hij("Name: ",t.uname,""),r.xp6(2),r.hij("Mobile no: ",t.mobile,""),r.xp6(2),r.hij("Email: ",t.email,""),r.xp6(2),r.hij("Address: ",t.address,""),r.xp6(3),r.hij("Item name: ",t.itemname,""),r.xp6(2),r.hij("Item quantity : ",t.quantity,""),r.xp6(2),r.hij("Price : \u20b9",t.price,""),r.xp6(2),r.hij("Total : \u20b9",t.quantity*t.price,"")}}let Cb=(()=>{class t{constructor(t,e,n){this._cartsService=t,this.router=e,this.firebaseSerivce=n,this.displayarray=[],this.count=0}ngOnInit(){this.firebaseSerivce.firebaseAuth.onAuthStateChanged(t=>{"ss@gmail.com"!==(null==t?void 0:t.email)&&this.router.navigate(["/login"])}),this.firebaseSerivce.getOrders().subscribe(t=>{this.orderarray=t.map(t=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(e=>{console.log(t.payload.val()[0].emailadd,null==e?void 0:e.email),this.displayarray.push({orid:t.payload.val()[0].orderid,uname:t.payload.val()[0].username,image:t.payload.val()[0].image,email:t.payload.val()[0].email,address:t.payload.val()[0].address,mobile:t.payload.val()[0].mobileno,price:t.payload.val()[0].price,itemname:t.payload.val()[0].name,quantity:t.payload.val()[0].quantity}),this.count+=1,console.log(t.payload.val()[0].address,t.payload.val()[0].mobileno,t.payload.val()[0].username)})})})}closeorder(t,e){t.target.parentElement.remove(),this.firebaseSerivce.getOrders().subscribe(t=>{this.orderarray=t.map(t=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(n=>{console.log(t.payload.val()[0].emailadd,null==n?void 0:n.email),e===t.payload.val()[0].orderid&&(this._cartsService.removeOrders(String(t.key)),this.count-=1,location.reload())})})})}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(lo),r.Y36(Jr),r.Y36(X_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-admin"]],decls:6,vars:2,consts:[[1,"order-cont"],[1,"title"],["class","order-card",4,"ngFor","ngForOf"],[1,"order-card"],[1,"close",3,"click"],["alt","",1,"card-img",3,"src"],[1,"card-det"]],template:function(t,e){1&t&&(r._UZ(0,"app-head"),r.TgZ(1,"div",0),r.TgZ(2,"h1",1),r._uU(3),r.qZA(),r.YNc(4,wb,22,9,"div",2),r.qZA(),r._UZ(5,"app-footer")),2&t&&(r.xp6(3),r.hij("Current Orders: ",e.count,""),r.xp6(1),r.Q6J("ngForOf",e.displayarray))},directives:[gb,A,_b],styles:[".order-cont[_ngcontent-%COMP%]{background-color:#f7f7f7;padding:20px;margin-top:100px;min-height:500px}.order-card[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;height:auto;background-color:#fff;border-radius:10px;border:5px solid #2f2ffc;transition:1s;margin-top:30px}.order-card[_ngcontent-%COMP%]:hover{box-shadow:20px 20px 20px hsla(0,0%,43%,.562)}.card-img[_ngcontent-%COMP%]{width:300px;height:300px;padding:10px}.card-det[_ngcontent-%COMP%]{list-style-type:none;font-size:22px;padding:40px}@media screen and (max-width:400px){.card-img[_ngcontent-%COMP%]{margin-top:-70px}}@media screen and (max-width:520px){.card-det[_ngcontent-%COMP%]{font-size:.9rem;padding-top:0}}.card-det[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px}.close[_ngcontent-%COMP%]{margin-left:10px;margin-top:10px;color:#aaa;float:right;font-size:28px;font-weight:700;margin-bottom:40px;padding-right:20px;z-index:6}.title[_ngcontent-%COMP%]{text-align:center;color:#a8a8a8;font-family:Quicksand,sans-serif;font-weight:900}"]}),t})(),xb=(()=>{class t{constructor(){}ngOnInit(){window.scrollTo(0,0)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-home"]],decls:19,vars:0,consts:[[1,"body"],[1,"boxarea"]],template:function(t,e){1&t&&(r._UZ(0,"app-head"),r.TgZ(1,"div",0),r._UZ(2,"app-homefront"),r._UZ(3,"app-homedetails2"),r._UZ(4,"app-calogin"),r._UZ(5,"app-homedetails"),r._UZ(6,"app-location"),r._UZ(7,"app-clink"),r._UZ(8,"app-footer"),r.TgZ(9,"ul",1),r._UZ(10,"li"),r._UZ(11,"li"),r._UZ(12,"li"),r._UZ(13,"li"),r._UZ(14,"li"),r._UZ(15,"li"),r._UZ(16,"li"),r._UZ(17,"li"),r._UZ(18,"li"),r.qZA(),r.qZA())},styles:[".body[_ngcontent-%COMP%]{overflow:hidden;background-color:#f7f7f7}.boxarea[_ngcontent-%COMP%]{position:relative;z-index:999;top:0;left:0;width:100%;height:100%}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:absolute;width:25px;height:25px;list-style:none;display:block;background:#00000008;animation:animate 20s linear infinite}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{left:20%;width:80px;height:80px;animation-delay:0s;animation-duration:10s;top:-1400px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(2){left:40%;width:120px;height:120px;animation-delay:2s;animation-duration:10s;top:-1480px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){left:10%;width:90px;height:90px;animation-delay:1s;animation-duration:20s;top:-1470px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(4){left:70%;width:50px;height:50px;animation-delay:0s;animation-duration:14s;top:-1400px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(5){left:30%;width:80px;height:80px;animation-delay:0s;animation-duration:8s;top:-750px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(6){left:60%;width:120px;height:120px;animation-delay:2s;animation-duration:12s;top:-740px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(7){left:20%;width:90px;height:90px;animation-delay:1s;animation-duration:20s;top:-700px}.boxarea[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(8){left:80%;width:50px;height:50px;animation-delay:0s;animation-duration:17s;top:-700px}@keyframes animate{0%{transform:translateY(0) rotate(0deg);opacity:1}to{transform:translateY(-800px) rotate(1turn);opacity:1}}.circle[_ngcontent-%COMP%]{width:300px;height:300px;border-radius:300px;transform:TranslateX(-50%);background-color:#3812c2;z-index:1;overflow:hidden}.circle[_ngcontent-%COMP%], .square[_ngcontent-%COMP%]{position:relative;opacity:.5}.square[_ngcontent-%COMP%]{width:180px;height:200px;background-color:#c21212}.right[_ngcontent-%COMP%]{float:right}"]}),t})(),Tb=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-bthome"]],decls:4,vars:0,consts:[[1,"bth"],["routerLink","/","href","#",1,"back"],["xmlns","http://www.w3.org/2000/svg","width","36","height","36","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-right-short"],["fill-rule","evenodd","d","M4 8a.5.5 0 0 1 .5-.5h5.793L8.146 5.354a.5.5 0 1 1 .708-.708l3 3a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708-.708L10.293 8.5H4.5A.5.5 0 0 1 4 8z"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"a",1),r.O4$(),r.TgZ(2,"svg",2),r._UZ(3,"path",3),r.qZA(),r.qZA(),r.qZA())},directives:[ti],styles:[".bth[_ngcontent-%COMP%]{width:100%;height:70px;background-color:#fff}.back[_ngcontent-%COMP%]{text-decoration:none;color:blue;float:left;transform:rotate(180deg);padding-bottom:10px;padding-right:20px}"]}),t})(),Sb=(()=>{class t{constructor(t,e){this.firebaseSerivce=t,this.router=e,this.isSignedIn=!1}ngOnInit(){this.isSignedIn=null!==localStorage.getItem("user"),this.firebaseSerivce.firebaseAuth.onAuthStateChanged(t=>{(null==t?void 0:t.email)&&this.router.navigate("ss@gmail.com"===(null==t?void 0:t.email)?["/admin"]:["/products"])})}resetPass(t){var e=this;return fo(function*(){0!==t.length&&t.includes("@gmail.com")?(e.firebaseSerivce.firebaseAuth.sendPasswordResetEmail(t),alert("reset link sent to "+t+" successfully")):alert("invalid email")})()}onSignin(t,e){var n=this;return fo(function*(){yield n.firebaseSerivce.signin(t,e),n.firebaseSerivce.isLoggedIn&&(n.isSignedIn=!0,console.log("logged in"))})()}handleLogout(){this.isSignedIn=!1}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(X_),r.Y36(Jr))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-login"]],decls:28,vars:0,consts:[[1,"login-container"],[1,"top-square"],[1,"bottom-square"],[1,"login-form"],["src","assets/img/loginl.jpg","alt","",1,"mob-log"],[1,"form-group","row"],["for","staticEmail",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","text","placeholder","Email",1,"login-input"],["email",""],["for","inputPassword",1,"col-sm-2","col-form-label"],["type","password","placeholder","Password",1,"login-input"],["password",""],[1,"fpass",3,"click"],[1,"bttn-login",3,"click"],[1,"createp"],["routerLink","/signup","href","signup",2,"text-decoration","none"]],template:function(t,e){if(1&t){const t=r.EpF();r._UZ(0,"app-bthome"),r.TgZ(1,"div",0),r._UZ(2,"div",1),r._UZ(3,"div",2),r.TgZ(4,"div",3),r.TgZ(5,"div"),r._UZ(6,"img",4),r.TgZ(7,"div",5),r.TgZ(8,"label",6),r._uU(9,"Email"),r.qZA(),r.TgZ(10,"div",7),r._UZ(11,"input",8,9),r.qZA(),r.qZA(),r.TgZ(13,"div",5),r.TgZ(14,"label",10),r._uU(15,"Password"),r.qZA(),r.TgZ(16,"div",7),r._UZ(17,"input",11,12),r.TgZ(19,"a",13),r.NdJ("click",function(){r.CHM(t);const n=r.MAs(12);return e.resetPass(n.value)}),r._uU(20,"forgot password?"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(21,"div",5),r.TgZ(22,"button",14),r.NdJ("click",function(){r.CHM(t);const n=r.MAs(12),i=r.MAs(18);return e.onSignin(n.value,i.value)}),r._uU(23,"Login "),r.qZA(),r.qZA(),r.TgZ(24,"p",15),r._uU(25,"Dont have an account?"),r.TgZ(26,"a",16),r._uU(27,"signup"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}},directives:[Tb,ti],styles:[".login-container[_ngcontent-%COMP%]{background:linear-gradient(355deg,red 6%,#e13232 33%,#2f00dc 65%,#00c9dc 94%);padding:150px 10px}.login-container[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]{justify-content:center;display:flex;position:relative;overflow:hidden}.login-form[_ngcontent-%COMP%]{height:500px;padding:10% 10px 10px;width:70%;background-color:#f7f7f766;border:2px solid #fff;box-shadow:8px 8px 50px #6d6d6d}.createp[_ngcontent-%COMP%]{z-index:2;position:relative;text-align:center;color:#fff}.fpass[_ngcontent-%COMP%]{text-decoration:none;float:right;color:#fff}.col-sm-10[_ngcontent-%COMP%]{padding-left:20%}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus{font-size:20px;background-color:#e6e6e6}.login-input[_ngcontent-%COMP%]{border:1px solid #acacac;border-radius:5px;height:50px;width:100%;padding-left:10%;outline:none}label[_ngcontent-%COMP%]{font-size:20px}.bttn-login[_ngcontent-%COMP%]{width:150px;height:40px;outline:none;border:none;border-radius:20px;background-color:#8a2be2;color:#fff;margin-left:auto;margin-right:auto;position:relative;transition:1s}.bttn-login[_ngcontent-%COMP%]:hover{background-color:#fff;color:#8a2be2}.top-square[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.244);transform:translate(-210%,-60%) rotate(50deg)}.bottom-square[_ngcontent-%COMP%], .top-square[_ngcontent-%COMP%]{width:300px;height:300px;position:absolute}.bottom-square[_ngcontent-%COMP%]{background-color:#fff3;transform:translate(210%,60%) rotate(50deg)}.mob-log[_ngcontent-%COMP%]{display:none}@media only screen and (max-width:562px){.mob-log[_ngcontent-%COMP%]{width:300px;height:300px;display:flex;margin-top:0}.fpass[_ngcontent-%COMP%]{color:blue}.login-form[_ngcontent-%COMP%]{margin-top:0;background-color:#fff;box-shadow:none;width:100%;border-radius:20px;height:auto}.createp[_ngcontent-%COMP%]{color:#000}.login-container[_ngcontent-%COMP%]{padding-bottom:10px}.login-form[_ngcontent-%COMP%]:hover{box-shadow:8px 8px 50px #fff0}label[_ngcontent-%COMP%]{display:none}.login-input[_ngcontent-%COMP%], .login-input[_ngcontent-%COMP%]:focus{margin-left:-2rem;margin-right:auto;border-top:none;border-left:none;border-right:none;background-color:inherit;font-size:15px}}"]}),t})(),Eb=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-productdis"]],decls:13,vars:0,consts:[["data-aos","fade-up","data-aos-duration","4000","data-aos-delay","150",1,"container","alig"],["data-toggle","collapse","data-target","#dis","aria-expanded","false","id","disc","aria-controls","dis",1,"but-card"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-chevron-down","pls"],["fill-rule","evenodd","d","M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"],[1,"row"],["id","dis","aria-labelledby","disc",1,"col-sm-12","col-lg-7","collapse"],["src","assets/img/rand1.png","alt","rand1",1,"rand1"],[1,"ptag"],[1,"col","col-lg-5",2,"overflow","hidden"],[1,"world-image"],["src","assets/img/rand2.png","alt","rand2",1,"rand1"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"button",1),r._uU(2," Want to know how it is made?"),r.O4$(),r.TgZ(3,"svg",2),r._UZ(4,"path",3),r.qZA(),r.qZA(),r.kcU(),r.TgZ(5,"div",4),r.TgZ(6,"div",5),r._UZ(7,"img",6),r.TgZ(8,"p",7),r._uU(9,"The process starts by shreding the waste clothes into small pieces. Then these are weighed into 25 kgs a bag. Now the clothes are put into a grinding machine. Sufficient amount of water is added to the clothes. After hours of grinding, the products begins to resemble like the end product. Now they are in a semi solid state and blue in colour. At the net stage of the process the product is colloected and stored in a tank with the use of a pipe. In the tank, more water is added and constantly steered using large blades. By now the product is in a liquid state. Using pipes the product is collected and feed into a pressing machine. This machine applies pressure and divides the final product from the water. The waste water is collected and recycled to be used again. Now the CRP (cotton rag pulp) sheets are dried in the sun to give us the final product. Now the sheets can be loaded into trucks and delivered to you. "),r.qZA(),r.qZA(),r.TgZ(10,"div",8),r._UZ(11,"div",9),r.qZA(),r._UZ(12,"img",10),r.qZA(),r.qZA())},styles:[".world-image[_ngcontent-%COMP%]{background-image:url(prod.07270336109c91c35237.png);width:500px;height:100%;background-size:cover;background-position:50%;margin-left:auto;margin-top:5%;animation:updown 3s infinite}.but-card[_ngcontent-%COMP%]{width:100%;height:60px;border:none;outline:none;border-radius:5px;transition:.5s ease-in;font-size:17px;color:grey;font-style:italic;font-weight:700}.but-card[_ngcontent-%COMP%]:hover{color:#f871e2}.pls[_ngcontent-%COMP%]{z-index:2;float:right;margin-right:10px;margin-top:5px;transform:rotate(0deg);transition:.5s}.but-card[aria-expanded=true][_ngcontent-%COMP%]   .pls[_ngcontent-%COMP%]{transform:rotate(180deg)}.rand1[_ngcontent-%COMP%]{position:absolute;transform:translate(-200px,-80px)}.rand1[_ngcontent-%COMP%], .rand3[_ngcontent-%COMP%]{width:300px;height:300px}.rand3[_ngcontent-%COMP%]{transform:translate(400px,-100px)}@keyframes rotat{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes updown{0%{transform:translateY(0)}50%{transform:translateY(20px)}to{transform:translateY(0)}}.ptag[_ngcontent-%COMP%]{font-size:16px;position:relative;z-index:1;font-family:paratext;animation:updown 6s infinite}.alig[_ngcontent-%COMP%]{padding-top:110px}.dot[_ngcontent-%COMP%]{background:url(https://www.visaka.co/assets/website/img/dot.png);width:50%;height:100%;z-index:-1;position:absolute;left:0;top:0}@media screen and (max-width: 992px){.dot[_ngcontent-%COMP%], .world-image[_ngcontent-%COMP%]{width:0;height:0}.rand3[_ngcontent-%COMP%]{transform:translate(200px,-100px)}}"]}),t})();function Ib(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",5),r._UZ(1,"img",6),r.TgZ(2,"button",7),r.NdJ("click",function(e){return r.CHM(t),r.oxw().fullopen(e)}),r._uU(3,"view"),r.qZA(),r.TgZ(4,"div",8),r.TgZ(5,"div",9),r.TgZ(6,"span",10),r.NdJ("click",function(e){return r.CHM(t),r.oxw().fullclose(e)}),r._uU(7,"\xd7"),r.qZA(),r.qZA(),r.TgZ(8,"div",11),r.TgZ(9,"div",12),r.TgZ(10,"span",13),r.NdJ("click",function(e){return r.CHM(t),r.oxw().fullclose(e)}),r._uU(11,"\xd7"),r.qZA(),r.TgZ(12,"h1",14),r._uU(13,"Preview"),r.qZA(),r._UZ(14,"hr"),r.TgZ(15,"div",15),r.TgZ(16,"div",16),r._UZ(17,"img",17),r.qZA(),r.TgZ(18,"div",16),r.TgZ(19,"p",18),r.TgZ(20,"label",19),r._uU(21,"Name :\xa0"),r.qZA(),r._uU(22),r.qZA(),r.TgZ(23,"p",20),r.TgZ(24,"label",19),r._uU(25,"Address :\xa0"),r.qZA(),r._uU(26),r.qZA(),r.TgZ(27,"p",21),r.TgZ(28,"label",19),r._uU(29,"Mobile :\xa0"),r.qZA(),r._uU(30),r.qZA(),r.TgZ(31,"p",22),r.TgZ(32,"label",19),r._uU(33,"Email :\xa0"),r.qZA(),r._uU(34),r.qZA(),r.qZA(),r.TgZ(35,"div",16),r.TgZ(36,"p",23),r.TgZ(37,"label",19),r._uU(38," Product:\xa0"),r.qZA(),r._uU(39),r.qZA(),r.TgZ(40,"p",23),r.TgZ(41,"label",19),r._uU(42,"Quantity:\xa0"),r.qZA(),r._uU(43),r.qZA(),r.TgZ(44,"p",23),r.TgZ(45,"label",19),r._uU(46,"Price:\xa0"),r.qZA(),r._uU(47),r.qZA(),r.TgZ(48,"p",24),r._uU(49),r.qZA(),r.TgZ(50,"p",23),r.TgZ(51,"label",19),r._uU(52,"Payment Mode:\xa0"),r.qZA(),r._uU(53,"COD"),r.qZA(),r.qZA(),r.qZA(),r._UZ(54,"br"),r._UZ(55,"br"),r._UZ(56,"hr"),r.TgZ(57,"button",25),r.NdJ("click",function(){const e=r.CHM(t).$implicit,n=r.MAs(77);return r.oxw().addtodb(e.name,e.cost,e.imag,n.value)}),r._uU(58," Buy"),r.qZA(),r._UZ(59,"br"),r._UZ(60,"br"),r._UZ(61,"br"),r._UZ(62,"br"),r._UZ(63,"br"),r.qZA(),r.qZA(),r._UZ(64,"hr"),r.TgZ(65,"div",26),r.TgZ(66,"div",16),r._UZ(67,"img",27),r.qZA(),r.TgZ(68,"div",16),r.TgZ(69,"h1"),r._uU(70),r.qZA(),r._UZ(71,"hr"),r.TgZ(72,"p",28),r._uU(73),r.qZA(),r.TgZ(74,"label",29),r._uU(75,"Quantity: "),r.TgZ(76,"input",30,31),r.NdJ("change",function(e){const n=r.CHM(t).$implicit,i=r.MAs(77);return r.oxw().calc(e,i.value,n.cost)}),r.qZA(),r.qZA(),r.TgZ(78,"div",26),r.TgZ(79,"div",32),r.TgZ(80,"button",25),r.NdJ("click",function(){const e=r.CHM(t).$implicit,n=r.MAs(77);return r.oxw().addtocart(e.imag,e.cost,e.name,n.value)}),r._uU(81,"Add"),r.qZA(),r.qZA(),r.TgZ(82,"div",32),r.TgZ(83,"button",25),r.NdJ("click",function(e){return r.CHM(t),r.oxw().show(e)}),r._uU(84," Buy"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r._UZ(85,"br"),r._UZ(86,"hr"),r.TgZ(87,"p",33),r._uU(88),r.qZA(),r.qZA(),r.TgZ(89,"div",26),r.TgZ(90,"p",34),r._uU(91),r.qZA(),r.TgZ(92,"button",35),r.NdJ("click",function(){const e=r.CHM(t).$implicit,n=r.MAs(77);return r.oxw().addtocart(e.imag,e.cost,e.name,n.value)}),r._uU(93,"Add"),r.qZA(),r.qZA(),r.qZA()}if(2&t){const t=e.$implicit,n=r.MAs(77),i=r.oxw();r.xp6(1),r.s9C("src",t.imag,r.LSH),r.xp6(3),r.s9C("id",t.id),r.xp6(13),r.s9C("src",t.imag,r.LSH),r.xp6(5),r.Oqu(i.name),r.xp6(4),r.Oqu(i.add),r.xp6(4),r.Oqu(i.mobile),r.xp6(4),r.Oqu(i.email),r.xp6(5),r.Oqu(t.name),r.xp6(4),r.Oqu(n.value),r.xp6(4),r.hij("\u20b9",t.cost,""),r.xp6(2),r.hij("Total : \u20b9",t.cost,""),r.xp6(18),r.s9C("src",t.imag,r.LSH),r.xp6(3),r.Oqu(t.name),r.xp6(3),r.hij("",t.p," "),r.xp6(15),r.hij("\u20b9",t.cost,""),r.xp6(3),r.hij("\u20b9",t.cost,"")}}let kb=(()=>{class t{constructor(t,e){this._cartsService=t,this.firebaseSerivce=e,this.items=[{name:"white limbus sheet",p:"The sheet is white in colour with dimensions starting according to the customer requirement.",imag:"assets/img/pr1.jpg",id:"pr1",cost:"849"},{name:"grey limbus asbestos sheet",p:"These light blue sheets are dried in the sun for a longer period to make it strong and long lasting.",imag:"assets/img/pr2.jpeg",id:"pr2",cost:"235"},{name:"blue cobe asbestos sheet",p:"The sheet is available in dark blue colour. The sheets has a higher density.",imag:"assets/img/pr3.jpg",id:"pr3",cost:"190"},{name:"sandal trax sheet",p:"These sheets are cut into longer dimensions and are double folded.",imag:"assets/img/pr4.jpg",id:"pr4",cost:"625"},{name:"white hana sheet",p:"The sheets are small compared to other products available. They are smaller in density.",imag:"assets/img/pr5.jpg",id:"pr5",cost:"580"},{name:"rasan blue sheet",p:"The blue sheets are more flexible.",imag:"assets/img/pr6.jpg",id:"pr6",cost:"499"},{name:"whitish brown sheet",p:"These sheets are cut into longer dimensions and are double folded.",imag:"assets/img/pr7.jpg",id:"pr7",cost:"799"},{name:"darkblue yagu sheet",p:"The sheets has a higher density.The Dark blue sheets are more flexible.",imag:"assets/img/pr8.jpeg",id:"pr8",cost:"699"}],this.cartitems=[],this.tc=0}ngOnInit(){window.scrollTo(0,0),this.firebaseSerivce.getUsers().subscribe(t=>{this.orderarray=t.map(t=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(e=>{if(t.payload.val()[0].emailadd===(null==e?void 0:e.email)){let e=document.getElementById("name1");this.name=""+t.payload.val()[0].username,e=document.getElementById("emailid1"),this.email=""+t.payload.val()[0].emailadd,e=document.getElementById("phone1"),this.mobile=""+t.payload.val()[0].mobileno,e=document.getElementById("address1"),this.add=""+t.payload.val()[0].address}})})})}fullopen(t){t.target.parentElement.childNodes[2].style.display="block"}fullclose(t){t.target.parentElement.parentElement.style.display="none"}addtocart(t,e,n,r){void 0===this.name?alert("please login"):this.firebaseSerivce.getUsers().subscribe(i=>{this.orderarray=i.map(i=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(o=>{if(console.log(i.payload.val()[0].emailadd,null==o?void 0:o.email),i.payload.val()[0].emailadd===(null==o?void 0:o.email)){let o=document.getElementById("name1");this.name=""+i.payload.val()[0].username,o=document.getElementById("emailid1"),this.email=""+i.payload.val()[0].emailadd,o=document.getElementById("phone1"),this.mobile=""+i.payload.val()[0].mobileno,o=document.getElementById("address1"),this.add=""+i.payload.val()[0].address,this._cartsService.addcartitems({imag:t,price:e,name:n,quantity:r,uname:this.name,email:this.email}),console.log(i.payload.val()[0].address,i.payload.val()[0].mobileno,i.payload.val()[0].username)}})})})}addtodb(t,e,n,r){void 0===this.name?alert("please login"):(this.randid=Math.floor(9e9*Math.random())+1e9,this.firebaseSerivce.getUsers().subscribe(i=>{this.orderarray=i.map(i=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(o=>{i.payload.val()[0].emailadd===(null==o?void 0:o.email)&&null!==this.orderform&&(console.log(i.payload.val()[0].address,i.payload.val()[0].mobileno,i.payload.val()[0].username),this.orderform=[{orderid:this.randid,name:t,price:e,image:n,username:i.payload.val()[0].username,address:i.payload.val()[0].address,mobileno:i.payload.val()[0].mobileno,email:i.payload.val()[0].emailadd,quantity:r}],this._cartsService.addOrdersToFirebase(this.orderform),this.orderform=null)})})}))}show(t){t.target.parentElement.parentElement.parentElement.parentElement.parentElement.childNodes[1].style.display="block",this.firebaseSerivce.getUsers().subscribe(t=>{this.orderarray=t.map(t=>{this.firebaseSerivce.firebaseAuth.onAuthStateChanged(e=>{if(console.log(t.payload.val()[0].emailadd,null==e?void 0:e.email),t.payload.val()[0].emailadd===(null==e?void 0:e.email)){let e=document.getElementById("name1");this.name=""+t.payload.val()[0].username,e=document.getElementById("emailid1"),this.email=""+t.payload.val()[0].emailadd,e=document.getElementById("phone1"),this.mobile=""+t.payload.val()[0].mobileno,e=document.getElementById("address1"),this.add=""+t.payload.val()[0].address,console.log(t.payload.val()[0].address,t.payload.val()[0].mobileno,t.payload.val()[0].username)}})})})}calc(t,e,n){this.tc=0,this.tc=Number(e)*Number(n),t.target.parentElement.parentElement.parentElement.parentElement.childNodes[6].innerHTML="\u20b9"+this.tc,t.target.parentElement.parentElement.parentElement.parentElement.childNodes[1].childNodes[0].childNodes[3].childNodes[2].childNodes[3].innerHTML="Total:\u20b9"+this.tc}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(lo),r.Y36(X_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-products"]],decls:10,vars:1,consts:[[1,"rel","d-block","w-100","height",2,"background-image","url('assets/img/img1.jpg')","background-size","cover","background-position","center center"],[1,"carocard","jump"],[1,"car-title"],[1,"p-container"],["class","p-card",4,"ngFor","ngForOf"],[1,"p-card"],["alt","rand",3,"src"],[1,"hovr-butt",3,"click"],[1,"full-view",3,"id"],[1,"cl"],[1,"close",3,"click"],["id","prev",1,"preview"],[1,"prebox"],[1,"close","pr",3,"click"],[1,"cen"],[1,"row","low"],[1,"col-md"],["alt","",1,"pimg",3,"src"],["id","name1",1,"fnt"],[1,"colo"],["id","address1",1,"fnt"],["id","phone1",1,"fnt"],["id","emailid1",1,"fnt"],[1,"fnt"],["id","total1",1,"fnt","colo"],[1,"bttn","padl",3,"click"],[1,"row"],["alt","","width","460","height","345",3,"src"],[1,"txtp"],["for","quant","id","quantt"],["type","number","id","quant","min","1","required","","value","1","max","10",1,"quant",3,"change"],["num",""],[1,"col"],["id","totall",1,"ful-rate"],[1,"rate"],[1,"bttn",3,"click"]],template:function(t,e){1&t&&(r._UZ(0,"app-head"),r._UZ(1,"div",0),r.TgZ(2,"div",1),r.TgZ(3,"span",2),r._uU(4,"Asbestos"),r.qZA(),r.qZA(),r._UZ(5,"app-productdis"),r.TgZ(6,"div",3),r.YNc(7,Ib,94,16,"div",4),r.qZA(),r._UZ(8,"app-contact"),r._UZ(9,"app-footer")),2&t&&(r.xp6(7),r.Q6J("ngForOf",e.items))},directives:[gb,Eb,A,vb,_b],styles:["@font-face{font-family:paratext;src:url(https://selva1806.github.io/web/assets/font/BalooChettan2-Regular.ttf)}@font-face{font-family:producthead;src:url(https://selva1806.github.io/web/assets/font/Comfortaa-VariableFont_wght.ttf)}.colo[_ngcontent-%COMP%]{color:#4545f0;font-weight:bolder}.pr[_ngcontent-%COMP%]{float:right}.low[_ngcontent-%COMP%]{padding-top:20px;display:flexbox}.fnt[_ngcontent-%COMP%]{font-size:18px}.prebox[_ngcontent-%COMP%]{background-color:#fff;width:90%;transform:translate(3%);height:auto;display:block;padding:20px;justify-content:center;border-radius:5px;border:2px solid #3734e2}.cen[_ngcontent-%COMP%]{text-align:center}.preview[_ngcontent-%COMP%]{display:none;width:100%;height:100%;top:13%;background-color:hsla(0,0%,100%,.842);position:fixed;overflow:scroll;z-index:9}.flexcont[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap}.rate[_ngcontent-%COMP%]{padding-left:30px;padding-top:20px;font-size:22px;font-weight:500;position:absolute}.ful-rate[_ngcontent-%COMP%], .rate[_ngcontent-%COMP%]{font-family:paratext}.ful-rate[_ngcontent-%COMP%]{font-size:40px;font-weight:800;float:right}.height[_ngcontent-%COMP%]{height:600px}.rel[_ngcontent-%COMP%]{position:relative}@media screen and (max-width:520px){.prebox[_ngcontent-%COMP%]{transform:translate(0)}}@keyframes popup1{0%{transform:translateY(0)}50%{transform:translateY(10px)}to{transform:translateY(0)}}@keyframes popup{0%{opacity:0;transform:translateY(150px)}to{opacity:1;transform:translateY(0)}}.carocard[_ngcontent-%COMP%]{display:grid;justify-content:center;top:30%;left:10%;width:80%;height:inherit;position:absolute;opacity:0;animation:popup 1s infinite;animation-duration:8s}.jump[_ngcontent-%COMP%]{opacity:1;animation:popup1 2s infinite;animation-duration:2s}.carocard[_ngcontent-%COMP%]   .car-title[_ngcontent-%COMP%]{font-size:50px;font-weight:600;font-style:italic;color:#fff;justify-content:center}.p-card[_ngcontent-%COMP%]{height:320px;background-color:#f7f7f7;margin:20px;justify-content:center;border-radius:10px;border:1px solid #8d8d8d;overflow:hidden}.p-card[_ngcontent-%COMP%], .p-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px;transition:.5s}.p-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px;position:relative;border-bottom:1px solid #8d8d8d}.p-card[_ngcontent-%COMP%]:hover{box-shadow:8px 8px 30px #4b4b4b80}.p-container[_ngcontent-%COMP%]{margin-top:100px;justify-content:center;display:flex;flex-wrap:wrap;padding:10px}.hovr-butt[_ngcontent-%COMP%]{position:absolute;margin-top:-150px;margin-left:100px;background-color:rgba(37,37,37,.725);border:1px solid #fff;color:#fff;width:100px;height:40px;opacity:0;border-radius:5px;box-shadow:none;transition:.5s}.p-card[_ngcontent-%COMP%]:hover   .hovr-butt[_ngcontent-%COMP%]{transition:1s;opacity:1}.full-view[_ngcontent-%COMP%]{position:fixed;padding:90px 20px 20px;top:0;left:0;width:100%;height:100%;display:none;overflow:scroll;z-index:4;background-color:hsla(0,0%,100%,.993)}.full-view[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-top:20px;padding-left:20px;font-weight:700;font-family:producthead;text-transform:uppercase;font-size:30px}.txtp[_ngcontent-%COMP%]{padding-left:20px;font-family:paratext;word-wrap:break-word;font-size:16px}.bttn[_ngcontent-%COMP%]{background-color:#fd00db;color:#fff;width:80px;height:40px;overflow:hidden;border:2px solid #fffcfc;margin-top:15px;margin-left:200px;transition:.5s;outline:none}.bttn[_ngcontent-%COMP%]:hover{border-image:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);border-image-slice:1;background-color:#fff;color:#fd00db}.bttn-txt[_ngcontent-%COMP%]{background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);-webkit-background-clip:text;-webkit-text-fill-color:#0000;position:absolute;font-size:20px;font-weight:600;transform:translate(-20px,-240px);font-style:italic}.bttn[_ngcontent-%COMP%]:hover   .bttn-txt[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#eee,#eee);-webkit-background-clip:text;-webkit-text-fill-color:#0000}.bttn-alig[_ngcontent-%COMP%]{margin-top:50px}.bttn-left[_ngcontent-%COMP%]{position:relative;border:none;width:130px;height:120px;background:#f509ec;background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);transform:translate(-200px);transition:.5s}.bttn[_ngcontent-%COMP%]:hover   .bttn-left[_ngcontent-%COMP%]{transform:translate(-85px,-10px)}.bttn-right[_ngcontent-%COMP%]{position:relative;border:none;width:130px;height:120px;transform:translate(160px,-150px);background:#f509ec;background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);transition:.5s}.bttn[_ngcontent-%COMP%]:hover   .bttn-right[_ngcontent-%COMP%]{transform:translate(45px,-150px)}.bttn-alig[_ngcontent-%COMP%]{margin-left:30%}.full-view[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;max-height:500px;border:2px solid #aca8a8}.quant[_ngcontent-%COMP%]{width:90px;margin-left:50px;border-radius:50px;border:2px solid #f500f5;transition:.5s;padding:10px}#quantt[_ngcontent-%COMP%]{font-family:producthead;text-transform:uppercase;margin-left:20px;color:#f101f1;font-weight:900}.quant[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 10pt 2pt #f500f5}.padl[_ngcontent-%COMP%]{margin-left:10px}.col[_ngcontent-%COMP%]{display:flex}.cl[_ngcontent-%COMP%]{height:40px;margin-top:20px;margin-right:-30px;position:sticky;overflow:hidden}.close[_ngcontent-%COMP%]{color:#aaa;float:right;font-size:28px;font-weight:700;margin-bottom:40px;padding-right:20px;z-index:6}.full-view[_ngcontent-%COMP%]   .pimg[_ngcontent-%COMP%]{width:200px;height:200px}"]}),t})();const Ab=[{path:"",component:xb},{path:"about",component:bb},{path:"login",component:Sb},{path:"signup",component:(()=>{class t{constructor(t){this.firebaseSerivce=t,this.isSignedIn=!1}ngOnInit(){}onSignup(t,e,n,r,i,o){var s=this;return fo(function*(){var a;0===t.length||0===e.length||0===n.length||0===r.length||0===i.length||0===o.length?(alert("Please satisfy all the fields"),0===r.length?null==(a=document.getElementById("ur"))||a.style.setProperty("border-bottom-color","red"):null==(a=document.getElementById("ur"))||a.style.setProperty("border-bottom-color","#08ff08"),0===t.length?null==(a=document.getElementById("em"))||a.style.setProperty("border-bottom-color","red"):null==(a=document.getElementById("em"))||a.style.setProperty("border-bottom-color","#08ff08"),0===e.length?null==(a=document.getElementById("pass1"))||a.style.setProperty("border-bottom-color","red"):null==(a=document.getElementById("pass1"))||a.style.setProperty("border-bottom-color","#08ff08"),0===n.length?null==(a=document.getElementById("pass2"))||a.style.setProperty("border-bottom-color","red"):null==(a=document.getElementById("pass2"))||a.style.setProperty("border-bottom-color","#08ff08"),0===i.length?null==(a=document.getElementById("ph"))||a.style.setProperty("border-bottom-color","red"):null==(a=document.getElementById("ph"))||a.style.setProperty("border-bottom-color","#08ff08"),0===o.length?null==(a=document.getElementById("ad"))||a.style.setProperty("border-bottom-color","red"):null==(a=document.getElementById("ad"))||a.style.setProperty("border-bottom-color","#08ff08")):(null==(a=document.getElementById("ur"))||a.style.setProperty("border-bottom-color","#08ff08"),null==(a=document.getElementById("ad"))||a.style.setProperty("border-bottom-color","#08ff08"),null==(a=document.getElementById("em"))||a.style.setProperty("border-bottom-color","#08ff08"),null==(a=document.getElementById("ph"))||a.style.setProperty("border-bottom-color","#08ff08"),null==(a=document.getElementById("pass2"))||a.style.setProperty("border-bottom-color","#08ff08"),null==(a=document.getElementById("pass1"))||a.style.setProperty("border-bottom-color","#08ff08"),e!==n||e.length<8?(alert("password error/mismatch\n1.makesure password contains atleast 1 caps & 1 number to make them stronger(optional)\n2.length must be greater than 8\n"),null==(a=document.getElementById("pass1"))||a.style.setProperty("border-bottom-color","red"),null==(a=document.getElementById("pass2"))||a.style.setProperty("border-bottom-color","red")):10!==i.length?(alert("invalid mobile number"),null==(a=document.getElementById("pass1"))||a.style.setProperty("border-bottom-color","#08ff08"),null==(a=document.getElementById("pass2"))||a.style.setProperty("border-bottom-color","#08ff08"),null==(a=document.getElementById("ph"))||a.style.setProperty("border-bottom-color","red")):(null==(a=document.getElementById("ph"))||a.style.setProperty("border-bottom-color","#08ff08"),yield s.firebaseSerivce.signup(t,e,r,i,o),s.firebaseSerivce.isLoggedIn&&(s.isSignedIn=!0)))})()}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(X_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-signup"]],decls:33,vars:0,consts:[[1,"login-container"],["src","assets/img/signup.png","alt","",1,"auth-img"],[1,"login-form"],["src","assets/img/loginl.jpg","alt","",1,"mob-log"],[1,"form-group","row"],[1,"col-sm"],["type","text","id","ur","minlength","5","ngModel","","placeholder","Username","required","",1,"login-input"],["userna",""],["type","email","id","em","placeholder","Email","required","",1,"login-input"],["emails",""],["type","password","id","pass1","minlength","8","placeholder","Password","required","",1,"login-input"],["passwords1",""],["type","password","id","pass2","minlength","8","placeholder","Confirm Password","required","",1,"login-input"],["passwords2",""],["type","number","id","ph","minlength","10","maxlength","10","placeholder","Phone","required","",1,"login-input"],["mob",""],["minlength","5","id","ad","placeholder","Address","required","",1,"login-input"],["add",""],[1,"bttn-login",3,"click"]],template:function(t,e){if(1&t){const t=r.EpF();r._UZ(0,"app-bthome"),r.TgZ(1,"div",0),r._UZ(2,"img",1),r.TgZ(3,"div",2),r.TgZ(4,"div"),r._UZ(5,"img",3),r.TgZ(6,"div",4),r.TgZ(7,"div",5),r._UZ(8,"input",6,7),r.qZA(),r.qZA(),r.TgZ(10,"div",4),r.TgZ(11,"div",5),r._UZ(12,"input",8,9),r.qZA(),r.qZA(),r.TgZ(14,"div",4),r.TgZ(15,"div",5),r._UZ(16,"input",10,11),r.qZA(),r.qZA(),r.TgZ(18,"div",4),r.TgZ(19,"div",5),r._UZ(20,"input",12,13),r.qZA(),r.qZA(),r.TgZ(22,"div",4),r.TgZ(23,"div",5),r._UZ(24,"input",14,15),r.qZA(),r.qZA(),r.TgZ(26,"div",4),r.TgZ(27,"div",5),r._UZ(28,"textarea",16,17),r.qZA(),r.qZA(),r.TgZ(30,"div",4),r.TgZ(31,"button",18),r.NdJ("click",function(){r.CHM(t);const n=r.MAs(13),i=r.MAs(17),o=r.MAs(21),s=r.MAs(9),a=r.MAs(25),u=r.MAs(29);return e.onSignup(n.value,i.value,o.value,s.value,a.value,u.value)}),r._uU(32," Signup"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}},directives:[Tb],styles:[".login-container[_ngcontent-%COMP%], .login-form[_ngcontent-%COMP%]{display:flex;justify-content:center}.login-form[_ngcontent-%COMP%]{padding:5% 10px 10px;position:absolute;width:70%;background-color:#fff3;overflow:hidden;border:2px solid #fff;margin:90px auto auto;box-shadow:8px 8px 50px #6d6d6d}.createp[_ngcontent-%COMP%]{z-index:2;position:relative;text-align:center}.fpass[_ngcontent-%COMP%]{text-decoration:none;float:right}input[_ngcontent-%COMP%], input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]:focus{font-size:20px;background-color:#e6e6e6}.back[_ngcontent-%COMP%]{background-color:blue;width:200px;height:200px}.login-input[_ngcontent-%COMP%], .login-input[_ngcontent-%COMP%]:focus{height:50px;width:90%;padding-left:10%;margin-right:10%;outline:none;color:#000;border:none;border-bottom:1px solid #fff;background:inherit}.login-input[_ngcontent-%COMP%]::placeholder{color:#7c7c7c}.mob-log[_ngcontent-%COMP%]{display:none}@media only screen and (max-width:853px){.mob-log[_ngcontent-%COMP%]{width:300px;height:300px;display:flex;margin-left:auto;margin-right:auto;margin-top:0}.auth-img[_ngcontent-%COMP%]{display:none}.login-form[_ngcontent-%COMP%]{top:0;position:relative;background-color:#fff;display:block;border-radius:20px;padding-top:10%;width:90%}.login-container[_ngcontent-%COMP%]{padding-bottom:20px;height:auto;width:auto;background:linear-gradient(355deg,red 6%,#e13232 33%,#2f00dc 65%,#00c9dc 94%)}.login-form[_ngcontent-%COMP%]:hover{box-shadow:8px 8px 50px #fff0}.login-input[_ngcontent-%COMP%], .login-input[_ngcontent-%COMP%]:focus{margin-left:1rem;font-size:15px;border-top:none;border-left:none;border-right:none;border-bottom-color:#000;background:inherit}.login-input[_ngcontent-%COMP%]::placeholder{color:#727272}}label[_ngcontent-%COMP%]{font-size:20px;padding-right:20%}.bttn-login[_ngcontent-%COMP%]{width:150px;height:40px;outline:none;border:none;border-radius:20px;background-color:#8a2be2;color:#fff;margin-left:auto;margin-right:auto;position:relative;transition:1s}.bttn-login[_ngcontent-%COMP%]:hover{background-color:#fff;color:purple}.auth-img[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:auto}"]}),t})()},{path:"products",component:kb},{path:"admin",component:Cb}];let Ob=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[di.forRoot(Ab)],di]}),t})();const Pb={apiKey:"AIzaSyBPTV9dam0BA0T7aclkMnP_doFh-3onRmo",authDomain:"angular-back-7bf79.firebaseapp.com",databaseURL:"https://angular-back-7bf79-default-rtdb.firebaseio.com",projectId:"angular-back-7bf79",storageBucket:"angular-back-7bf79.appspot.com",messagingSenderId:"1088050041003",appId:"1:1088050041003:web:3090b2b62097f5a50aa7ee",measurementId:"G-32Z1V30D5T"};let Nb=(()=>{class t{constructor(){}ngOnInit(){}scrolltotop(){!function t(){var e=document.documentElement.scrollTop||document.body.scrollTop;e>0&&(window.requestAnimationFrame(t),window.scrollTo(0,e-e/8))}()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-scroll"]],decls:4,vars:0,consts:[[1,"stotop",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","26","height","26","fill","white","viewBox","0 0 16 16",1,"bi","bi-chevron-double-up"],["fill-rule","evenodd","d","M7.646 2.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 3.707 2.354 9.354a.5.5 0 1 1-.708-.708l6-6z"],["fill-rule","evenodd","d","M7.646 6.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 7.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.NdJ("click",function(){return e.scrolltotop()}),r.O4$(),r.TgZ(1,"svg",1),r._UZ(2,"path",2),r._UZ(3,"path",3),r.qZA(),r.qZA())},styles:[".stotop[_ngcontent-%COMP%]{background:red;background:linear-gradient(56deg,red 10%,#9c1e41 36%,#004da7 67%,#000);height:50px;width:50px;border-radius:30px;padding:12px;position:fixed;bottom:0;left:0;opacity:.5;transform:translate(10px,-10px);transition:.5s;z-index:8}.stotop[_ngcontent-%COMP%]:hover{opacity:1;transform:translate(10px,-30px)}"]}),t})(),Rb=(()=>{class t{constructor(t){this.firebaseSerivce=t,this.title="mp2",this.isSignedIn=!1}ngOnInit(){this.isSignedIn=null!==localStorage.getItem("user")}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(X_))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-root"]],decls:2,vars:0,template:function(t,e){1&t&&(r.TgZ(0,"router-outlet"),r._UZ(1,"app-scroll"),r.qZA())},directives:[ni,Nb],styles:[""]}),t})(),Db=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-homedetails"]],decls:10,vars:0,consts:[[1,"con"],["data-aos","fade-up","data-aos-duration","4000","data-aos-delay","150",1,"container","alig"],["src","assets/img/rand1.png","alt","rand1",1,"rand1"],["src","assets/img/rand3.png","alt","rand3",1,"rand3"],[1,"ptag"],["routerLink","/products",1,"prdt"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r._UZ(2,"img",2),r._UZ(3,"img",3),r.TgZ(4,"p",4),r._uU(5,"Asbestos cement products, including asbestos cement sheets and pipes, currently make up approximately 90% of the world\u2019s asbestos production. The vast majority is used to make asbestos roofing. While asbestos cement sheet production in the U.S. ended in the 1980s, it remains legal to import the product from other countries. Fibrous asbestos cement is more durable than drywall and easier to work with than concrete, and they have numerous applications in construction, including use as roofing and siding. Today in the U.S. the fibers in cement sheets are usually made of cellulose, a substance found in plants, but for nearly 80 years they were primarily made with asbestos. These sheets were installed in homes, military bases, public buildings, industrial settings and job sites.Asbestos cement sheet was once synonymous with \u201cfibrous cement sheet,\u201d and it has also been generically called \u201cAC sheet\u201d and \u201cfibro.\u201d U.S. companies stopped manufacturing these types of asbestos products, but asbestos cement sheets are still popular building materials in developing nations such as India and China. These products are dangerous because with age and damage they become friable, or easily crumbled, making them likely to release asbestos fibers. "),r._UZ(6,"br"),r._UZ(7,"br"),r.TgZ(8,"button",5),r._uU(9,"Go to products"),r.qZA(),r.qZA(),r.qZA(),r.qZA())},directives:[Xr],styles:["@font-face{font-family:paratext;src:url(https://selva1806.github.io/web/assets/font/BalooChettan2-Regular.ttf)}.world-image[_ngcontent-%COMP%]{background-image:url(logo.6f53e24b09c2b86887aa.jpg);width:500px;height:100%;background-size:cover;background-position:50%;margin-left:auto;margin-top:5%;animation:updown 3s infinite}.rand1[_ngcontent-%COMP%]{transform:translate(-200px,-80px)}.rand1[_ngcontent-%COMP%], .rand3[_ngcontent-%COMP%]{width:300px;height:300px;position:absolute}.rand3[_ngcontent-%COMP%]{transform:translate(-200px,-100px)}.prdt[_ngcontent-%COMP%]{text-decoration:none;color:#fff;background-color:#3662f3;padding:15px 50px;border-top-left-radius:25px;border:none;font-size:18px;outline:none;float:right;transition:.5s}.prdt[_ngcontent-%COMP%]:hover{background-color:#fff;color:#3662f3}@keyframes rotat{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes updown{0%{transform:translateY(0)}50%{transform:translateY(20px)}to{transform:translateY(0)}}.ptag[_ngcontent-%COMP%]{font-size:16px;position:relative;z-index:1;color:#fff;font-family:paratext;animation:updown 6s infinite}.alig[_ngcontent-%COMP%]{padding-top:110px;padding-bottom:60px}.con[_ngcontent-%COMP%]{background-color:#585858}.dot[_ngcontent-%COMP%]{background:url(https://www.visaka.co/assets/website/img/dot.png);width:50%;height:100%;z-index:-1;position:absolute;left:0;top:0}@media screen and (max-width: 992px){.dot[_ngcontent-%COMP%], .world-image[_ngcontent-%COMP%]{width:0;height:0}}@media screen and (max-width: 507px){.alig[_ngcontent-%COMP%]{position:relative;overflow:hidden}}"]}),t})(),Mb=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-homedetails2"]],decls:32,vars:0,consts:[[1,"marr"],[1,"cont"],["data-aos","fade-up","data-aos-duration","4000","data-aos-delay","150",1,"col-sm"],[1,"carrd"],[1,"top-circle"],[1,"bottom-circle"],[1,"carrd-head"],[1,"carrd-p"],[1,"pfont"]],template:function(t,e){1&t&&(r._UZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r._UZ(4,"div",4),r._UZ(5,"div",5),r.TgZ(6,"div",6),r.TgZ(7,"h1"),r._uU(8,"Corrugated Asbestos Sheets"),r.qZA(),r.qZA(),r.TgZ(9,"div",7),r.TgZ(10,"p",8),r._uU(11,"Fibrous cement created an easy and affordable alternative to corrugated metal panels, which offer little insulation and inevitably rust over time. Corrugated asbestos sheets were used in the roofing ."),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(12,"div",2),r.TgZ(13,"div",3),r._UZ(14,"div",4),r._UZ(15,"div",5),r.TgZ(16,"div",6),r.TgZ(17,"h1"),r._uU(18,"Asbestos Flatsheet"),r.qZA(),r.qZA(),r.TgZ(19,"div",7),r.TgZ(20,"p",8),r._uU(21,"Because fibrous cement is much more water resistant than drywall, flat sheets of asbestos cement found their way into the interiors of homes and businesses as walls and underlayment for flooring."),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(22,"div",2),r.TgZ(23,"div",3),r._UZ(24,"div",4),r._UZ(25,"div",5),r.TgZ(26,"div",6),r.TgZ(27,"h1"),r._uU(28,"Asbestos Lumber"),r.qZA(),r.qZA(),r.TgZ(29,"div",7),r.TgZ(30,"p",8),r._uU(31," Also called asbestos cement sheathing, \u201casbestos lumber\u201d was not made out of wood at all. Instead, it was marketed as a superior alternative to wood. It was fireproof and electrically nonconductive, yet still soft enough to be worked like natural lumber. "),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA())},styles:["@font-face{font-family:paratext;src:url(https://selva1806.github.io/web/assets/font/BalooChettan2-Regular.ttf)}@font-face{font-family:parahead;src:url(/assets/font/VarelaRound-Regular.ttf)}.cont[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-wrap:wrap;padding-bottom:60px}.carrd[_ngcontent-%COMP%]{width:400px;position:relative;padding:20px;margin-left:auto;margin-right:auto;background-color:#fff;border-radius:0;margin-top:30px;transition:1s;overflow:hidden}.carrd[_ngcontent-%COMP%]:hover{border-radius:20px;box-shadow:8px 8px 25px #6d6d6d}.top-circle[_ngcontent-%COMP%]{width:250px;height:250px;border-radius:120px;position:absolute;transform:translate(-150px,-150px) rotateY(180deg);background-color:#f85edecc;transition:.5s}.carrd[_ngcontent-%COMP%]:hover   .top-circle[_ngcontent-%COMP%]{transform:translate(-50px,-50px)}.bottom-circle[_ngcontent-%COMP%]{width:250px;height:250px;border-radius:120px;position:absolute;transform:translate(550px,150px) rotateY(180deg);background-color:#00e1ffcc;transition:.5s}.carrd[_ngcontent-%COMP%]:hover   .bottom-circle[_ngcontent-%COMP%]{transform:translate(50px,50px)}.marr[_ngcontent-%COMP%]{margin-top:100px}.carrd-head[_ngcontent-%COMP%]{font-family:parahead;font-weight:bolder}.carrd-head[_ngcontent-%COMP%], .carrd-p[_ngcontent-%COMP%]{position:relative;z-index:1;padding-left:25px;padding-top:50px}.carrd-p[_ngcontent-%COMP%]{font-family:paratext;font-size:20px}.pfont[_ngcontent-%COMP%]{color:#1a1414}@media screen and (max-width: 992px){.carrd[_ngcontent-%COMP%]{width:340px;height:610px}}"]}),t})(),Lb=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-homefront"]],decls:9,vars:0,consts:[[1,"home-cont"],["src","assets/img/first.png","alt","",1,"right-img"],["src","assets/img/homeleft.png","alt","",1,"left-img"],[1,"row"],[1,"col-sm"],[1,"head"],["src","assets/img/himg.svg","alt","",1,"bimg"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r._UZ(1,"img",1),r._UZ(2,"img",2),r.TgZ(3,"div",3),r.TgZ(4,"div",4),r.TgZ(5,"p",5),r._uU(6,"Welcome To Asbestos Production"),r.qZA(),r.qZA(),r.TgZ(7,"div",4),r._UZ(8,"img",6),r.qZA(),r.qZA(),r.qZA())},styles:["@font-face{font-family:head;src:url(https://selva1806.github.io/web/assets/font/Comfortaa-VariableFont_wght.ttf)}@keyframes updown{0%{transform:translateY(0)}50%{transform:translateY(50px)}to{transform:translateY(0)}}@keyframes rad{0%{transform:translateX(0)}50%{transform:translateX(5%)}to{transform:translateX(0)}}@keyframes colorchange{0%{background-color:#f7f7f7}50%{background-color:#5356ff}to{background-color:#f7f7f7}}@keyframes colorchange-2{0%{color:#000}50%{color:#fff}to{color:#000}}.left-img[_ngcontent-%COMP%]{position:absolute;float:left;margin-left:-350px;margin-top:-50px;z-index:1;animation:updown 6s infinite}.row[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.right-img[_ngcontent-%COMP%]{position:relative;float:right;margin-right:-150px;margin-top:-50px;z-index:1;animation:updown 6s infinite}.bimg[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:10%;width:600px;height:auto;padding-top:100px;padding-bottom:50px;animation:rad 6s infinite}.head[_ngcontent-%COMP%]{z-index:2;margin-top:150px;font-size:50px;margin-left:20%;font-family:head;color:#fff}.head[_ngcontent-%COMP%], .home-cont[_ngcontent-%COMP%]{position:relative}.home-cont[_ngcontent-%COMP%]{padding-bottom:60px;margin-bottom:20px;background-color:#5356ff}@media only screen and (max-width:600px){.bimg[_ngcontent-%COMP%]{width:350px;padding-right:20px;margin-right:auto}.right-img[_ngcontent-%COMP%]{margin-right:-400px}.left-img[_ngcontent-%COMP%]{margin-left:-400px}}"]}),t})(),Ub=(()=>{class t{constructor(t,e){this.firebaseService=t,this.router=e}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(X_),r.Y36(Jr))},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-calogin"]],decls:21,vars:0,consts:[[1,"ca-cont"],[1,"but-cont"],[1,"ptag"],["routerLink","/login",1,"bttn"],[1,"bttn-left"],[1,"bttn-right"],[1,"bttn-txt","pl"],[1,"bttn-txt","pll"],[1,"ptag","tp"],["routerLink","/signup",1,"bttn","rt"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"p",2),r._uU(3,"Want to sign in?"),r.qZA(),r.TgZ(4,"button",3),r._UZ(5,"div",4),r._UZ(6,"div",5),r.TgZ(7,"span",6),r._uU(8,"Admin"),r.qZA(),r.qZA(),r.TgZ(9,"button",3),r._UZ(10,"div",4),r._UZ(11,"div",5),r.TgZ(12,"span",7),r._uU(13,"Customer"),r.qZA(),r.qZA(),r.TgZ(14,"p",8),r._uU(15,"or"),r.qZA(),r.TgZ(16,"button",9),r._UZ(17,"div",4),r._UZ(18,"div",5),r.TgZ(19,"span",6),r._uU(20,"Signup"),r.qZA(),r.qZA(),r.qZA(),r.qZA())},directives:[Xr],styles:["@font-face{font-family:head;src:url(https://selva1806.github.io/web/assets/font/Comfortaa-VariableFont_wght.ttf)}.ca-cont[_ngcontent-%COMP%]{display:flex;padding:100px 10px;justify-content:center;background-image:url(https://selva1806.github.io/web/assets/img/authbac.jpg);background-attachment:fixed;background-position:50%;background-repeat:no-repeat;background-size:cover}.flot[_ngcontent-%COMP%]{position:absolute;width:300px;margin-top:400px}.login[_ngcontent-%COMP%]{width:10rem;height:4rem;border:none;background-color:#0430f5;border-radius:5px;color:#fff}.bttn[_ngcontent-%COMP%], .login[_ngcontent-%COMP%]{margin-left:10px}.bttn[_ngcontent-%COMP%]{background-color:initial;width:160px;height:70px;overflow:hidden;border:2px solid;border-image:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);border-image-slice:1;transition:.5s;outline:none}.bttn[_ngcontent-%COMP%]:hover{border:2px solid #fffcfc}.bttn-txt[_ngcontent-%COMP%]{background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);-webkit-background-clip:text;-webkit-text-fill-color:#0000;position:absolute;font-size:25px;font-weight:600;transform:translate(-25px,-230px);font-style:italic}.bttn[_ngcontent-%COMP%]:hover   .bttn-txt[_ngcontent-%COMP%]{background:-webkit-linear-gradient(#eee,#eee);-webkit-background-clip:text;-webkit-text-fill-color:#0000}.bttn-alig[_ngcontent-%COMP%]{margin-top:50px}.bttn-left[_ngcontent-%COMP%]{position:relative;border:none;width:130px;height:120px;background:#f509ec;background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);transform:translate(-200px);transition:.5s}.bttn[_ngcontent-%COMP%]:hover   .bttn-left[_ngcontent-%COMP%]{transform:translate(-54px,-10px)}.bttn-right[_ngcontent-%COMP%]{position:relative;border:none;width:130px;height:120px;transform:translate(160px,-150px);background:#f509ec;background:linear-gradient(106deg,#f509ec 15%,#0079ff 54%,#f509ec 85%);transition:.5s}.bttn[_ngcontent-%COMP%]:hover   .bttn-right[_ngcontent-%COMP%]{transform:translate(75px,-150px)}.bttn-alig[_ngcontent-%COMP%]{margin-left:30%}.pl[_ngcontent-%COMP%]{margin-left:-10px}.pll[_ngcontent-%COMP%]{margin-left:-25px}.ptag[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-family:head}.tp[_ngcontent-%COMP%]{margin-top:-120px}.rt[_ngcontent-%COMP%]{margin-left:25%}"]}),t})(),qb=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["app-clink"]],decls:6,vars:0,consts:[["data-aos","fade-right","data-aos-duration","4000","data-aos-delay","150",1,"clink-cont"],[1,"container"],[1,"ptag"],["routerLink","/about",1,"prdt"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"p",2),r._uU(3,"Any queries? feel free to "),r.TgZ(4,"button",3),r._uU(5,"Contact us"),r.qZA(),r.qZA(),r.qZA(),r.qZA())},directives:[Xr],styles:["@font-face{font-family:head;src:url(https://selva1806.github.io/web/assets/font/Comfortaa-VariableFont_wght.ttf)}.clink-cont[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.514);padding:50px;justify-content:center}.ptag[_ngcontent-%COMP%]{font-size:30px;text-align:center;font-family:head;color:#fff}.prdt[_ngcontent-%COMP%]{text-decoration:none;color:#fff;background-color:#3662f3;padding:15px 50px;border-top-left-radius:25px;border:none;font-size:18px;outline:none;transition:.5s}.prdt[_ngcontent-%COMP%]:hover{background-color:#fff;color:#3662f3}"]}),t})(),Fb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[Rb]}),t.\u0275inj=r.cJS({providers:[{provide:m,useClass:b},lo,X_],imports:[[pt,Ob,Pi.hO.initializeApp(Pb),J_,co]]}),t})();r.B6R(xb,[gb,Lb,Mb,Ub,Db,yb,qb,_b],[]),r.B6R(xb,[gb,Lb,Mb,Ub,Db,yb,qb,_b],[]),(0,r.G48)(),dt().bootstrapModule(Fb).catch(t=>console.error(t))}},t=>{"use strict";t(t.s=9641)}]);